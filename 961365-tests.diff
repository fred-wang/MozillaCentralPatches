# HG changeset patch
# Parent 893660c4d2852054cbf5cc02434b43cd0c72b45f
# User Frédéric Wang <fred.wang@free.fr>
Part 6 - Reftests. r=karl, b=961365

diff --git a/layout/reftests/fonts/math/fraction-1.otf b/layout/reftests/fonts/math/fraction-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..65a79827e6f714643dfb1b68550fd387a653de3c
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)FuR*7w~u?`xakaU|`5858IvWPU+Vkt#@tubvPO*d?#)Se1G
zMi4v*iU$#IiXw;yk<g1?ta#I-^`xRlrBTuN&+haQsamhjX6FC?=X|p>JL&E3??o*p
zp~C1kO@4cN|69P<1mLx4_9xC}qY=_eq=yrG`wuAkiKBoX0@z^hk=FR?`=N`3Ir&c|
zvsMnP)Te;@fNcBHDeKJl#Iru~J*K`ZO$Oz--c0xt^+-CKAFnnDp=yMN>Z~=MgL0T4
z6Z7k%RyNhT?&Sv3Cjq4`XOHE}Q`iY;f)581p}^(w!5b&*IzOXU6UFeN@yU**QnqR+
z5>bvKlw(@cqNSpd^RPQY)0)^P_(-{`%#eP`lk5Z9S&azMYZkJ8tpZFFOYY63c+)S&
zaJhmY?k-rj;E==&eiS5DNM4gz#b&&dSc9KMB=(`6^+~LgeVihhCb;#uSpqYJa86=D
z=ZeHC4&u7R8bT~6u@9WJO01LpG`e9UhYN6!!7$Ru(;BuRiR~ogFwjQ3!;zq<35pn@
z$0A*1Ig}?xi*hoAMuBcScfrXFr}KPUayyS3Z993wp2&=hSiIYIa<*gTGd9HyxoOFT
z#3)UJA;(Gzca*UAGhJuil@75>xtwCeieoqR<;r-T4#IJ_dn<rxkLFF=8BXzd%;3BE
z;$)<BMB`CGb_K)+h=hYN>E={kOb~OWpoM{yGe)u8Fxp~<Vel2yl&8S!VY%a-VwYT9
z6J=@CT%DK8-dKJ!f5w=;+(E5ufAjwbP4z^1675)K!Hhn9Fve<^ym}_S!=6$dO3kbk
zR!ZyDQloY;z*^oYx5@#vrSE1rptbl>bAF(;P*?zgssc4%7<cNzKz$hZR)<j?#;Y|@
zMa8YO!+TctEi96$JP`~EV;eUWigQy%RxEy*Evm(aujbtQAEsXX_Hgao)R)<BQ&qv>
z*E^xY+CspO`8CgU-FzWr#hocUe$28MU4otZzrNY$QttR;l-I5ijiHs7?)$iW4R;UQ
zf5GibVhA&O`QINA?xKH!29gny^LMRyDm8Jh2CxQAX!$K2FET_C5f=sBx}J4jE_uYi
Hjp#oCJOb?w

diff --git a/layout/reftests/fonts/math/fraction-2.otf b/layout/reftests/fonts/math/fraction-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..3ff6392d57cb40802d7e4679e3a870814b10d82c
GIT binary patch
literal 1908
zc%0o;PizcP9RA+S?6lpkZ8eLE(Y&yVCcB+(5upw=CL&ffn#O@J*0#IS?QEt?%Be|@
zE8!#|;vjB>NW?*8!+{Ip$W7gdE9oMv-<x^eKT_1yn|<&1{r<l1&3p59Xk=svt(bud
zbI`K*ttWfm1A$HeZ!K#ic{&%1l3pg=NbVllr|8>n0(t~sM}`jfCYIleTp-NJe<GE$
z^H`=n1JwIu+mlJ#r@kkj50mc^^=%n4D97|Qgg;S_W^#q;W|I(_CTM8R+0%I_hX^t;
zzdmW_(x&l-=4Ug2(wBFp3YA%G0W`sfgNab!l6xJ;+Xg<PRTIVVYSq)8dMR5o6p1KD
z5z0}mvu0^%<UHh!(6mnW2?0{BC@)CA=u7qy{j5cV=q=T(U#kF*i6!^vQvB&_F<h=7
zj5}3pHx5e75JXX8h2&L<Rcyd}i8TaSRN?^I*|5Yq*{3OzX@c7UFH2yC2+l|>=v<aq
z#eQ6qSVM$`B@TeIUWs+GpTr;><Z%uzvKU7O1zN)<q_CM}0w(%scQ}$1b)F(7=&?x`
zSuW*?(Waa%p-EuS$)9tx<Cy~Al-kS_X5SW`bk1idCTu?FxOvC53t5Na#=NvtH8Dn0
zVa&Bt!W|>*|18g0@T5!Z(jKQcvEtZ4eX%mWXRC)})fK>UCJUD1j;DDdZt@+xHW?{f
zV~Lm`y98pRM8d_CbaN^%CWw1d(86fiouXK7ntgH8H2D&0%2VKXL+<#1*d<TbL|Ga&
zPv@12KUUr?oH3>^c2FDJ-~9hUQ+-jHK|dB*FryD2jIq|bSI@+Ec%a;d@)}k)l=51&
zyh^(eVqNc)o0X8-HGHEI(z=3ZIXl{0ELK6NsYoqg;C7n<v>Uj)+(5H|*Bwwr#f@|%
zb}sE(sF7(r5ey1r>(&=b^Rp#ZDt(zNsil=)t@#f>EWPyY!HW6WFLU2!o5JC*w<E<B
z#ZV9nYkslo#w#Hk?o8ncVvfb>5**O~_07JNvgeOce!EIE#{M4G{lSmbR@d_CYj}Iu
z{|oM~iy_SD<$r%jco+Q>tRxvFxp3Etr%@C4Y6u<ZMAvU=`H>Ndh<YgO)%C3lvhET8
HHlqIoBtY&B

diff --git a/layout/reftests/fonts/math/fraction-3.otf b/layout/reftests/fonts/math/fraction-3.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..a35296253afe36c631792c9756e86b7f7fef605e
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)Fuszh6941>l;g`}IbifDV#!Xjd<#Zo*dy2jW<l5W^Wsh$cw
zM)amAp2VA?2;xB`h@cmh9tAJfo5gFTQPKF%?zByO)~mCb`M>`;-^|WV28V|S(TYi^
zFa}JM-+pS&0=^CaZ%uPJb*2!Dl3pb}oZ2(IPtkYY0`w5Tjtm~|POiEix=5Il|3tcA
z6|q8n4yX^vwl|xxPJK<i7$V<e>N~PzP>$)Hgy*P7vxU+`vq1<=c^aAv)<hA?A%aZI
zua8-UOd|58i}XoANfhnzQf&&ofF}5GFcAt|%3qy3-q!aKt(qu?>Go&a>ZNSWP$Z%p
zMJPwLjwMS&Bj+J^gr;?{IrvDqro1HmvM1RG^sp8YqPHw&{a6KfLM*vAm*P#o6vO2T
zg1EbA-Hd}0Gx$-KSRr{`VilY4USbV?7M0kCm2602o$M17$uz<3fSV;SLkMRj7Idyi
ztYSZINUR~mf)e|{S+~SG*-v5sHi|e82RV!)ixRD2E7Is9nS_A^y&aAeMO~nXJUtfa
zBFmvXF<O+9BQypK*v0csZZuosThm=UX(W1i%D#}x=Pf>9J4M^EN;#Y2PP=L8#l#qT
z$mm#U;f@jZex~azxzZta8JAO>SaIy4{;M*cXFK7f+r1UQw8u)O?Tlu4GH&o)d}%UL
zw#Sk&L3SC$Mu>!iap~q%UQ7^orJ#k8j5AKL+%OVx!!Y<VYRXgK^{{;7ec~;-x+cof
zsJS|?)x5FxZsCkE{Z|LIvHi{eA2ihywMntRKQEZkhY!YBYu(l}@f{whwxQa|s$r$N
zUahuk7XvKvPPtVJsF9(YwSX4!qvhO4ce%U>0!?LVzA)~zg@Kh}+*=h!a~Q8zLlqUb
z(2>}^yl-KNOyh}QP#D{=v0Ry-s<2As(@aIJto>}x&wexY%9n?0=BGZ*e3@zr20z~k
zmDiL5ek`o{W&h1-Asg;Y;qhaJ#px34)Bkm6UrD*`k5OK`PBcz0vo6JI>*$J{^>Dr2
zeTO|i;GVh|!i+Zm>m$Pb^iQysWR&E>T`QhOP28&itVRbSzh&e_hA1NHqM%#Xvo6TG
JNBrA}{vDhA?+gF{

diff --git a/layout/reftests/fonts/math/fraction-4.otf b/layout/reftests/fonts/math/fraction-4.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..553086d34ae5c3732f27ce208bb08a1161a9ef88
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*|up+Rnl59hCyT1Leg!j9<&~`u!<PlVksUJU1Qornr_%esh$cw
zrr=FbJc&0&5yXQ?5JWwwc=RGzZ~k1BMvKO8cBf5JtJbTtnfc!LJ8yPoC;dZ1{b<G%
zR2Y4x$!|VB@DcE}19)qiL&>wbSd{cK>EYzQp@WJZ@d0`WV8{B8b|u!_4b2ed<Uf_l
zS$V8dp91PVvhB~Ltux<~&j-o(kov9+8I%+H2Ew1IM>Dy?WTQa{4P!Jk=B&v)lmUWF
z%&(7IxpacRiIYABDBXE`qEMN}4nPxpIG6|pW=5WMoNVd+f@Vz=!>e^qI%}nDjZh?_
z97QO{wf3r|u90)V9ieIM>@#T1$`$1W>6bjoKB0#-i4eVMF>7fR;1RLp-du_|eKm&5
z6$Ej6(b|C{5;OQwlvp8oRbmxe@LpmKeioJ3ht+IQVx8=h6v;Hf?Xa6AFhdCEBo=fo
zORVA$u1TyR#DWt0z*(2XI@wR74>t0+00&u&B7*|0VH;A|PBH-l-LyL#Ns78i5o7dN
zq>C(v^2BISPL|L(&}Zi_IN8xmfp1G~=Lw^G2T$4;vtwfx@3Wn}?O27ZO>rY`T52&d
zCXT>}W2J;UM%eqAuCw4uhuEcEPH|$zv77pGWjxPL!U?x~D}ZT_7fjn3P4h(D;JbNs
zGE#QN5-~w`1;mDlgo6p`=2Tux5O<}Zh2gX_L9yI0y5ojn@D<dQr@-rBx#PWJmt0*F
zWogu0omVQ}Sb4W_#+bg`L9K6p^Zy4;^+aU~Jy>SJj6QrY#+qwhJrm#I;c^Sg8(2B4
zlsBs7b=pjTMcyelDgiYzc)b$PB7QWTAMPp^7eSz*NX-|<t(GvbI*dDO!e|WR^;)Q+
z;#N8mdsg->RLRtz2nL0*O`D6Qx#<!smA=lF)Kc3wbMC_rQ!mZmZ=IX|Iy*nz5Db31
z6)LtC1AZ*5`NiJruY|0-Glj>GSr(^Duvh=rH~Uh`&Ob(Z?JCh2`PCdaw0x|#zKUz@
z?jH6m!96uGgc-g3?+*y?rGJ7pl2MWicddBpHF2*7uomrz{Fc2J8KQ`&i-K-l&$=LM
J9`SD@`cD#-?G69{

diff --git a/layout/reftests/fonts/math/fraction-5.otf b/layout/reftests/fonts/math/fraction-5.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..c42f858054cee97b2aa3599a04b763885139af71
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)FuR*70QhC$;Kl5P|0LF+*ai-@rnOYxxS8e<b_x?vlodMfm0
z1aE@kNxUhFARa`5f_hQu(VMn6rB|h~rN)1Dr%mFsUY*^U|NEcw&F<`M-@rg0S}_h4
zMz3k|yDtvT0KN_YA53!~bv_@9l3pP_oZ3HdP|+hkKo0@zc;B(k#L9=EtAsiEPp9)%
z0V~v3fcl7R2eKLK>_X~wKlz?g-<>6ca#G(w_%rorHeVcTHVC0<n1<%OHCBLflpquH
z>myb^lic(^N%}aTbQSE;Vs!$$08Q}WU?LQ_a{BrDQ*Aw8(5i`Im|XjEXT6lI8Hz-d
zqX^}M)={%GG;$twM`&6H`wUvMazlAT`ZZ6o86;VY2+>=XvVN=rJR_Fen@jPguf=e=
zf*|fMS-0Yd#0-9vBvwe?lvu?Ue3V#&pG771p`G<htdo6=BAF(*9d@$>W(eVe#DdOs
ziB%lJEr~URSWsdgIO~*HC;J)n!bSm?;2?(~WKpCwY)2Y9NG4#Qi{1`LilQ!4#4ueJ
z=_1RaJTY37lOr?&^xB0>PHre$<lECbc*5w~#Z&g>-0-l)du^v+J617gQ`|W>ExnW&
zLpK>6D=pkH!rpDV&Y~+FVwZ6_#fcTi9_qg;<9WIXC*1C>0H!@sG;L=n!xM3X@8Pw{
zNa>CxVuI{4hz$}62cy!>sl1pV?n*%mgBfR(V!2^-#SO#Y%cv=Lf!D+GjrWMR<m#Fz
zOQYuMyju0f>h$6sWBRW)YGeDG|37G|C#vJ1^X2CSGy3qs7;CM2^h|t*hbwKUY+#kJ
zQrW0h)@oM+EHbU!sRq<Y|Ltl(i}=xUaj>&gS^|Nl5;b2K_u9fhdl(N^hS40xyH!v{
z#ci}D_Ac*RsF7*h5ey1rn>LrqvlC@jE`OaWtK~Iw=Ip0$re2<Zyn1%x>(u;2Q!qGp
zFH~Ax3iz?O<~RFpPYT&^W(toVQ!Gx0V2}Q<Pxh^pJO3EvwVOoa-0$6iLyfW8x*D#x
zyYDdh15Vb(h<^w@{Dmik_tBqV4aq3U#j{pijhZ-D16YL)M1D)piwsdj)I~wJu4i48
Kb(i?ti2fbzn(Yn%

diff --git a/layout/reftests/fonts/math/fraction-6.otf b/layout/reftests/fonts/math/fraction-6.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..7e1b982e99f36087cb48ce314dcc17f22e7a290e
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*|up+RidplmO-OdA?Y@4RkR+ou&5You@n(S*BF~f(hb`vt*1f{
z3K6^s7Ej_$Q3UZI61?ceN^g3!y(xNB8WoM->`s4Ds@AKsnfc!LJ8yPoC%ygsy{N|+
zR2V&`$?v^5^a=1a0eEMc{fUdYXoU1K>EXow{)39X>kXiX0CuAHcw2nUqtJE2ocw2#
zIV+D<>PtX<Otu5*ly&|`;#D8{o>AYKCWCTXZzlYidL*4IjMN&0P?M#hHfN3Gp&TQ~
z#Qge@l}mL-rgxJ*1}N=$d$>>;M<<{OJ{(Mh0@qGn&7NuK{(^c<6vI^Giye!lY_(7%
zq8vpir?jR8OI0K1F?WQfHL=g|k#b9!B>jdb*++D+IuWAR&1WsG0z4;{+?z}BreBER
zas@#=n73}lQHdG+C`zo5oRC<>7QB~OgP%nt_F*;alUOJF2t_hYa695=3Cs|}C5Z){
zn-Z%yjN1}x2(h5VK5*71u}=1L=z)zqM&TfXL8MWjHMAm$?Ihzc&`!I<k)Wt66p^LJ
zB3)!TlqW`uax#R5fF3(P>SPAf1>Tz6&f`XVCr{W{GTE%fdu%6fJ60iMQ``kNEjgbU
z#ZEFhR#Ld5guS2XIt#9Jh+WF%6eCs~d#Ep0#`AO$j=SAk0Ze<SVA{@LipOIH-@_Ls
zBc&@Ej|#FYAT~fG91Kf0r}AQgm@5S>45XZ4isgpU9y1Jsub`$p1zr!!9q$&q<m#Fz
zOQYuMyi)PT%FNsuWBPIjwYvSy{~t8f6O}P^V3`Fo`tZRRt6%i$nfMNmlp9cPX63L_
z-l&!vwd(=aGNatB1k{$kJC%Ue;z!-(fwp3C9t3KN)O=ywZwLdc!+5wRjM^~Xu7xTp
zZlfcycV*wg0-5R)!Jsg<X>+kOJ6>X?(%0#dT3Y|joc-|A)Jxx=teYMGI{kgTCK&v7
zKU7>-4EQm(=E;3`ri84zGlj>GX%?ePuv`DvH~U)39e<4S+62+Ku!1<+qpct4Sa0y~
z(i*O<V+ro4&S&)Ue>^3;kNyePlZ=p@yKBW$t%-XzfVF5s%WqkEks*qRxG3n>^{jJp
K(IftCME?bMi0%yl

diff --git a/layout/reftests/fonts/math/fraction-7.otf b/layout/reftests/fonts/math/fraction-7.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..a7e7a146cd939ed80141df331e0bde17050bad95
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vrW^Oszj|A%b>A7An7)-3fdmDut;fai=lW>bd9lzG~KX`Qax1)
zULtrC6i?z!Q3UZI61>=p6>oa9^`wY5rBTuN&+haQsamhj?#%!F&-rF|cD6sA?ne_Q
zpu*@eO@3#p_aoqI0r18&)2XwCSd{cC>5<fd^dUvx`wGy*06W@$q&>0bLHG(`PX3db
zf>p#SbqY`)lI>tFYn}d{dOk?LC)D@k$e<k8Hxd3sJ(??&#{C8%G>p*TFIeM6C<6qU
zm|q{Y3fa!Kx80;q07^&E9xK%*u^Z3?9}Xr$fy?PjCr>nYeMXZeis9vkXS<e4+5Au>
zq8vpi$F!D3OI;)9fIC9dTG%J}NV%>|lYZ5c>;salQH1D?3t7Kb0iF^|?#-om(=Wzw
zxq=YxEm+%dSYn0%$`UIiZ%C|S8{SE*A;6*%`>>h~O01K8oFbVfxb?YN0yBhhPGUjl
zn#3x4aZ_RqVHT3u2hQ3h*2#VfJ+M*41vtoK7&(+^4Lgv*PLc^2=%Ba5k)o)J6fr`V
zMY_mxC{K(Q<>U#C0zG!|f|DQ4mH3X#PM$D2cJq{dF+Vb5@gCbL+KyGq+Z1=kP0K7K
z#;})+j+GJa7-8==U1!Oa4zbI+oZ`faV;}Y9%6Ohm!U?x~D}ZT_mQ33j&hkXu;QRRE
zWTbS)5-~w`1;mDkgo82Z=2Tux5O<}Zg`uo7MzP#5I^u?5@D<dQyTI!a`Nq4%TXJ<x
zl%-K~bzZA^V{LYRk1>6@jauLS=Kl|x>WSI}l2~TJj6QrY#+sHqdM3WZzG^e7n^-lX
zR5z>D4ce6;Yn@eY*Me&6;H_FvYYm|B{7`$jya0j?Woo_%?lwn&)e+oZ6M;X1*K47Q
zirZ;R>|fcput=tUM=&UiZP{9`%uQBUrSfH_qE^;_HRs;{F!jo}N9*P$zs!7_YzT$E
z-VK-6m4gAyuX(!r)=MGl&P?G6V1~u%5bV<b^~t`Fa@QZDymo_VoLNC!(i7T754XLq
zui^TWzu;tjKBI^K{W0Ng`V*`t86`P?){3iM6X$9WYte$%-?H)|!xRy9QOK?9S?A@F
JOZ;s_{|QK#?hOC{

diff --git a/layout/reftests/fonts/math/fraction-8.otf b/layout/reftests/fonts/math/fraction-8.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..780c691a45a994c274f6e0eb492aa9b837fc9b71
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)FuT1mBHEQ3aEg{0fm7g`TmSVWDrSc(Tl*BF~f(+%4w)l;F~
zA_yJ?#glkbe1Lcm30~BL6^|aR;6V{QDNQRH|Jj{3NvT?|&hE_r{m=PkcXqaKV4x3;
z7>5d@*EIQ^mj}K8zE%M5OmiS{HXDtQULrl5*fX$C(bsMV^bo*~_8sYrH$MzrCd|oy
zGMTk<Sf;)J)JJ67n@(A$e<WV@lkX|@ZD}$n$MrRYzfzB+v-z=lgAnS5X{gUyV>u{?
z2{JLiK4N84+uA?uC4C%Fx^nhtzC3{~fF}5GFcAt|I`rV`iKd=!Xw*b8yjk^pbG4MM
z9*RViqX^}g)>^UDG;$txM`&6r`wAZ^*Of`quXvJuMmK8^A$r4n*1{^lGh)fTxfE~u
zN(`4P2;$znbt4W*%-}~sVuj=liB)XCM~OA~SwvzVma~3|b+V69B+~@9gKn0<3?ZD8
zSkSp9v5Nh;DY1qS3rg$*XPpx3WIu&o*vR1m9Aq$rH1f2Db|le3G7bY>^maHB6m^jz
zhUv0M7g-MFiP55*451OA*UnvVGDGP+Z%=mcxY4zRC+v%v;bDvS+D^`PtbE3%xHE2A
zay~JN9b|N@q;N+Gd$;L2^R9G=UCQMYBUT(csV`Q>^K2y?ce}R&nD$8Cw4I?8kH-wY
zlUF7qWotAZ6=at{Y>-Ge7?o~L<;4UsR|;AfOgW<z%MGI|W*7!vLQS~~ydIWsyhpqx
zSJy;Y8Z}qv<+3-H-_PwarZ2WpYun%a|3OndQ65J(7FjT(4<C%N#;Qlp#CLeG)P&L+
zRthVnwQ6aVb~(V>-Yd7u0ky6FRym-x`O$EGu(ME@2Z6c*HD4Hao5H~IFzz>pQ6I+J
z6;MURO|&I;E$v&Vkg44f3<_iG))$J?6Gc`m&P)~6;>uZb`qNKSFMfaAGCeUf^?jl)
z7@WNuDzp>=e$1_Ta`&w_Le`v_!sEvji_sz2qyOuZeJ$nYKSp`&2GKaPxGS)~O6m55
zwz`6=Yq+-V1-LqnFr$b6;|by2^e0$JGD33htQA+SCeGCWR-hGazh&=5hA1N9qM%#X
Nv(Cw?OZ;s_{{?8l?G69{

diff --git a/layout/reftests/fonts/math/fraction-9.otf b/layout/reftests/fonts/math/fraction-9.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..5a48ac68cd810f693e94355a542a47eb5209f743
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*|up+ZHZbjmO-Pog{0fmAJlr#!Ya~Oi=}u_bd9lzG~KX`Qau$5
zULtrC6i?zwMG?e<NbsTvDjq#rFQRzxqBN~&{APFBBvQ3ro!y!5eZTW&cXoDQXlMY9
zn1l+W&oue%=l!1nUn_vOra6>2osC9FFOeQj>>k>u=xetDdI(^L2M%?`o9~A%5$5DS
zp3GV~EK{EW>I1UvNvEun-xDte$@iH0)-)NEqxu@cU#LgY+5AMkK?rrDG}LFUi5!%J
z1eus$AG5NlZJqD;l0FG2-8p+aU!KBdKofj8m<R<f?7MaGSX1v;G-{$4UaxxESuJI&
zhawT>C_*`+wN@-OjhqMF5t`P@zQ9MyRplk=mp#cop@%hy5WQg`>(?s46Jp7|xfE~u
zN(`4P2;%O7bt4W)%-}~sVuj>2iB)XC2Z=TKSwvzVma{>Lb+S)TB+~@9em6^Ch7it3
zEa+U3SjB!^msmrH1ts=@vo48svY$X7Y~*kb4l)=)8hKhnJCf)i8Ha&xdOI8miaJjb
zqjXuMi!6uo#As1YhR_($XXnm2nUQp!w<kMz-00rS6ZZMc=%~f}Y$s<sRz71>+$lFL
zxsVveb}~9vQn;gpz1wu1c~?5bF6DBH5i5=z)E6t`dA1OayWLv>OnWSE+RjLd$72TH
z!7G!IvLzai3bIQeHcTWOj7vAC@?wIRD+MhKr<`$$<%ZE6GYo?-p{CpgUJuJR-Yedc
zt81bxjhd_Ta@iZp@8<Uy(-+&Qwe4^I|DdU!C{LmXi!7MYhY!YBW7VT);ydgwHKDYI
zmBLDCty)^8T?(+acgoFjKy4emQ4VNrel(mN?kW@(K%lNb%@@X<rZBKPjC;*t)Q9n=
z1*)jHiMGVfrF{z(GPOH`L1Ap&`a*GLs>q7P+3BKMTsddXeEebR#cvN+%uLNrf19cc
z2IuaC3M&c$Kjzo`a@UR5Le`v_!sEv@i_sz2tN-hheI;e*AEUf>jcA<ub4Xx64Lu&#
zR#$L!4cFH53$BhM%;@2Ne?)i}{Rvi*jF6l^YsFQoiE}l87PO-6x757I5Jf~>6m;u)
N)_GZViNB5LKLJD4?G69{

diff --git a/layout/reftests/fonts/math/generate.py b/layout/reftests/fonts/math/generate.py
--- a/layout/reftests/fonts/math/generate.py
+++ b/layout/reftests/fonts/math/generate.py
@@ -223,8 +223,149 @@ for i in [1, 2, 6, 8, 10]:
     p.lineTo(0, s)
     p.closePath();
     g.width = s
 
 f[largeop[0]].verticalVariants = "L7 L8 L9"
 f[largeop[1]].verticalVariants = "L8"
 
 saveMathFont(f)
+
+################################################################################
+# Testing AxisHeight
+f = newMathFont("axis-height-1")
+f.math.AxisHeight = 0
+g = f.createChar(ord("+"))
+p = g.glyphPen()
+p.moveTo(0, 0)
+p.lineTo(em, 0)
+p.lineTo(em, em)
+p.lineTo(0, em)
+p.closePath();
+saveMathFont(f)
+
+f = newMathFont("axis-height-2")
+f.math.AxisHeight = 20 * em
+g = f.createChar(ord("+"))
+p = g.glyphPen()
+p.moveTo(0, 0)
+p.lineTo(em, 0)
+p.lineTo(em, em)
+p.lineTo(0, em)
+p.closePath();
+saveMathFont(f)
+
+################################################################################
+# Testing Fraction Parameters
+f = newMathFont("fraction-1")
+f.math.FractionRuleThickness = 20 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-2")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 9.5 * em
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-3")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 9.5 * em
+saveMathFont(f)
+
+f = newMathFont("fraction-4")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 3 * em
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-5")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 3 * em
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-6")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 9.5 * em
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-7")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 9.5 * em
+saveMathFont(f)
+
+f = newMathFont("fraction-8")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 3 * em
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-9")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 3 * em
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+################################################################################
+# Testing Stack Parameters
+f = newMathFont("stack-1")
+f.math.StackTopShiftUp = 0
+f.math.StackBottomShiftDown = 0
+f.math.StackGapMin = 20 * em
+saveMathFont(f)
+
+f = newMathFont("stack-2")
+f.math.StackTopShiftUp = 3 * em
+f.math.StackBottomShiftDown = 0
+f.math.StackGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-3")
+f.math.StackTopShiftUp = 0
+f.math.StackBottomShiftDown = 3 * em
+f.math.StackGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-4")
+f.math.StackTopDisplayStyleShiftUp = 0
+f.math.StackBottomDisplayStyleShiftDown = 0
+f.math.StackDisplayStyleGapMin = 20 * em
+saveMathFont(f)
+
+f = newMathFont("stack-5")
+f.math.StackTopDisplayStyleShiftUp = 3 * em
+f.math.StackBottomDisplayStyleShiftDown = 0
+f.math.StackDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-6")
+f.math.StackTopDisplayStyleShiftUp = 0
+f.math.StackBottomDisplayStyleShiftDown = 3 * em
+f.math.StackDisplayStyleGapMin = 0
+saveMathFont(f)
diff --git a/layout/reftests/fonts/math/stack-1.otf b/layout/reftests/fonts/math/stack-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6c365555d3e41a4c78c4d8c933e2c51206b4a9fe
GIT binary patch
literal 1864
zc%0o;O-vI(6#iy+yDd<P8dMT0nP}r*(z+Be5g}1As|P9&32LIz4OUvEY_n7&oJfeL
zYSehrBN|Ue<Hdt9jTgO$dNCSrc+==nrT*48yHjk9_;dA5XWsYTyubO`Y45;5FX}J}
z6-Kvd^8GWL`vC17fM=#TkT{l!MgZRo$>GGdfnADz=q$;v0Jg7p&xZKoTa9N3bDBRq
zl(Dj?S04cCdD3l9C9NZ06A$}o?k@FBDN-m0^=85%ek7I2oeCI);NMC^AY+}%LZS3v
zO*H7ERwj8fYJVVk5>V>1_E@eog^g6-Q<~>s!juAU>3Dvqq4PcJG!YC>mfv4r$t4A#
zNJKu05DsWfKQvWDlYQ<8O>1KB;3MIZB6i`N$JraSu^M5b*UWqU90j;XRdO$v;-&v#
z!{rJ>xG}F?jolJ6_;Ffdh4=-DRjkAdi8c6HP+}hzu}u=|q~A-HOcS;BxLyJ?%5_3w
zQO;S3RqVh;i8ZqMBC!vgHA<`_#CD<^HnJFpgEWSbLXOt37DHG^JPre`bUGXfvYH@^
z5o#96!pk8)F<Ru4CNv6k+u3m^J)Fw%wL|N8+-Tj%6ZS-UWW?g#wv)9TE0?y(Zj4+k
zN^%@gN`SGPHFP{m!26kQu$;>sDk|xg5~E@`I;dBBd%AYQakqOV!?Z_prtJ(Tc|2zD
z4lZ*LYLCXFqO^s}7^IXA&3dci6jB6@xm*;1!K5=r3*m;*8Z!)oFC0pqu-C)#G&{u!
zxUwdq(WtpHFO|Hp^s;<^nEtCvSWSPL{|`v@SZNY%_{D-5ebiu#1<L!*#0S<>Y(TM@
z6~jt#g<4#$oe8p*m&(;rP;Kd-E(NugTGX5z+>p=DgP=c8<O}0ULl{^T#<j&^1j2Z{
z1geO*hAu(--(7N9NySBAP#9aeDqonJDzHM~<7`1KEc;~6z5ZtEh0nK_&P{!s{XFFl
zg+5(x%rDIcYvt02X1b=I2wwFLikVu>vKT#Vo%+A-=p)J3|JKT-{<l=d(Z7f(&gQb@
zWn8A8^=%cs!k^K;f4xJvi(dC-#3RJZ@26<hQiOUCOVEUt1*`Hb8_6Q#qL3Tc)0TNf
J6aOHhe+O!c;TZq`

diff --git a/layout/reftests/fonts/math/stack-2.otf b/layout/reftests/fonts/math/stack-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..d0d12474cd499b7a5c21effb9aa7e31d5f62846d
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq@`AeblyMEJF>xAn7)>1*L*oSw)PkSgMGkON>pl>Beo8>ZwpX
zMN#pjM-@*Z=)r?X5J4|my@=qg-W0D&Q(y6)-APT<qF$ZJ%>VuGe;zyO8yM)rJd8ty
z(QBG~|K$4Jfc62vE7KfE9Lq){fbSXc;l$>F?TWtiJ@Ib=wy$qbdwk)Y#&d)@=?^Ef
zRu1#kCxCj9WLwfH>&Vx{Q;LTNG`iCyP!8(L2#ffUbT&U0FbKiFiKal-8p}cHC&*f8
z(nqXp>Tdgq8REwQWq!^c&6g*zj_P|!dJZN`fmqk0#fKVtK4P9Gg5gE;<F(aPwg41~
z$VU;(0j=eSq^6Ow-<_dpE$jn)#9UFtE?n>^dyh_5CrtFZS+Ad?01v53?&VUv^gnF4
zTtNu8XQeB#OJW8;&PuEhy(F=UHoTTtgP#Q@_F)0*mRKkGUb1AGsBNd~B`~90CnXl;
zoR?U|R$P`?BbzT0`@mVF#5zK38+u_QhtqJ7!4T5O(;8MIi8VyyFwjA#!;v7XGh{JL
z-6CFiIpim1i+nPKMu1*BciPDerSp7sat)6g9qV|)K9d<9ws^1Y<ZQ>vXKb<?B^Qg5
z97mLrU^H(fk4Fi3Khq7Ccd0`~rQA|tR1C)k8nxb@tjopG*^*(}BYD$yhEhBpGx!EB
za}er^#-pONxyu-&ln!aVRdEU_g2r4biojsX8Ks4A!{~?^hQa3!B~REJVR@Q8;sjh?
z6VYhaT%MQ9-duiDxj#(*-6gDTf71U4P4!559G&>hf*F0(V2lMS`_9A%wzJfL(lS;G
zE2ZUXsaZQ0WUX(M8|9$dy8Bu=sI}Ik?$ls=p)d=A{sJ{$7}p!Zz=AMtE({|O#`8r`
zMZ{Hf3A+C7lFLe}E&_wXSlfz1aeAW2ip80!qFQYFWKO^PX6nVy_m)gg%uIcr@P|U5
zZZ#H`6oU0~Y1E!=y!JxSns-oW>M_M)^sx2l|GJ}-lCJ$#72NTwj2-=pnBr`%N?O5{
z_OraRYE=0%+V`*b32&s=y@_aqXyyGBy_Sp62x1Xh&^l*To@FChL|hbd<9gBxt?J?*
GM2zp_cHkNS

diff --git a/layout/reftests/fonts/math/stack-3.otf b/layout/reftests/fonts/math/stack-3.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..a81e9e41585809237f7b03387544714440b263c7
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq{^Ss?=I(EQ1DLkaU~2g3^LoSw)QXQL3P#ON~uz(+%4w>ZwpX
zrJ~|Vk5xR0;6V=}!HZt3^&*0|dQ*B;n)-_W>`rQ;7WL{snfbr}IsZI%(%aY9i#m)!
zh0$Z0{OI(SgMjt{z-!a&OPt9>BY<y;<Zxnp-)==;HB0h4fF0>Q)EZxQzhQzfC;Q2P
zjFrU_^%<aECEbox(mM4u@%#YU9#h|(B875XZze4AM^c&G`G7$P{%te_GS>Mll>G!*
z6Ak)^l}SEm8~sA^7@#c4+M~JBI6A1lS7hg4!WCH8TBtiw-}Mo7nn;G1E1zzv<dOnV
zB%&Ba2*<RhADSv6<9>I9rZuq-@R4vs5xa23<7^h~tVX!#H49NcX91p2mE4<4@uvUb
z!{rJ>xVNBPhkX(=_;E>Mh4?jzRjk1qi8c6HP+}jJvdt3fq(4laOcS;3b)y7kG}l>)
zMLCxxR<RS;CDzF2i^M)~)*!Kt5Zi?w*vR4n9HcRb6mqnN4H&>i;&B*gqtoF?kk>`>
z7^Y^CETSBW6Qe~jX+k4FkDa~Xqz6+uzF}Y^j~i_rJYio<4-Z?s$9A%|W98B|`HfPD
zMUxC6igprn*1%AdfcG=qWI2~RR8-O}B}T<?Y^7cu?dduR$KCFg4AUOTnYJ^S<nfrn
zw{kfLq0VSLDoR_tjDDKZA*;74PANswn9D^G=ubMMv=D9>Z85_z_~NPL341*(PqRy$
zfGcYv8;zPP^HRwhOK;2fhv~n&gw^yX`+q>H$4X;jbAMehqmLSlu|Rp>nfSo=7VA-L
zX2q~lT&)&YY7;@$@>aQB3aTv!CQCuBr4}{k`djn)1rYS-iF{$)st*H8!??37j6fLE
z%b|*l>**47{@o>)l~h~=28FRTYx9M<@d7Ip=4T3Oq4ASB_x_uy7d}5+F*iOx^LgAK
z3VpiUkYAAx*2<+3O?6Mc6ujyk6qZ`duoyjTUHZT7=nKg=E$$NBQ?bLR|01VY=1s}V
zxJ*Cm+beoSJfnU8`iO8hz3z>~BgD(^r)bqugnAIm(S(*otMWV>$RpySkek=jmU%@J
I{~)4&2fw=D8UO$Q

diff --git a/layout/reftests/fonts/math/stack-4.otf b/layout/reftests/fonts/math/stack-4.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..c9f1ca9287deb0cd2ed98b62266d1d1461080d82
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq@{3s<c`#hCzecLgF^D1*HYGvU)JqVyPZ{Ej2XJrW>}YsHZ~l
zl!}TcJ*s#T!HbAU(1Tul^df?{dQ<eMG(O`$yOWwo>*MN7{`tTEIsZI%(my!Zk0qFd
z3Zu_7`N5gZ`vC0&fS0B@m^z+|MFHPalEbNOgS!;{@I#W{0PH~jzKw}xw_BzObFv>D
z&RKahsgD8m0_nDA($=wWsV4(uyHC`eA%${CUqx8tk7ja(Qvrhz{99=V<g8P9D0>OA
zHX8IXE0?~ToT!jI2`Ei@d%RGY!X~Qk1=%^6a0Mdm#{MJCJs+_|6Ui{M@=-@Emn{HA
zB8pLja8PUesi|vZ-0P0ev^MquJ`ye~Vi(SPoV`PmH3%2IVLs~DEWiV*l6!M0-t<3x
zxLiR9x8}9$ut#DBKh8?55Wgs~iZys8u?9a2O6<c@)-AD4`u*g|G*R1bH%eeeb4^Gr
z$~h;oiXFHlu|_^$CH8@{7KwF)*iQ7pMjof(Ad3-XP@pwzz%bg0Ct#qHPKP5!UT4T-
zl)6Q-h;k@Sj26XY35@}LcK)=J9my2<hT(ReFgiE!lzk>UI%@Gg+sWIGRmj@pH%=iI
zO>zP;arol}YxqQrfcG=qWCfQyR8-n6B~Ha~Y$2+T_H<o@6E1lr!?ec=rtOTRc_MD`
zEnLn)s4JF;iP9D?V~D17$m*?%Q%aFE?s8EChSJVBErc6JXWTFhzIZBm!XAa?Y4(T{
zaAi$oqfv8ZUa5Fv<#qM`Fnys*Sl|9+{|}n#vC1TpSYW}7K58(=0@ZzI;se`VZbo?(
zD~FZxYPGyln+~$bYvp<+s73~^R)Sij5e+AYHWrKXAm}er^M!G(ISecf<HoWu0%1H~
z4pn4aPnV$U?=HElq~;<pD2%OHTP)2@l~}3tX||-6R(v++-hMar(w94}b5oyYzfAc<
zq0cv4imk<9qg)!br@dEa1h0Dsg{2X*EKUzwkN&Sa`b_eU-+FoN3NY~gFZ`08ugj~r
zCP$q<Swl7PjQ0K8J;J^8y00J}C0>0$MX#5lL_sV^8zPHV<$1P{N7O|jH?OCy@|rIG
HK?MB(2AAO(

diff --git a/layout/reftests/fonts/math/stack-5.otf b/layout/reftests/fonts/math/stack-5.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..f1ad7e1d10ba4e631aa940a7d1039a84541e30a7
GIT binary patch
literal 1864
zc%0o;O=uHA6#iy+vq@`AwbWWM)<J{XLgF?tf>J@PtRlu*4Ap~0ml~RA(+%4w)l;E(
zilX94k1C!-@S>m+yy(UHa}dE>dsDnBjlc2D?zAS-qF$ZJ%=_N&yf-sD=}o75u?XW(
zVf2_LA9%GT4QL+$yfMvm>O?*o0eq9hhf_P!dlY@eYU1Ak>~QbFjq#;-Th0^aq(3&8
zw+dLSJ_XcEB-@$ISjWGop7oLL5sl4R5-0=uO2Q(3B%3de1q?#)Z>K4cx5f%k4iIE*
zH0dK&KJzd+rVu|4D2ogBXt6qhO_bkj(sM9j3bd}hf8}UX_a`jUL@>Nu{-m>($`*hk
z5&0;BIij`wlGHU)9&l%9S{wTaA2C-Iu?rVH%03{$8ia}7Fz5Aq6yPys$-T7{Z~0#~
zTviamojK_`?3b9qk8=_$L@!IMVh!F(tijKM68o@(ZI)Ok`604on#gUR>m@LwwN6Pa
z(zzh9ie0!Ou|_uEB=&)`7KwF)*lzT|MgeEwAcrAjQKT9+U=STd<1o-gr^AsVtFvS=
zOx+@0csb-JW{Z4sghqfKyKu(I4P}db!(a!G8(o`t%08PL9=3Ro?G$XsD&}mm8zmQu
z7CDJ1lEfCR!IMz}-p_P{6<z93QW-au7$w88l}5d{Crc8JyTeNvrae+LZD%OM<1vG8
z<#G)|$!I((Qd>BUep=EYtydMNkRoWzr6LLRXPi+ggd0Xz%rFeTa431g-U!Rn>=q~B
z@|uW7v*z-=TJ`4Y^z8j%`h1tLzWqu6A2ih?)o~;+Pr-~nYB0tEv-{4(2ez-$gvv@*
z2`iOVYGt{0KFHdqm7CR|+TM4)8r0ew(QvwdW2rO;g8mXUUl=!<!oZR+ZY>QX5XOsU
zs3PKex&+C;yW}#Hnv1}oFt%oGsXQ}LX65qdsj^yb{bJ6%|6%IoulJVCOnjdDI^hq6
zzT9ppEh_~ZWogtVw_SfJXx%#~G>w>IF?!g#^?%*b=aP2LuMY05VXpmU%!IT})Zp3}
ziFs@i_5O_Z{rdyL+vs&~B^n_*`+kaE&qZhi(Tp~<FPN2Q*+Lc(7lquoo^+Phbny=&
F#!pc2-x~k`

diff --git a/layout/reftests/fonts/math/stack-6.otf b/layout/reftests/fonts/math/stack-6.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..bbae9bc9197b6974bd47852c48478758a931e54e
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq@`AtF*OZtb+z$kaU~aic&$XtRjt7tkr|BrG_T9>4t3-?Ws^a
zMN#pjM-@*Zh~Pmac+rb51QEQ|o8nbz>MQ=UJE@6SA6IAc&;R|;`RB2dzW)9`%)<m!
z7(J%R55L&3570gUcx9UX$>Z5*1n@l}Ih@?mzeCX%FC+Oazz+27ZI3Uw-E@{PC;QRC
ztd+xj^%0<6Al=q<$~yKn`FIc6?h|#TNueClmk<{DBk64ZRKOqv|7IEjS?g2|%5H+J
zl?Hv(%BG6z$9*JE0LuKFJ(e#|Vjb1@lI$EzxB{W2cM3-ux<6u`CX(U#qK9j%xoiO_
z5>bpIgo9e^4^2%Y<8F6^rnRyUpc<6Rir9to9%t{7V0FSpubYkfIScTBs^s2WiZ}fa
zA1+rA!mU~DO6-!D!H+W%E5t8KtYSG{ORT}qf)e}C$hsufNxz>wnI>xMb)y7kG}j4<
zMLFjrR<RA2B-Y61i^M)~)+Dix5ZjI(*vR2D9Aq$rH1f2D)fmJY;&B-0pwr<<lGiwS
zj8L~o7EunxiP55%453k=$IhL0GDGP+Up=^n$BmA4JZX<-Mn){&V>>z9vGN(4{KhE6
zqDh7kMHh*AYj8M9!26kQvb@V3Dk|lc5~E@`HWJlFd%8}-ahJT3VcMg4({_eZJRURn
zMlR<d)ESLOMQL-FF+fu~Wc60XDWymnbGax211V>W7QzjqBW4%|pF5R2VUNP{G`qzK
zxUwd)(WtpHFPFWs{HAh$nEtCvSlj+&{|}n#vGN2G_{D-5ebiu#1uFZ_#0S<}YCvfT
zD}|NPQnj>5I~!zeZ<OohpxU<QYB{L2)uZm@KzpGu3xfUvHD4Il8p1$h7&jJ#5eVbi
zLZ~9+D!K%ne|O1cB~=%JL1Aq9ib8REvdD_XnW>^$Z24qPzx!tD#m{$}rzdBoK2Q2X
zp-(rP3eAOJy<8f#C!4N57rf>j6qb5Su^2sU-TJ@o=u^qp{?-e@oitqe%bW@6o2bH-
z_Om`wMOE>P_WkQU!kg%IZy_EbUU@%7uazQ1K`cZo+UBgv^K2rIh>JpQUQb)$RbBjp
G2>K2!G~XKl

diff --git a/layout/reftests/fonts/math/stretchy.otf b/layout/reftests/fonts/math/stretchy.otf
index b019fe3dc4ce5ceaabe4514b867d2520d7bebc97..bae226837d3ef1a5a1ac7e548b25979a932e0d43
GIT binary patch
literal 3236
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

diff --git a/layout/reftests/mathml/opentype-axis-height.html b/layout/reftests/mathml/opentype-axis-height.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-axis-height.html
@@ -0,0 +1,48 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - axis-height</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: axis-height-1;
+        src: url(../fonts/math/axis-height-1.otf);
+      }
+      @font-face {
+        font-family: axis-height-2;
+        src: url(../fonts/math/axis-height-2.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+        assert(almostEqual(getBox("plus1").top - getBox("plus2").top, 10 * 20),
+              "Bad AxisHeight");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math style="font-family: axis-height-1;">
+        <mo id="plus1">+</mo>
+      </math>
+      <math style="font-family: axis-height-2;">
+        <mo id="plus2">+</mo>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/opentype-fraction.html b/layout/reftests/mathml/opentype-fraction.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-fraction.html
@@ -0,0 +1,177 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - fraction</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: fraction-1;
+        src: url(../fonts/math/fraction-1.otf);
+      }
+      @font-face {
+        font-family: fraction-2;
+        src: url(../fonts/math/fraction-2.otf);
+      }
+      @font-face {
+        font-family: fraction-3;
+        src: url(../fonts/math/fraction-3.otf);
+      }
+      @font-face {
+        font-family: fraction-4;
+        src: url(../fonts/math/fraction-4.otf);
+      }
+      @font-face {
+        font-family: fraction-5;
+        src: url(../fonts/math/fraction-5.otf);
+      }
+      @font-face {
+        font-family: fraction-6;
+        src: url(../fonts/math/fraction-6.otf);
+      }
+      @font-face {
+        font-family: fraction-7;
+        src: url(../fonts/math/fraction-7.otf);
+      }
+      @font-face {
+        font-family: fraction-8;
+        src: url(../fonts/math/fraction-8.otf);
+      }
+      @font-face {
+        font-family: fraction-9;
+        src: url(../fonts/math/fraction-9.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+
+        /* inline style */
+        var ref = getBox("ref").height;
+
+        assert(almostEqual(getBox("d1").top - getBox("n1").bottom, ref * 20),
+               "Bad FractionRuleThickness");
+                                                            
+        assert(almostEqual(getBox("n1").top, getBox("n2").top) &&
+               almostEqual(getBox("d2").top - getBox("n2").bottom, ref * 10.5),
+               "Bad FractionNumeratorGapMin");
+
+        assert(almostEqual(getBox("d1").bottom, getBox("d3").bottom) &&
+               almostEqual(getBox("d3").top - getBox("n3").bottom, ref * 10.5),
+               "Bad FractionDenominatorGapMin");
+
+        assert(almostEqual(getBox("ref").top - getBox("n4").top, ref*3),
+               "Bad FractionNumeratorShiftUp");
+
+        assert(almostEqual(getBox("d5").bottom - getBox("ref").bottom, ref*3),
+               "Bad FractionDenominatorShiftDown");
+
+        /* display style */
+        ref = getBox("dref").height;
+
+        assert(almostEqual(getBox("dd1").top - getBox("dn1").bottom, ref * 20),
+               "Bad FractionRuleThickness");
+
+        assert(almostEqual(getBox("dn1").top, getBox("n6").top) &&
+               almostEqual(getBox("d6").top - getBox("n6").bottom, ref * 10.5),
+               "Bad FractionNumeratorDisplayStyleGapMin");
+
+        assert(almostEqual(getBox("dd1").bottom, getBox("d7").bottom) &&
+               almostEqual(getBox("d7").top - getBox("n7").bottom, ref * 10.5),
+               "Bad FractionDenominatorDisplayStyleGapMin");
+
+        assert(almostEqual(getBox("dref").top - getBox("n8").top, ref*3),
+               "Bad FractionNumeratorDisplayStyleShiftUp");
+
+        assert(almostEqual(getBox("d9").bottom - getBox("dref").bottom, ref*3),
+               "Bad FractionDenominatorDisplayStyleShiftDown");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math>
+        <mspace id="ref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math style="font-family: fraction-1;">
+        <mfrac>
+          <mspace id="n1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-2;">
+        <mfrac>
+          <mspace id="n2" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d2" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-3;">
+        <mfrac>
+          <mspace id="n3" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d3" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-4;">
+        <mfrac>
+          <mspace id="n4" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d4" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-5;">
+        <mfrac>
+          <mspace id="n5" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d5" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+    <p>
+      <math displaystyle="true">
+        <mspace id="dref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-1;">
+        <mfrac>
+          <mspace id="dn1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="dd1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-6;">
+        <mfrac>
+          <mspace id="n6" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d6" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-7;">
+        <mfrac>
+          <mspace id="n7" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d7" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-8;">
+        <mfrac>
+          <mspace id="n8" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d8" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-9;">
+        <mfrac>
+          <mspace id="n9" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d9" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/opentype-stack.html b/layout/reftests/mathml/opentype-stack.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-stack.html
@@ -0,0 +1,125 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - stack</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: stack-1;
+        src: url(../fonts/math/stack-1.otf);
+      }
+      @font-face {
+        font-family: stack-2;
+        src: url(../fonts/math/stack-2.otf);
+      }
+      @font-face {
+        font-family: stack-3;
+        src: url(../fonts/math/stack-3.otf);
+      }
+      @font-face {
+        font-family: stack-4;
+        src: url(../fonts/math/stack-4.otf);
+      }
+      @font-face {
+        font-family: stack-5;
+        src: url(../fonts/math/stack-5.otf);
+      }
+      @font-face {
+        font-family: stack-6;
+        src: url(../fonts/math/stack-6.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+
+        /* inline style */
+        var ref = getBox("ref").height;
+
+        assert(almostEqual(getBox("d1").top - getBox("n1").bottom, ref * 20),
+               "Bad StackGapMin");
+                                                            
+        assert(almostEqual(getBox("ref").top - getBox("n2").top, ref*3),
+               "Bad StackTopShiftMin");
+
+        assert(almostEqual(getBox("d3").bottom - getBox("ref").bottom, ref*3),
+               "Bad StackBottomShiftDown");
+
+        /* display style */
+        ref = getBox("ref").height;
+
+        assert(almostEqual(getBox("d4").top - getBox("n4").bottom, ref * 20),
+               "Bad StackGapDisplayStyleMin");
+                                                            
+        assert(almostEqual(getBox("dref").top - getBox("n5").top, ref*3),
+               "Bad StackTopDisplayStyleShiftMin");
+
+        assert(almostEqual(getBox("d6").bottom - getBox("dref").bottom, ref*3),
+               "Bad StackDisplayStyleBottomShiftDown");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math>
+        <mspace id="ref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math style="font-family: stack-1;">
+        <mfrac linethickness="0">
+          <mspace id="n1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: stack-2;">
+        <mfrac linethickness="0">
+          <mspace id="n2" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d2" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: stack-3;">
+        <mfrac linethickness="0">
+          <mspace id="n3" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d3" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+    <p>
+      <math displaystyle="true">
+        <mspace id="dref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math displaystyle="true" style="font-family: stack-4;">
+        <mfrac linethickness="0">
+          <mspace id="n4" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d4" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: stack-5;">
+        <mfrac linethickness="0">
+          <mspace id="n5" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d5" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: stack-6;">
+        <mfrac linethickness="0">
+          <mspace id="n6" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d6" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/reftest.list b/layout/reftests/mathml/reftest.list
--- a/layout/reftests/mathml/reftest.list
+++ b/layout/reftests/mathml/reftest.list
@@ -144,16 +144,19 @@ skip-if(B2G) == maction-dynamic-1.html m
 skip-if(B2G) == maction-dynamic-3.html maction-dynamic-3-ref.html # bug 773482
 == whitespace-trim-1.html whitespace-trim-1-ref.html
 == whitespace-trim-2.html whitespace-trim-2-ref.html
 == whitespace-trim-3.html whitespace-trim-3-ref.html
 fails == whitespace-trim-4.html whitespace-trim-4-ref.html # Bug 787215
 == whitespace-trim-5.html whitespace-trim-5-ref.html
 == operator-1.xhtml operator-1-ref.xhtml
 == opentype-stretchy.html opentype-stretchy-ref.html
+== opentype-axis-height.html data:text/html,<body>Pass
+== opentype-fraction.html data:text/html,<body>Pass
+== opentype-stack.html data:text/html,<body>Pass
 == scriptshift-1.xhtml scriptshift-1-ref.xhtml
 == number-size-1.xhtml number-size-1-ref.xhtml
 == multiscripts-1.html multiscripts-1-ref.html
 == mathml-mmultiscript-base.html mathml-mmultiscript-base-ref.html
 == mathml-mmultiscript-mprescript.html mathml-mmultiscript-mprescript-ref.html
 != menclose-1.html menclose-1-ref.html
 == mmultiscript-align.html mmultiscript-align-ref.html
 == subscript-italic-correction.html subscript-italic-correction-ref.html
