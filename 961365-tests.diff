# HG changeset patch
# Parent 9a252dba2debbfcd8eddb710e18df6feb9a1cbff
# User Frédéric Wang <fred.wang@free.fr>
Part 6 - Reftests. r=karl, b=961365

diff --git a/layout/reftests/fonts/math/fraction-1.otf b/layout/reftests/fonts/math/fraction-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..df350179e75443f533bd531649dc7a236dd9bc99
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)Fuszfas>!9@sO}DA_Q0qY}i-@r;mLlS7jcF5Ux?vk7_EhLG
z1;K-0@l+H9MG?h=NbuyT(u?TP77r?VR2mhH|Ljg5k&5x^Y-axNf6g~Mvy-mg-Y(Q)
z6e^5P)8u!a9efA)>H)kl&ED9Bv_D6Bk@RqEfA1khKYaqwLjXJ8b*wqM>Op9nFem@n
zc-qQfh58&&ACc`qGGU$n5xaehd{3$GNs>W1rEehonR;U~oy}Dngitj|Lv`B9WuSBu
zWMY1O$Vw-g*T33C`Y52ZWbEN=X$-poP4MAhA{4lqd)s}cuHy@8HBk)H>mI&bDrKvN
zA`#^%LOH3`FIvhPIlJ8vnpV#~!$-<>Ws3AGo@5`<%4$T2UbB$(dlldrvE<%diZ}gY
z43{ei;@*OF8;(lM;749!h2(_9Dz@Ui#2WmpQDPrfvL1<bvgat0X@c7kH%nlK5H3nA
z=v<Rn#bMl#SVM>fCH8@{W{GvOpF<~XWN;Y{QW!uISz5ym#IciP6b4#ocQ|4cH9`@C
z^jM^eEQj*MXi-jz&=AmRXD&Obfn=8Ni0|Z4qh&Xb*(0gJL5p|VPR4euY|5s%em5<?
zkk~}ipx?3L!resJ`<bpY>q>{%C0tGsV#U!;eYrB8r;Tvb?cNGt+Cy2>b_NnW8Zme~
zU!07Twx(#4AX@>kJ|f{@Sh_it7ZXHWDQKZD;S5tOH;k5uVHmuEn(`EQJuG*;L+p~P
zYoaWTnyd3t$s0?v^Jk3d%N^A6_Ba23&{R*9M$w987R>0w2V<;u$*X7LJ3LaXLvaHu
zhLz$*wYW|j53q(=<z^|MHuOxE0$PI~HJAFD^Z5l3sLE6Gg>kno46F>}{;Dvl!+5<K
zs;Ib~c6e`P-@+o9@)N<JFt&M1zA!gdV1>fhnSxqa`^}vD@YB=_-yg4;8~Zx*eXJ@N
z{B}2#Uy~2`F~8=ieUsBdmfe}c<Hrn(&?VTR|LdE5A?2<LVkd}3f90inJ}qCv-NV-3
zaO;v7!i--2k0*rp(Lcdjl8q$i?^^McYvNuFU^VK|@JBjcWQZafT@-Zdde(Wl<PrZi
GqW=N~67UNE

diff --git a/layout/reftests/fonts/math/fraction-2.otf b/layout/reftests/fonts/math/fraction-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..2ddf3577711453dcd894342e6b9bb320346e99e8
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)Fuszj~0mO-OdA?Y?%5v>O;E+WP%mf}ItHKt9Z>4t5T>Z#CU
z1U(6gCs7a-A1EF~f?hmTya;-;-Yi}#jf%#9cBgqr#d>u%GynHL=bN3`N&mn=KUy&X
z6=t7h@w+egeF6gQ06tjOK=N!ZI8J(*bR)TEV85d8xCQ7DfF0{U+Lc)LC~}D~C;zEb
z&dy_r`U+5=kZo@!ZJ+s(ymOm;&#7<EkU=@2uOU23J(|fC#+yw-Xd0oRIcJaOp&Ta2
z#QgfGolBd>`zYxXfYP0J#tM~5Yy~vIhl7bw;L2F%!;@{jU(l+FVtBLa@!NVSTQd}i
zC`S>>ajm^(X=vm;?2XX0b~cLuDc6)K(l7gxeMS#!5g~d@HS6~(zzbr@{kar>`dSQ^
zD+uF$)w&UfBxVSrD6vBFy2L6r;FH7}f-EX=087~siFLA%QzX*_w}W1mzzh+blUUHX
zDzS<KxFNBI2n$Ob0B2ni>tsKTJ~+tZ0$gM<j0_62hEAlgnPdVcx@mVfk`#53B1Y)3
zNf%iz<%!XzoGhVHpwG!)aI?di0`E+1<_WWVD^EHXvm+xm?{nO|<JyI+Lvcf1TB@2D
zqp2|D+9~0V5%zzU=PY>AC3b0#Q=C|F?4-U>8Q-(b!?EfLU^$}&%W;R(JP|kfPF|ag
zlx?v@Opsj!u|Xo?VobU@l@}AlJt=5mFzt>}EH};WxM`Yv5jEv0@Vg;*yjSd!r)#1t
zjhd(PO2r>5ALq{)(-%6ZjqPv#|DdV9s7#;-3oMw?hY!YBYu&47;yXN8ZbNwuD;r9A
zty*5CT?(;|kIJn|NbNXsvl7xef@nEE*i|f6L8z%nEnwhYn*l5}@L-vNW&`h*LlqS_
z(UI7-xNo6Grtw5DD2%OJUo6c{mRPCub-JXMR(`YQW`0_F>HE_abCX}EzfU%W!{6>j
ziYtntAm-ORwfp89Asg;Y;R#}z#px34)&KR)zLs*!B4V!-jiJAXZJhCAwbiw}`WoII
z_WXu>>S72pdig(|5#CMz1S?5KNzUK3;%U^xy&A%Dw4>vXwEV~jMMOOm_Uii9d0F>}
Ie;d(%0qjEY3IG5A

diff --git a/layout/reftests/fonts/math/fraction-3.otf b/layout/reftests/fonts/math/fraction-3.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..2260f37395ec67e6b9c87db01d0aa33382133c21
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*|up+t3<6B!=Ux2LeouZMQVG{!Xjd<VksUJU1Qornr_%esh$cw
zrsz$uc#;Z&MG?h=NDvR66fc6{#d@=NRT?WAzuBF(iB^nPXEXD??|0tJ&QAIV2Kv#6
z38*moOq1VzZq5U~769)}b0Bdc>mMh*M0z-JVBnCV@0$Vi5Wr6MpXi9MeGr-=%*lT?
znYD6QqrL#tM`SygPFd%_C+^%P-&5*)(_~Oi>zfIGrrw&)=Ev&|LZ};|p+0Mk=b#)T
z$i)2msFh8{BJbKrp8%9t&K}E`C$R_61RoA2LV>H<tutqudcL4h6UFd)<HI+VQnq?1
z5>bvKlv7&EilwTN^O!qA(^}YP_(-{-yd?daC)p=-vIY^NH!NrUS_ODUEV(zA;!VF2
z!{rKsxVLQGfuj;L_)(BpAvrCvitYF)u?9bDmDq=7c3fhe?Bf*4G{NnNn<X$q2p1(5
zbgoOR;xKMXtRcjL68peehr~MB&!G=Ca<~i!84M$hJgs3Dl4v6thk+Qq9gYM=U7?5(
zdMwgKmP2`Bv?wP-XcXwPbC;dWa5~R-CEIx1i0$DC`$}eH#NvInld~NwpRp-!$W2Qw
zC$^)LjE<EQ?smf7&vc!6S31Nl<#LJ=D~@jJtCjIQU4-Lq_f`PY9?hG!Go0e_sKLAW
z%4DQ;wa429*&2uq5(x)m(#@&7m>}v(K?{Q^XN+RGVZ@?_VelGi%2VL=uzce^;w`zl
zCd$&NxjHYGy|MgZ>5MUbwS!vS{^tJ=n(B%2gxKHT7tH9x2V<<UV(Xds4v&<YP}<B&
zVWqT1Ep61M0xa@DnJEX<$njg{fEMwi;nHA7p|A`Bbp>j^FlL*=Kyw)P*M?Ca#@lsJ
zMa7+TB=*<#Ev%5KJ`oHGV_UZsiVKrPRxEy<E2_l}i{`@o4^uCGd%S*O^6T8U$+}>0
zaW+&~UkLcIwC0z+w_Xcbb!Q5XA9E~9mtc?nuRHrn%H1`@P7{rx8tYQ5wu!FDc@J0G
z-FMje3+}9lA<Ss=zds?|OaBBLNVbw(x@*N#t%-XzfOTj=<d2NJ$Ph)ex+v(@^{h*>
K;t~HgqW=WFQt=7^

diff --git a/layout/reftests/fonts/math/fraction-4.otf b/layout/reftests/fonts/math/fraction-4.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..00bf528cb77fe02e6e78ca8cc25d8d828d28630e
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)FuR*ALJ7zV9RXu3_S2W<~pSVfGrSc(Tl*O)eurW>|Vs;5Ga
zDR>hso{EB?D57`}34-8B@gjN=tT!K5rLm>Pe|D!$q801a+06Xk|D11jW+#0E1AVB+
z1XLKkrpa$VJNOy!H3N8Wngj9k8UHxxMbg9Z{R4*-J>moO5Wr6K9dD1Vy&sw)%*lTy
zk+HH^qdo`Jhh#gDN?PX@<F{^-?+NuiDKaRh^cKQjskf#wx$#<q5NbwfsLfd8St!Q{
zGBLkCYGsl!{w_-T1fX<e?Xg^G5?z2M_;4^03QP_6zd7B|{SEb+D27)X9=xuUveiP7
zh;kI6oYb1jma0b1W9|q|Yi3_TYgVo)FG#=QN%jSutWJdJb<0`5Rso(8OYY63c+;0-
zxLiRHcbBc(a8zOjKk^bQB&Q`-u@xUB*5GHY68q4|`X$!MK2DKL6WortSpqYJa6w{0
z=c>di4&%DS8bT~6u@9WJORSUqEP7!hi%W2j#xPRI(HeFjft@5{FwjA}!x5*b%M>v}
zk43u3awt!X7UiS~jRL)P_L7qxPUZNH#7-VFI=Xn=zMLKzv3RfTWNpXFrEQ8Ea?=va
ziEZKt3^`UpxZ4POKht&QT<H+Iq{}HvtT^^kU#X1e*-bd+c5ekR?a`cRJHtsHiyC|{
zFHc6w?zUK)AiD};gG9o?m~?Y0FD8h(QqaO+(ix*zZWtX=!!Y<NYRXgK^|0LWZm~<Q
zu8FcVYOc;pC2uT!SUO`&U+JJ$x4-%SgQj|-G=Wa6uwX_XJ{V*56|bI&@9;>m0mT+p
z3@gP=YH@=$6=0DM%8gP$jr7ly0$Rk6x{HJD`TQ~n)a0r8!no5A1{%Y-w>FI0Fy5|%
zDk^TLBe8FF-$I#8^@(6m7~8xhUznRLutMScY(XtF&6{(dewcb;;nDiJ$?vlZlQqHM
z{GCvKeLmpF(wblN%)An^>dq7%KW15!F2Qd7U*GIYDR-?RcA97m{ca8%UO86VSjLrh
zcMm&%!JQQ`gc-g3#m9tu=%1j8WGl&~yH-5anz&a3Schgr{>a{o3{ga@i-K-l&$=Wl
J9`SD@`cK-I@CyI{

diff --git a/layout/reftests/fonts/math/fraction-5.otf b/layout/reftests/fonts/math/fraction-5.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..ef1c1d0677a6cac5c85653df499c699c3d59e7d7
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*|up+TS;rh7zV9cg{IrYdeC~%!Xj#{VksUJU1Mw_O*d?#v^^Di
zGlDlk@gxd@qKM)_BzO=HqVyto(|S{Stu$3MezQAm5`VB>o!y!5eZTW&cXoDQaBu*P
zn1TwU-!%E1=lkXWUps*Jra726m-Ua6ULrl5*fY3K(IY-U4*~4hz|rnl%Y)D*!kql4
zl36Q<Rq6{seMGjs>6CTmTjKUD@;#-#BTWY7guagOJoS!rHa}i(5JKGu4fR=TJO|}4
zK_=$cN3CoszTsV*^eI5;$=PH1@-(&sn&891L@034I`HyjQ{QJaYN8ls);xSuEoG~R
zA`#^%LOHIrS1dJ+oQK^Jn%2(dL2Fj7Dz8Yt>`69<IBO6gdc$(o&sBhD#FBe+Dc<yz
z7%o>3#Jy$fW*m~3!H<H(3dw5{tJs8(5^M0Y4vBqeW=AB}$v#ezOcUG=x>*7<gm7MB
zLFbCZD)!^L#2P{@D6tQmbxW+1{WSVvBZmn%$Y2<0<Y^6^NMb9=7!35#+u=x1)FefW
z&}ES>vK-12qeVFxLZd*xottnn!|6QlOm5{dqh~u$*pr!&5sUZRPR@3$e8#4@vu;{)
zIk5}9WOS^gaCZ^*Zqs$<UFi_Jl*=hftT=X3|6Li+(@Qw!c5ekR?a{nxJHsg+iyC|<
zuS`ZtZ&$2KkX-?>AtK>mOu9Lh7ZXHXDQICR<&04*H;kUBVHkV`HRUewdRV^kKJk`Z
zT@z(#)LfmH%idW2u(ZdR{=1D@+y3VN51Q(U@)YQN`E|jJK72678mk^X6W`&%QWHw+
zSShTO)~ls8+NA)Cd{Azd18U^RjdDPX_|b4-sJl>D27$T)HD4Hao5DbI824Mks1M`q
zYN(>(7TOZKR`xAa$kgr#28FQ=8w<sS=^`r@7iWuVvF(ew@aem$7r#DkU6@{+{W@J2
z41T#ADzp{?ek`r|)$SWJLe`v_!sEv*i_#(3r~m7deJ$m-6~ta68fX9P4(zXu)z(&U
zwcUM(@t<(KDn|T6=;42RLU=d*3ED_@kX$-z#Z{|`b2Wg~Xh-Ca^t{LrMRd3*=+^bD
MOS0+`e;d(%0JW>|3jhEB

diff --git a/layout/reftests/fonts/math/fraction-6.otf b/layout/reftests/fonts/math/fraction-6.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..ca06d49a40fdf85af265cc99c35a82709e4f06b6
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)FuYDsIwwG0|-D>U7v^?}xd78Vs_6-yCRbd9lzG~KX`Qau%V
z5h8dK6i=ccD2gZ^M1mJRDPBa6)|;ZoN~5CjpWW#rrDD7~o0<RnpYzSm>||hYZ~*m~
zfC{tUviP0nd%ggH769)pYcO#p8yqLSM7ojKIk;QVx4Z@P2*3^x9O{a%co4Znn3MlR
zGHd6sOnm{UkI1$wow85;Ox(UjzNgeTr^%ok(^nIorXEda^W(K9A=He}P@A>Kb5ITt
zWMY1O)Xt`Qqf=W+p8%BZoHLd$Pofvl1RoA2LV=4%8ja%(eP2<piDG!Y^5L6>Qnp$s
z5>bvKl%rb9yrrU%^ME%((^}Xx0;F73UXp&<m+UioSe*#b>*lf+R{@?8OYYC5_|wnF
zaJhmo?#)@-uwP<^APN#IB(F)VVm&@etRcvv5(luH9h6un`#421O>o=iWeLm>!C8p~
zohuTn*o*5DYlyJ0!~t;DC9zKSljw(o9L~c<2E#}rPitsL5*;MtFwsrB!;zq<3luRz
zk4?JBaw$)YHsxdpjRO5n?!22BPUm@hvV+IX?p~g7E@VbVY~Js<Imfm08HeIdduhqJ
z#7=A`qiZLHyOXg0vpi?slP<AKd7NUzienq~rONo8O@!lK_g4VR8O>XcJDlS2n8~;C
z`N>Gx)EVy-WUC-HL?m2{NjInRVuF|_1uYDv+%byfrr8}cO_NtqQ=S698*<0{#4dTd
zCd$&Nc{(qb{jvOE_KY!ose@YC{^tJ=n(B-41bVQ<f*F1IV2sr-c=b$thx<wmD6M8C
zLn*CMODnZYA=dgqxmgaWtp{(ELt1MPb?1h<3WYfkswq$l7`WSD0Lu;BUtyruz`I7M
zqT&WR65Ff$7Us!Ro(Kkov9;?8#hJ+>D;B>^71d(%cWdU;FH0}}c-%BI`EBaQWKB5y
z{cfbtR0stzyXKcWZoC$<;?5MFAf{N1F2O$iU*GI2DK}OTdyQzEt|E^1sO=LS>s3Bp
zT*I^VEW$mN`HWuv&nJX;&_6*l$tcO$yH-4vnz&a(XhaKI|H#UZj8H_>Lt(G3Z=ID3
J9`SD@`fr%t@CyI{

diff --git a/layout/reftests/fonts/math/fraction-7.otf b/layout/reftests/fonts/math/fraction-7.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6792cd87745fa2865da87f0fcde7321a53d76f33
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*|up+t3<6B%b>OXK+|nvEoght!Xl-yinVx9bd9lzG~KX`QhO>C
zyhQLOD4s+?P!v%-hy+hPReBLUT0JS^t<qG{_|5L5ZKPtnI=eI9`+n!m?(FQq;NSr2
zF$on$uW9o8(|un6UlV|Lra2hDknxX`UL-vnKQMSm(YxLNdI(@A29C8y*FFwiCCtfx
zCXunSSffq@>Qk~EOeL*zKjQc9lJ5oey(uy%r}WK)=c%`(GP&_ugAi&)XsFFt<5?(2
z2r@ChK5Au>ovj~wNS_3hj;uYFD@|b!pb0)4OoRegjt3e~H*|kRy(WrbcH@)RE2V6;
zP$Z%pMJOk=re#Y-Bj*u!gr+sIdH6`Vq0Eqe&6DgiVysSt=ygk3zgGcX5=-vQrFhdX
z$8foVARaDRTX9%o20!u=D<p49tYSMpO02=pS|s+NksXy-C;K=>GEH#nce4a$2;ri{
zg3fh`RrKMO#2P{@D6tQmwM(p%{VaN6Ba6#$kj5}l$k7^hB7t2bqcG4xZ-*mJQ4<s~
zLYGCl$Z{x8j27jj35^21cJ{K99!}->&crSrH9Ge2xIK{`8L@b;?PP7o%B5|JJMX3?
zmJ-|0MMlR;2zMJ{?>1d$&Xo?aOS+sQ#EN4d_0`IFo=(D1w|gsqX^-Yi+Zj&sXvE<A
z`0`|=bhbs?1lcNx4G{?kW75s3yqF;3N<j-lNoR~=xnXof48!16)Reox>tXrEyTw~_
zbxo9|QFC=(DtTk+eR+>DeYK5R+5YDL51Q(U(j;P7Wx<R-d@#o9S3G(qzQg`v1B#nj
zF{~7~sKt%i)c|XLuiPmG)aIkNO98FfkGe}k?fLu?2-M`M`NDY65C$5<c(gW*+A!X(
zgDNWSpe?b#x^H2bOy!PXP#D{~EnireDzHLfaju{iHheP|KK(TH!uMzE7p4~HzE9Nz
zgWn#6^6T>fKgw&K>A5{CWW|{&Jbuiv2pxjm`oBKeS5oe-BK9WHIA29v%oExs54V1*
ztl|1&zu{PAKBI^K<2m6T`V(v**+Q~>){3iA6X$9G>(GSeKeF;7Lln{CqM%#XvzFzG
JOZ;s_{{?C8@CyI{

diff --git a/layout/reftests/fonts/math/fraction-8.otf b/layout/reftests/fonts/math/fraction-8.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..f7d11fa29d3956686d8be6aeacab25aaa3c8baa7
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*`{eswWL}xmO-nwLep)kRkS_W!Xj#{VksUJU1Mw_O*d?#v^^E-
zEd_6a;;ASIiXw^!k>E)$iWkA76+9?{C#6x*_|5LLNlL|fb#`aI_x;YB-PzfJ!NCF4
zVG1gYe$(W)pC9}T_?iH`HO;~J`AlG(^djkz_`bpYioS6dpoal=eBf9|Y|Z`f3}H_G
z(}|3g#VYj~pgts9Un*&x{TaV?lYCF8cc;jpoYXfE{zAPamC23!4MM0Hp~0WA#<Nh4
z5M*M0ebmY%yIbG)kv;_|omqP<SDMBSKofj8m<R<f4eaeZRp0X!b($!KSL+_Uu9UL*
zp-4nIicn5yO=U|}Bj*u!gr+sIFYu9aRe3@BWlyqC=wh`ZM6X@UT3Q8oN-ViIm*P!d
zj^T0zA>3WGZpC4V83M>ltdP7Wv5GDDAhCu3YmwN8)$FLmI@!l5l4*k5Ava54hA=Kj
zEa+U3Sj7QcmsmrXg(UWYvkr-MvY$aeY-BM32Wbo=g&eJ+6$!MFjKM%By&aA?MNLw~
z2wfKGBFmvXF<O+9CNv84+t~>xJ)Fw%)<heR8J#<L+@4I2j99$icCxl(<<d6AopaL?
zi;3;nO-9E`2zNVS?>1d$&Xo?aOS+t*#EN4N_2tTVo}GkaZueFI(;m&4wlkdMv8ciK
z@bYA&>}-#<3$iO9Hbf*Gj7c}A@?wIhD+MhKC7m&f<%ZE2H4KBVpr+gfUXRE(-Xq?U
zt81bxjhd_TQpp=j?-uqL)0f+*)$MQo|DdU!C{3XY%Pg4DhY!YBUB#nk;yXN4tVeMJ
zD@K&!Mzy$3n+dY!cgl@YP;EXsTMBB;0n}a`>d5C8L9ixI%@@I)`UtQ(f_rNs@JH~b
z0jj9Djkd(zm3<3kGSxeRL1Apu=6qp(y1)vBZ*v8;u=cw-|M8cp7k)fyoS*(S_hY&y
z6#9NAoNvqr16Ww|i{9B+LROub!V|z8i_#(3qyOuZeJSPk6~ta68t0aG1rJmxU7pa^
zmvLnc*VeTJSH=-$^zeT^CfrMZg0&=DNG_bU;;Pofxf(<Rn$Y}5_FiO|B3fJ&a_f55
M1zB;4zm4d>0g4yz3;+NC

diff --git a/layout/reftests/fonts/math/fraction-9.otf b/layout/reftests/fonts/math/fraction-9.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..476ecd2c78d1e08a750c7c3e52c394ff02e996cd
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)FuR*AJ@EQ8i3G~K4HMXd)dtPdKiSc(Tl*BF~f(+%4w)l;#@
z6ub$FCs7a-MHCMr!IOAUya*nx7g0QTsWfe=@t@sklStKib#`a|?|;rWyR)->{r!EY
z#TZl=J*LU;z3Tl2_!<FxFwOqh`LutO^aAPO*xvpFioU)J&_e(_-gm4uy7EzIf-ool
z>3G`8V1@b;P@j-(Uov5xosZqUL%!$KcO=Q6oYdD5o}%8IOlL={4MM0IqM<r%jb@-6
zA;`r1`mmKwbZ!5%pY$<6Y0KCn+2S}l08Q}WU?LQ_a<Fs9sk-j(sMSO<yj}D7UAdI4
z8j3`eqX^}M)>yJsG;$tsM`&6jn}Uy&>&k1=uX>VwMLVkzA$rYX)~{877sQf#b1B~R
zr5G+(5X6H;>t-C5n8A;n#0tq9606vR&k}3!vu25XsAoqd*2z9fkxUcZdfhC68A7-q
zv7mEJVikvQQ(_Gv7L?cr&RQkb$$kbsu#v$fI7nd-Nn~jaTM@@Ll2I6FqqoBmqo~Ui
zF+`U|y2x@UPmC7jqzDZIJ$B}jlNwBB`PTS09yQuJc+9?>8XB^AkL_e^$I7N`iaY0~
z#TOG>u#=3A6&LOn!rpDV&a5jPVwZ3^MTiy0F6v8_@jRV`qi*+B0Mj1Mnzl2T;L(V|
zck$9>q;$4KTLjr<5E~#84o0M#Q+Y8##Fc^;1`^H)#d5=Fix`H%mr+yh0<VYV8}Alx
z$<;McmPXChd9mn?#g7YnjOj~l)XMfZ|9{X_PZY<{jwKe%=)(tNthVgYGw~hv7V1z~
z#|mMkuwE^!(Ix_{>7#PH7*Lyz-YN#PCO>K}4z%WSiy%;yqvi|aeq9)-598s=Fsj3N
zzY40TxP`XF?&W<8B{G#ef<a+y!^T{GdOXka`I*VQns1mjr@#C#_59q^)zjlMlXK%$
z!QkxuP;PZD;K#z6U+=l~R>+DoQ+WKCWDz<9yY+v4vTvl^zKqx#MC06_Ljs3rX!o$T
zwuH-TxVH9RaCsbIMh}1f8R0$jCuktqOmg9@6<4Ju&eZ@`p%G2LrRGJ3D5BX#LAS1F
MU65s$_}hs76J;y!3;+NC

diff --git a/layout/reftests/fonts/math/generate.py b/layout/reftests/fonts/math/generate.py
--- a/layout/reftests/fonts/math/generate.py
+++ b/layout/reftests/fonts/math/generate.py
@@ -223,8 +223,125 @@ for i in [1, 2, 6, 8, 10]:
     p.lineTo(0, s)
     p.closePath();
     g.width = s
 
 f[largeop[0]].verticalVariants = "L7 L8 L9"
 f[largeop[1]].verticalVariants = "L8"
 
 saveMathFont(f)
+
+################################################################################
+# Testing Fraction Parameters
+f = newMathFont("fraction-1")
+f.math.FractionRuleThickness = 20 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-2")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 9.5 * em
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-3")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 9.5 * em
+saveMathFont(f)
+
+f = newMathFont("fraction-4")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 3 * em
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-5")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 3 * em
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-6")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 9.5 * em
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-7")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 9.5 * em
+saveMathFont(f)
+
+f = newMathFont("fraction-8")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 3 * em
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-9")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 3 * em
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+################################################################################
+# Testing Stack Parameters
+f = newMathFont("stack-1")
+f.math.StackTopShiftUp = 0
+f.math.StackBottomShiftDown = 0
+f.math.StackGapMin = 20 * em
+saveMathFont(f)
+
+f = newMathFont("stack-2")
+f.math.StackTopShiftUp = 3 * em
+f.math.StackBottomShiftDown = 0
+f.math.StackGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-3")
+f.math.StackTopShiftUp = 0
+f.math.StackBottomShiftDown = 3 * em
+f.math.StackGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-4")
+f.math.StackTopDisplayStyleShiftUp = 0
+f.math.StackBottomDisplayStyleShiftDown = 0
+f.math.StackDisplayStyleGapMin = 20 * em
+saveMathFont(f)
+
+f = newMathFont("stack-5")
+f.math.StackTopDisplayStyleShiftUp = 3 * em
+f.math.StackBottomDisplayStyleShiftDown = 0
+f.math.StackDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-6")
+f.math.StackTopDisplayStyleShiftUp = 0
+f.math.StackBottomDisplayStyleShiftDown = 3 * em
+f.math.StackDisplayStyleGapMin = 0
+saveMathFont(f)
diff --git a/layout/reftests/fonts/math/stack-1.otf b/layout/reftests/fonts/math/stack-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..7d60b64f12b190e3421fad7f25084a17ec620d53
GIT binary patch
literal 1864
zc%0o;O=uHA6#iy+vq@`ATdB5SEQ1zpg~V-Y1+{`&Sv?qAu~Y>`ml~UB(+%4wt*1f}
z4^dP+>Crzth$4aqk>Ev7RWBlVt2afD)u#T%H@lOXNK5tVOy0cjy?KB0vy<-L-fk?y
z7*rTtrpXUZZ0rHFDFAOwvp0SsT|EN$CP)s)xApE)^dlEYeh;t%-TT(X>K@deC(LR7
zXn)$uV6plfP%n{gdop1i`w_o$i{_pXZAg+rIjk=yEaEpO)7g=LK?we>Gz8MtNCpa}
z2WzB3AF|Sk`w{yK$zy=BIAafIi{n^N^}VKf4kk<~@aAXdj?{F1#v)Aw!>fjeugke?
z0VooYk0OLaTH|j`MWe|ccZ8-jvMKmTxT=U<xae{A5$&u>nCMlrUVlabo>G<E%cXef
zf7@`mf)MV_YFA^A#0-9%l~^HuSz;9{@m69DeioG2hg!BlVx9E+$&zWJw%x9mz>IR8
zl30{;L1Gm<a7AK`Y`#nE184OT>j<%(=z@(5M&TfZ0VI*7HMF1~t;Az6&_<`j5htrN
zWHCtHB3XDj<R?apd{TslfG#^T>ZAseS>Dp$%40^`dLFmWqy`5q-eo%(+p)4Ko9u?k
z#iAr95upSa&RYE^BLuvk=?2TX+@YcpZYfbJhGP>^rMIW+ARKeaD;cIelr?Q<Ai-l%
zgKy$82ceEgEFwyqzl=Ug>CmjVDo!Cq(5TBr5$H=e!?X}?7;RC*F!=nT<OzEemZ#Y%
zPQaBl5sgO8m3gt~jm3AR`@{6PE@5R`X#PKFs>h0BXvZ82X7o{mF%~H8I};z+?m`U;
z%UL0;6jrE(2JL*1HN8`A7K3Wj-s{Dn)>MtE(|zl5xmghO=cxI@xKR@ZYQwl)7e*kA
zmrJ0Eh->H)bo|{Vmz9)V1O|n%m8)|3>G3?v=VvDKYJS;QbNa(iQ_p{Uv~+rWX7by(
zKNR|Uw?4Nt7p#^`qc*YS`YXXJ-a#=_jY$@zhpkip*ByN!`Pzj|_kN->j{ikWaW>Z^
zFX2-AQ{P@jW&Vuz{l{a%Tj+IPM!cDL>HQSFQfej&VhI}2G;dX&Wj$FmyC~$w^|U2k
J*2O=FpkL%q<Q4z`

diff --git a/layout/reftests/fonts/math/stack-2.otf b/layout/reftests/fonts/math/stack-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..df70ad5150e680b6000262b424b53faf048a09e6
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq@`ARjRER%b>*<B;BUAV5y*1R*}ZGSgMGkON~vm>Beo8wx>ez
z6h+089)00K1Qk4p1VQjr^&*0|dQ-eAO?}0Gb|*E_7WL{(X8!Mg|MS>McVAyO7GVM^
zj84<!2cK{01+<R<UYllL{6xBX6!1+EAC7PD+pXv;KM?;8U<bPQHN}?Rt35}Ulm6&H
z+R9+D`V3Gnl59sZVIBJxzkQQ*k7=|eNuV6oR}mKR8<XkmXuu!@|2CQeX=^kCrH3G^
zr%4~S(uw;`r)G(t0F=cUdn8+&#Ad4R73n#cFa@G*T~CkHbbP`hO$5Wsx(BbyscZo#
z5|NK0m_u6qPf0~1Wsf^U)9Tqr_=vfph+VkgQT72XtV)>ZRdZgyMgg8smE6mvc<F!I
zaJhmI?#@ZqVXwptew>w9A$mz-6>IQDVhw&4l-P$QtW9E_<on5zX`;3+*GphVxlT(g
z$~iBwik-MDu|_suCH8@{T8VXp*e-O!Mh0VWkisC6$kG}%U;rD5#$ceCPKP5-R^wzb
zMBO4@csb-JW{Z4Mgoc4mJ2U2_29sI7VPGSV8O@t{+#XL24OzU?b~3hOWm7iUjgX5)
zNlqd{NidSN22Mr@ct6t(mUXE^MJ3!)qErk=JB><jPuA+<$Xv-V?cuCxJA(-xiyFM0
z%N&GSBe94mZQ(NdDWyYNZ&jQ^il9-KiXzaTa7Jh$+%TG>hGFo9L&+2NMp&L^hd2S3
z*F-d$HJ9hbqBj@cmhKPJ=evZJ?N9pups5}yPM`(zESS+p4aQiYwC_xOU|oe86jrf9
zSShSl3w7GLAZvK5+$aXshTdz%pw>{0sx$pfx!fEG`g7ELVO*~X153iVwKR-C7%!GV
z6%p6dC20M-OD-!Zy9f*lV{6vt@-vfpme0>l=hgg*&*seg@1~yr@^Jag<m~j9Nq;Ex
z`A%(ac`jHjmqu-B>$R7HR=k5kQ;lgBrH8FU|JNOTF6pM<Rlz;K%h>V1h$+tIs-z`c
zYQM@`%0`(#qkaGOi11c=-B%E8BwBhuMX%%<X#}wh^=MeID$lZ(EE-)Da^rf^5-scE
HA4H5FTub8@

diff --git a/layout/reftests/fonts/math/stack-3.otf b/layout/reftests/fonts/math/stack-3.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..465603fd3d86e2eb5e2abafc409339c772ea79e3
GIT binary patch
literal 1864
zc%0o;OH30%82)B=yDeA?5>SklOqAdwp)5s6G?=KE)fg*22%4zT4OUvAY_n7Yo=AwN
zYSehrqpx@{CdTMNP2<UvkBc$!1~&~?3>6>spWP|6DiN>#)0zMKpYzXSr`<h0-B^M#
zs4%)rlOKJv`5>T819)$mJ+U*X$`Qc#isW!?d(Un~UpYncM}QsaKGYIj_OSLMVNUjw
zeJLxArRqySy+XPjiMVy@d+gpFvOTBXksyU~Twg_4<Zn!*G9v+l5d7O{2&Al$G?e`W
zSv?K<kd=x*ZXNzc@))2jP20nn!Z<cjeecN5!GtT&WbA%+qN?*VmS`dw-mZA`u9Qm(
zK#_=I6d@eb>gP3OM8^H@2u-VJ)9{gST@kx*+2d>qZLC7L=oNEOzh(hmP?g-9OYx?k
z_u+B{Av~DVHesK{41QdYSRsB@VijxfL1GPl7L?eBYStmKPWr>-$uv>hUN=f$MsuB&
zSd?=~Vih}aO=69FzDeu@XSEXR2(ex0f{ipr;UI~AB#@ystVbU<5Rbw@E1eEUjJ(d1
z#~?L}WD(_1oER;NNfH_Yy6p6*lk87q`1-yLJZiLV;xYSta&XY%UAB|99V?Tx$#0lK
zESh8h&1fSrWAzO*6Yzefn=IpUhl+~3r9`M0jxE&7qdi?a;i%ial406I8Pj(9<2)KM
z_!chbAk^L*Z5E|1Tt+WV>5$c16{nOUX~gBC2=vCCVOj_`jMj)@7<}PW@`Sw}mZ#Y%
zPQaBlk&Q;pm3g7yjfKhL{bBl_E@3(S&Hf*d>aoI@*xcV2%;=*AV=PeIcP2itz4<ES
zSFwCp$*)%PE3}J2)-b8uE(Fzv12+pnt)UVX=XzVR**OsOXNi1a+^Px#)nVLS7Dgb9
zH#Ja2#&vWF+81}pWhEsSfk9zx&Dv~kW<1Aoxi1qrHMe}$ocZ*_)N@~-)Xj{4nfN;H
z4~1s$*JkUo!AiL_qE}mQz7@Re9Tb*IOt1(&Y@PbQ?&xdDH!kcF+*7i{rx%e^Ec1rs
zMO>s`^=&1+B%aZ}e}77NE4}W^i8m52zMrC%OO4cns6jm%7OcwitR;^|7lqusp0>zK
Jn)nA1{U<n&;}-w`

diff --git a/layout/reftests/fonts/math/stack-4.otf b/layout/reftests/fonts/math/stack-4.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..dbef307cc1e2b4f0078f7e71751cf06805ebfa36
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq@{3s#Faa!=Od2(6~*kpj1#RtB1xahU%d{mKvI9(+%4w)l;E(
zilX94kM)5E5kwGC33~CQ_9B9}dQ<dRX?(_ib|*EF7VFiS{PTbRbN+ekq&Jo7#UhMB
zh0$%Aynk}b0YIAu@WwP#$rHK8QNZ_t<VbQyYLB8Hc}DVkfF0^Rura>mUdwsHob1O2
za#kKq>T^K7M7o`sv~~PP^7c)#Jt5khA%${SUrAWxZ_VTiqXB~u{M%^=<gC#=lzjwQ
zm<D~=%B3GBPE|-A1C*w`JyNKQV-wZ)n(Q1*xB}6($Nr<uU7xW?6Ui{S;{NMeE?WSK
zL=>Y4p<fIC*3>mJ?sG?IT9{44N5WM_?7~HlvyVuy2H~PN%trm01$atTa&IohoBp>C
zmn#V2?yPn#_Dam)$2o}=;+G{>u^MkB*5GGBiG5hiHcPCN{vdfWP1M%oMhVPlu2T|=
zaxO@$Vi&GRtdY-miGAR#MPeNxwj15Bk;fT0$YKx~6le|WF@QGWaTw^J)8R;x*IDuy
zqHd8aq8y47qeU@ULc>6}oj>Db2Qvk}exQxVjgCz`X`jsw4OzU~cJj7k6|y$@jZlb1
zlbl4mIQ)@<HE^<>fcG=qWCfQyR8-n6B}T<?Y$d9X_H><u<1Tq6!?cGBrtJ)-c|2zD
ztz6DQsIxuZE=rrfj6RyuA*;74PANswn9D^G=u0~zv=D9>9Wlc&`24Bl340Wgr`aV=
zz?C(TjYiFtd8Oiwm3P(q!}Pf>VSW3X{Xb}`$0}n;V2%Yd`l!Je3sm==i4Ux&+>G){
zR*op;Rcd*Kc0S0W@01&rpc>sjQ3-0%Ml_u6+gL2lf}p=h%@@J-<_NGjf?G=>2t@E|
zDO8bh9bJOXg<W!4NzFxIP#9airdXO8FR@bT%T!4%E&poHeE4bVrEd?G&5VDU`Zn$l
zg}&ZtDK0Ap8|Bidz1TJ}DR|vGC@hVbVljHyy7YhD(U+2MSb*;}VE?BD_$54FmsfF3
zjyip!hHBy&?fZ{MgtyV_zMOa~@#_02dcD+26vR@55uLXx&$ER*T3r-!^LpAUuj%3+
GM9?pQT;vu2

diff --git a/layout/reftests/fonts/math/stack-5.otf b/layout/reftests/fonts/math/stack-5.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6da0a34e8e495540d878cb9830cc999a8ca0dd6e
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq@{3YN@qitb+z$(6~*Epj6OCRuN+rL-nBOQbQAMx?vlodMXr8
zQB*wX(H9;>5W#~=@Z_mJ4kCDKZ;IDSV|~PbcBeIw7WL{(X8!Mg&i~KMPI}YnUM#{W
zR2WIq<j3A@O#|8#fOn>uPMyj(jsU)K;=`$(={<_Rd=>E@0CuGJ(5BduhpiV0bJCya
z&szmFsV@Na3dwr18SCWt)V({Tdq!hRmITT%eFb3=Ka$NCM*;>R_;=70$Xg=?C<h3#
zcAE4dE1!9q7*U8H1(c?OJzT7gVKe3Tmh>D<m;!B)p5*c7?$21HiC}oW?9tm=Dq8@G
zMC79g=BU>GOH$WJdBB~aY3*zZK4PvbVizuZlzl>+H3$>EVb1IKD8O^dl6z|@-txa}
zxU3+A2XoT3*e@}I9~UH6h+dUg#cI5lSc9JhCH7%4+aj?}^221wG?Cjr*GphVYn_o;
zq;pAP6}xavVvTIRN$dk>trF`9vE4|*MgiyGAcp~DQKTByqaPcH#$cd}PKP5!R_DoL
zkh(>@@N&pc%oh3N2n_*AyKv6Q4P=Xaeg6g?GrBhOlzl!oIB4;t?G$XsD&}mm8zvWv
z7CDVhB#13q{iiz#ct6t(R&=RDNoCwrqLd8BHX8Nbo-9E)<_<4qnD$W7w4H$rk3|i>
zjmtF%B|2lBBDICn=%Xba(t1^K3Mqm{T`H15U&a}xLbzdcMGeE?3x|>??2WKI&2Di5
zF0YAbG;1!;t5t8VPR`yRrq6c?>)W67|3OndQXNGc^AybJqXuIvFuU(ed|>-3&8Vzk
zm9SD-saBS07lW*0Qn_6XsvQS!R)bncBO1>3Z7P-KK+s>J<_qIia~N10#@!`h1j2aL
z0#!s@N0%V+cb8mdQgaa)6vkGsDV3+k%B)=eGEr8`Z8PTd#~-F%{`z?7^w^h)uVemD
zXy$%vX=y3gC`+R@zWwHFLF?W@p=rbfi_*i^t^ezezLa$1{OaJ|8s^4d#*9nbcnz+N
z5ue8<UhmIn-@iX0yq#Y6Hlh)tv+t+q^<0ET5G`m&$AVdTmaSwFaZ$*P>q%#6O&9+l
GV*CV7-r*Sl

diff --git a/layout/reftests/fonts/math/stack-6.otf b/layout/reftests/fonts/math/stack-6.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..46e92cc11ce8219917a744e324d9434c9bcdc734
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq@`AZK+x@#zBiOXxt{YqE=BWtBA1`YxUr3siBEB-LQ>Pdny!9
zQB*wX(H9;>5W#~;@Z`w{LJ_>xo8nbz>MQ=UJ82WKKCaH>pa1)x^Uq@^T|GTrn1fNM
zFgi_>AAPmq0HA#Y@Y*zc5+^gY!+`G@$>GGdo?VK*Xer6>0CuQr|Jqpn{l@czIoXf*
zWvndbs!sv+66v<5lGcfDi95H*_L!(WMGEDJzL>Dc-<-<ih64s6__xv!$XLT!DBT2E
z6Ak*Hl}Q%XkN8L)1(dm2dni{L!#b*Ooa`J-xB{WbmQBa%IzC~JCX(Uh!UyA(T($rd
zi6}-9!eOmxMpM<u*zJzcv?lfuRD*I=5xa2F<Lm?CtVX!#HPcZ)X91p2mE4<4@ur{g
z;c^8b+?&>}z+Q<N{5U7ELj1DCDwg4m#2Wl8D6tRoSi8hJ=?{`8(?o51+$ez=&2?I0
zQO*U4RqVhOi8b>1DzOioHA<`_#CD<+HnKPi2Wj*pg&eJ675cE6cnk(w>2x>}<TXMb
z1Jo^&MU+EvVzekGO=uA4w6kZObbl(xSM{ytF{5=IPuL^rfdPwm+D_JXtX$eAzaa{-
zXp&QCK|6^#tM60`0q<wJ$#O1tsHmh{N|cJ>*ho|z?djSG$6WGChG`GxOxx*C@>ta1
z8@Zf=P+Lo^MU*ys8ND>6LsoB9oKlLUQJ0G%(3^CIXd&D%TBC+x@Yz$z6ZR-9PqRau
zfGcYv8;zPP^HRwhOK;2fhv~n%gw^d&_Wz)%9xII^j$bU8(MJu&SfIS`OnhK_ighS1
zX2q~lT%r~iYUhJ2@>aQ73aXKP*GoYyQj3~1y=(LNX%O`1srkaVQ5Od0g>kz+j6fJK
z8lZ}dE9nxn{oN&(l~h~=28FR@%kzcFu>va;rX~t%VZmo}^8I&HFMN48e{yVU;>(yn
z6#9I(F+V>atd&cn_H6U@mx5QlgThja2^OV?twaCU9epnOn%}zxchhj~FLTDFZ@dDR
z+t2!V1y#f|+V^jd2ydp>eF5=i;^p^K^lGV@D2N6$Au?-Ko@XO@G`lF|=Jm8?UeU!r
Gh@c-UBH<YT

diff --git a/layout/reftests/fonts/math/stretchy.otf b/layout/reftests/fonts/math/stretchy.otf
index b019fe3dc4ce5ceaabe4514b867d2520d7bebc97..f3728d8af14245c0920f7fa1133ea90113ac7fa0
GIT binary patch
literal 3236
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

diff --git a/layout/reftests/mathml/opentype-fraction.html b/layout/reftests/mathml/opentype-fraction.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-fraction.html
@@ -0,0 +1,177 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - fraction</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: fraction-1;
+        src: url(../fonts/math/fraction-1.otf);
+      }
+      @font-face {
+        font-family: fraction-2;
+        src: url(../fonts/math/fraction-2.otf);
+      }
+      @font-face {
+        font-family: fraction-3;
+        src: url(../fonts/math/fraction-3.otf);
+      }
+      @font-face {
+        font-family: fraction-4;
+        src: url(../fonts/math/fraction-4.otf);
+      }
+      @font-face {
+        font-family: fraction-5;
+        src: url(../fonts/math/fraction-5.otf);
+      }
+      @font-face {
+        font-family: fraction-6;
+        src: url(../fonts/math/fraction-6.otf);
+      }
+      @font-face {
+        font-family: fraction-7;
+        src: url(../fonts/math/fraction-7.otf);
+      }
+      @font-face {
+        font-family: fraction-8;
+        src: url(../fonts/math/fraction-8.otf);
+      }
+      @font-face {
+        font-family: fraction-9;
+        src: url(../fonts/math/fraction-9.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+
+        /* inline style */
+        var ref = getBox("ref").height;
+
+        assert (almostEqual(getBox("d1").top - getBox("n1").bottom, ref * 20),
+                "Bad FractionRuleThickness");
+                                                            
+        assert (almostEqual(getBox("n1").top, getBox("n2").top) &&
+                almostEqual(getBox("d2").top - getBox("n2").bottom, ref * 10.5),
+                "Bad FractionNumeratorGapMin");
+
+        assert (almostEqual(getBox("d1").bottom, getBox("d3").bottom) &&
+                almostEqual(getBox("d3").top - getBox("n3").bottom, ref * 10.5),
+                "Bad FractionDenominatorGapMin");
+
+        assert (almostEqual(getBox("ref").top - getBox("n4").top, ref*3),
+                "Bad FractionNumeratorShiftUp");
+
+        assert (almostEqual(getBox("d5").bottom - getBox("ref").bottom, ref*3),
+                "Bad FractionDenominatorShiftDown");
+
+        /* display style */
+        ref = getBox("dref").height;
+
+        assert (almostEqual(getBox("dd1").top - getBox("dn1").bottom, ref * 20),
+                "Bad FractionRuleThickness");
+
+        assert (almostEqual(getBox("dn1").top, getBox("n6").top) &&
+                almostEqual(getBox("d6").top - getBox("n6").bottom, ref * 10.5),
+                "Bad FractionNumeratorDisplayStyleGapMin");
+
+        assert (almostEqual(getBox("dd1").bottom, getBox("d7").bottom) &&
+                almostEqual(getBox("d7").top - getBox("n7").bottom, ref * 10.5),
+                "Bad FractionDenominatorDisplayStyleGapMin");
+
+        assert (almostEqual(getBox("dref").top - getBox("n8").top, ref*3),
+                "Bad FractionNumeratorDisplayStyleShiftUp");
+
+        assert (almostEqual(getBox("d9").bottom - getBox("dref").bottom, ref*3),
+                "Bad FractionDenominatorDisplayStyleShiftDown");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math>
+        <mspace id="ref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math style="font-family: fraction-1;">
+        <mfrac>
+          <mspace id="n1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-2;">
+        <mfrac>
+          <mspace id="n2" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d2" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-3;">
+        <mfrac>
+          <mspace id="n3" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d3" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-4;">
+        <mfrac>
+          <mspace id="n4" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d4" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-5;">
+        <mfrac>
+          <mspace id="n5" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d5" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+    <p>
+      <math displaystyle="true">
+        <mspace id="dref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-1;">
+        <mfrac>
+          <mspace id="dn1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="dd1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-6;">
+        <mfrac>
+          <mspace id="n6" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d6" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-7;">
+        <mfrac>
+          <mspace id="n7" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d7" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-8;">
+        <mfrac>
+          <mspace id="n8" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d8" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-9;">
+        <mfrac>
+          <mspace id="n9" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d9" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/opentype-stack.html b/layout/reftests/mathml/opentype-stack.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-stack.html
@@ -0,0 +1,126 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - fraction</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: stack-1;
+        src: url(../fonts/math/stack-1.otf);
+      }
+      @font-face {
+        font-family: stack-2;
+        src: url(../fonts/math/stack-2.otf);
+      }
+      @font-face {
+        font-family: stack-3;
+        src: url(../fonts/math/stack-3.otf);
+      }
+      @font-face {
+        font-family: stack-4;
+        src: url(../fonts/math/stack-4.otf);
+      }
+      @font-face {
+        font-family: stack-5;
+        src: url(../fonts/math/stack-5.otf);
+      }
+      @font-face {
+        font-family: stack-6;
+        src: url(../fonts/math/stack-6.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+
+        /* inline style */
+        var ref = getBox("ref").height;
+
+        assert (almostEqual(getBox("d1").top - getBox("n1").bottom, ref * 20),
+                "Bad StackGapMin");
+                                                            
+        assert (almostEqual(getBox("ref").top - getBox("n2").top, ref*3),
+                "Bad StackTopShiftMin");
+
+        assert (almostEqual(getBox("d3").bottom - getBox("ref").bottom, ref*3),
+                "Bad StackBottomShiftDown");
+
+        /* display style */
+        ref = getBox("ref").height;
+
+        assert (almostEqual(getBox("d4").top - getBox("n4").bottom, ref * 20),
+                "Bad StackGapDisplayStyleMin");
+                                                            
+        assert (almostEqual(getBox("dref").top - getBox("n5").top, ref*3),
+                "Bad StackTopDisplayStyleShiftMin");
+
+        assert (almostEqual(getBox("d6").bottom - getBox("dref").bottom, ref*3),
+                "Bad StackDisplayStyleBottomShiftDown");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math>
+        <mspace id="ref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math style="font-family: stack-1;">
+        <mfrac linethickness="0">
+          <mspace id="n1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: stack-2;">
+        <mfrac linethickness="0">
+          <mspace id="n2" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d2" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: stack-3;">
+        <mfrac linethickness="0">
+          <mspace id="n3" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d3" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+    <p>
+      <!-- Same in display style -->
+      <math displaystyle="true">
+        <mspace id="dref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math displaystyle="true" style="font-family: stack-4;">
+        <mfrac linethickness="0">
+          <mspace id="n4" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d4" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: stack-5;">
+        <mfrac linethickness="0">
+          <mspace id="n5" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d5" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: stack-6;">
+        <mfrac linethickness="0">
+          <mspace id="n6" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d6" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/reftest.list b/layout/reftests/mathml/reftest.list
--- a/layout/reftests/mathml/reftest.list
+++ b/layout/reftests/mathml/reftest.list
@@ -144,16 +144,18 @@ skip-if(B2G) == maction-dynamic-1.html m
 skip-if(B2G) == maction-dynamic-3.html maction-dynamic-3-ref.html # bug 773482
 == whitespace-trim-1.html whitespace-trim-1-ref.html
 == whitespace-trim-2.html whitespace-trim-2-ref.html
 == whitespace-trim-3.html whitespace-trim-3-ref.html
 fails == whitespace-trim-4.html whitespace-trim-4-ref.html # Bug 787215
 == whitespace-trim-5.html whitespace-trim-5-ref.html
 == operator-1.xhtml operator-1-ref.xhtml
 == opentype-stretchy.html opentype-stretchy-ref.html
+== opentype-fraction.html data:text/html,<body>Pass
+== opentype-stack.html data:text/html,<body>Pass
 == scriptshift-1.xhtml scriptshift-1-ref.xhtml
 == number-size-1.xhtml number-size-1-ref.xhtml
 == multiscripts-1.html multiscripts-1-ref.html
 == mathml-mmultiscript-base.html mathml-mmultiscript-base-ref.html
 == mathml-mmultiscript-mprescript.html mathml-mmultiscript-mprescript-ref.html
 != menclose-1.html menclose-1-ref.html
 == mmultiscript-align.html mmultiscript-align-ref.html
 == subscript-italic-correction.html subscript-italic-correction-ref.html
