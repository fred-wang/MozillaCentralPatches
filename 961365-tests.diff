# HG changeset patch
# Parent 396f2fb0ab002ea30e4ece6a0a772902d519fb6b
# User Frédéric Wang <fred.wang@free.fr>
Part 6 - Reftests. r=karl, b=961365

diff --git a/layout/reftests/fonts/math/axis-height-1.otf b/layout/reftests/fonts/math/axis-height-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..3e6f0b4b2e497f264c9925216d96e00f50ac1d1f
GIT binary patch
literal 2000
zc%0Q$O=uKX9RIzU*+~=EO_cbRu3-+_Hfh;)vN0ll95k{NHH~5jLJK;i+w4j<vrJZv
zIYok}J&0bUy%fY_BNarb$l}3+2PGhd_E--hR-qT$UE;_1dowS|Zqq<=>>J+vfB*0Q
zd+$GQ28V_Qu@2MFVfSY;*4KZ|T>~N~0n{>?p@B1nf&rMv$j1i`41KAYvAyKS0C95g
z#E$faTkV&KE$UB?6r3WC=#K&Y6=jEWS?60Z+IpC}dz`y+6qx5to%l6pB3CF)wrnLr
z(*wSu1!uAdU8WLJYK}XFY{$>PKOsL2XlIJ<M9H5)FYDV)y#*mnfy}{Qr%tu*`y1;F
z84Pn<o^{kyW1F#!<RfSZ2Yocjd}A<=|D0NZ#=#no1#cKeRJ=xn9^Y$^$X^brc!^%o
zEaL?0S&aLyai3Lw5$4ju^h-9DT0smq7p0%#D}@Et<BGx>YrmzijxG^Z*uZ*mT;T}X
z#6^Wo%5TzA7_1OS122gMI&fBD4Q=>QVV#S;tFVC%(Wh_(mN=!bN%>Xu!$lDn;31Du
z<WS-ox-f!n(ll)JU?<T4t)^%(#>XKqy*&EKw?m&i(KyiW7B6`D(Ok*u8tJyucF#_0
zz@5sEjX74o>lIzkDdk<-Ihdr&1d>dcT}+&0GB}g@iDWJ-gCxl=(=VwqLC#V@J(^^L
zic_rF!XD0*lZ5&{;&d>>RU+e#molz5nzhm?+uCC_ltR8QnNG?zt)>29>OES98)Pw+
zOqL3$EEL08Z-RSb*>+FLwry)I!Bt-eGp;)2kUZUhH+YV+a}4sD>{{OsdX&_E>i@RX
zx5E6dMsFN-dTnK^|MgH`y+1AQqvb>J;(!n$)_4d)qvlAh6}68=Ew0tJ>$NRL=Tq&5
zAJsdLU-zR%XA7Fo4euzI7eTbCT%MnupN+(EyEP89#qrCAIGW@5Ya?_S@H6(~fz^FY
z4dpCr5P>LkArhb1Z@bHt>P$scD%FP-y|THMs=j!eGAnQHY^u&wAHJDsipBmZ8?vtV
zvrV!2pW5fUH<hC;P>26$|MfXZ8}4GMX~7>N#rtNTxz-(jtmx;fu>FB$e76d_-q1Fn
z3%D*ugS@wH*7*w_$-BG6`*}-mCQXno+~M+R<PyOqZ^Tw~u2@xQ*-nc@fMP-1P`W_t
N9{GvMKbiddeE{?64F&)J

diff --git a/layout/reftests/fonts/math/axis-height-2.otf b/layout/reftests/fonts/math/axis-height-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..0a71b5bddc7dad882acd9cd85ebb829c5d2d8ec7
GIT binary patch
literal 2000
zc%0Q$PiPcZ82`PQ*+~=EO_caA-7a%jHL2ZovN5HEc#xE(s4)gZ@F3`ruGy7rW|?d?
zdP)gB?V+@n(jHon9vi_@3YD_-;K75Ei%{rE4<cf~i*}c29e;1;WwYBf5RZMsoA3Ai
z|K5AwycwIA7{fL!K!-h&&06PHmcIcaX93i+*@@9h#i9Y2r^&}hk4=1{nHLU{p8>?#
zu``D=J8pJ=L2OZfVXEkqa6-Qa=qr>R&*z*^#dPO!>VD_^Fi(Mb#ng$Pb0+h}@_ff$
zBDCG+D_V5sOVDL1A*JT5Q_LlP{_8&Z1wgx0a_7qaA_iFBN7P#o(i9jT`r!NXox?A%
z&5*&cyysC*Gd1=Z`$*n_hH%hFlgv4TdHl!J3bYQ^csh8)Frwl)BJ}uHyG#Ddkcy`m
z5bZKfu%1TTe~mv_<)JW_7N%dfvD6A;xY3Xvz$t|Vw&N>>HP(JpVI939s<46WVqD<}
zy2R%So0Q+6r7&0_P6l2Q3-sVKg*9~H2ZePm_Ljm1dc>f@5m@59!Y1WkV+1ZrxC##i
zOe2pn*U*b8^pR#@qaR0zMrn187BhSt^3uzrpL{#?DG<#9BW~%cSD4P1t=_3VD`WQ`
zu}0l%g_#-08gadn>pA6uOFIYibeThn33H9aDJFz7Uzkhfb23PZ><0b1DjVc12h^iU
zE~q%onk@`*Zk{C64+c2ZSS7OVY&q+C(>W`Xwyhznr4;gmsZ2_)>22ztq~4=txIq?E
z$z<t(%0e-j^X9lGmTmW^ZQHiqCb;VBV8&Iad@N5l;0>Om>>Pu<CcD=6gB~UIANqf;
z_pLDhtI=CWlV020>VG}dSMM*#`)K13yf`3)h_xPq(5N|4??nAwQIBi&_w@Q6Bk@rC
z(U0nh@#}unNOYk6^5o%4r2(RCmCEYU>QW?*UpnJJR~*0Xh@(A@XFH+GfCt%+$F}x0
zwUo1=K?I`Eg-GtVU-eb0wZ*EaR%>^vdUba_U3>B>ZB}3Yx~sNWyYq6fEf)K`V#vB)
zFSW&1f9hWC+f|8nKpp<wqt}-uZMlo3rUMT|n)l7Hsdj37Ws5t0Pto_cVEY}*xVQzo
zfzURfYq%*!i+rGIHu(!4$v?M<kMfq@O`0TKyTj$v$|ZwM-if_PY+6-l*-eXNfMP-1
RP`XB&9{GvMKbiddy#d>I4g~-J

diff --git a/layout/reftests/fonts/math/fraction-1.otf b/layout/reftests/fonts/math/fraction-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..158082a94787b17ac53f22c53e5c159016b084f3
GIT binary patch
literal 1908
zc%0o;OH30%82)B=yFjT$O;G|BCyLL6vMuUC@t~NEF(42LQR8c^h1O8ES*n635{@M?
z@nE9yM7&8fCdPv?4JS_;Z+a9CMvWdd6pYq?c85m^#(H(OGynHL=bN3`X;*J=7pgG^
z6-K*h@`uyMJ_5cv0Pjt+xAST`t&v_JJ=}Su_qd{8I1A_@fSv9-)e_tABs4*olmAjY
zZDp`deF>;f$#yiEu&(?(Ssf+c3+e}wWKhoQ4TQf@Z%U@KBb5drR1DHknYKnUP`U{+
zF~2@!r4udnZ?}>@1}M>tJ)A9$V;`UiJ{(Mh0=I9R;TLP#zN1<b#qehHhx(OLwn``x
zQH~;%b6VZ9rKFLw+Z~~4b?h5_q})|rk$%gQ><e01l?c(Rma<k?0j7y1_vTW(>6c@;
zTtN_zmaIE*Qep-_auO>f?@6p;2R=!x!Oxl`_F+Bikyt1D2t_hYaO-fh1ZD`~n#6+6
z9f?((z<r4|gji5wA2@4~SSR~sw8KUQqi~SI0Fubk8g?U&JtSi=5T)JW=%lEd6fsDT
zMY_mxC{K(Q<)jD=0qu5X)JY8_vwU}a504qqeZ14YnHn6lc)RUnY{$x`Y>Ml5)8b2s
z%`^@A9V;%}&4j(5={mEnbckKT<rE=S90#edRmSt|CmeITw*r{<P}a1afdr3541SO=
zPe#iA=2){JTL!T{BH>_Ix;d2>6GU7oXrV9R3{xyOjA+C#3|>Y}c?!H9mOI`icFEN>
zQI<x{)p@b#jm6o;Gsg6_4r*!poBuy(swawLXvG=}X7u5MF;>0e)id!Ob`)w*Xkdk~
zQrMyvHfs|B);Oy?C<fHVp2=cBYxJY)dS6Q}w*&$eIcmNzrfR~#`Y;}E2%|ELcN?LK
zio0ls50&>VER!ic5ey1r+qUQObK`lI&(F`~)%>OfbMEsmQ_uf+Ry#L7Kl5X}A{bnl
z3gv2Z0Y4Vk{Oa)J8zD>XOyTikhDGQSY}5bs&Ayg$ZyB-oh(>?;rF*`vUBlhO)>XK5
zMGRp^FaPIr!iVXfU=ztEl8bk(cuF;KuLiIYb!hw}9WOFO5lt=%x^+G4qFnKae;d(%
E1E(D94*&oF

diff --git a/layout/reftests/fonts/math/fraction-2.otf b/layout/reftests/fonts/math/fraction-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..08b47f5db8a4b8aad2742fe7c3c0e88a753257a0
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)Fuszj}JErZ4<B;BMcQtLsBi-@&~rFc+ujcF5Ux^Ww&dMfmo
zf}RA6co1)jB8Uf(pchX{k9xBn1jVb;sA&9WcbbP(tXF3<^MC(yzS)_b3=9qqpcRu)
zVfI-Tzx({a2O!W6;H_m1_Mgw?G}6nY8~ytR4=VcZJAfVm*olGTUC9*>Bh!RA`Ol<s
zb{@;r7l8VRZ2L25``nKstqJlyrM@de2IZ9ALHINEXeL*fXf_F<X_SWMoIR0;a+Dww
z^Xp@FE^QibqNGm(N+R!!7b;WO0ce5`2NR*dwF|c<Pq+1cL8~T;VRp^?b@fuVW+)O-
zjv|zkT6@jX(8zhz8=-0K>@xzS+)!SUe$|)k6S`T82+>=rS-)2So)Js#&!za&*J8L_
zK^XU|*3CE~F+&hVi4~GF606vR4-#t#vZ%xXEN90g*2z9WkxUcZ4trSwGemGvVnOG+
z#3~Nqro<W|EG%&VoOMa8ll?6E;2@97aFN9bGAPg*wjzaXB$F_apxxo<r>H9wF-nh3
zy2x@VPmDI@WC@J{eNO(en;pp%_}0`mo-`9Xc)xQcJ34CfKF7^Fu3gAF6gTXprK*WB
znhL|Nof7UCVgF}&&VnahVwd(f#fcS15B0^$_@12}j#XCx%NZ+Jjysa($+*dTcx^IL
zcE*x1L3RnmhKPiVap~q%UQ7`8q@abNv^!3*+%yw$(=_=KYRXgKcSG)Yuh=C|*F;$w
zHBaZ2ia%D~Eu1l?FLqEH+u!{EK~sHEnM5}hSumpyAB?fqx>wJ{cX+tmhH?ih8%lY-
zT3(|~hgj!3<xVA}b{@N332B`{v|JkMDi*6C)KsJvFmSKU0G1ngu);vIf!8acii%t4
zNbFhKw@@R~cp?}S#x`s$mgc8QtW^3sS5ix>zghDie_DF!`{PyfQ(x!4Pc?<Z-|j_<
ztBRo@7S{Z7@9kM38}3Zu31W`L=@RVK|Mktjl5+bJVrPiP@ZZBWfAnLuwY9wZ8r~ju
z|AxEkVhA&O`9Gcz-b?=kt4T&lF5I=^Y1G8M8p2Anqw|ln{KyDJL_HMt>iX6NS@(#4
H8_|COHWls-

diff --git a/layout/reftests/fonts/math/fraction-3.otf b/layout/reftests/fonts/math/fraction-3.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..d02582a04306db68245b5aced05d13e1c1f854eb
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)Fuszj|C!=Uw1A?YTyBDFneVG*&dVksUJU1MybNjGexR8NH-
zQ}iZUJQZ(>B8Uf(ARas^JqliI4}!(3(x_<sXLs5rJ}_RL&CLJ(&-rF{b}~3LG>B$Q
zK!wp~n*8o_a{=(R0(fhhL;V+WIgRu(>EZqZLx&W7-yJ{?0qn%!@s7lrhoLFLocw2!
zIV+D<>I*=9M7D$Jly&agKy#dYPpR)slR-J9ZzlYadRsbI7;iKPp&?5{W6m1SLpe&2
ziTU+WE0>B#-n5fG0VwgjJyxhpVh^ARJ{(Mh0@p6yESzrX`GjUo6vOO>cblrEY>iMP
zq8vpiC$-iUOHCu^QFnx<wX%=!k#b9UN&0n9vJdEFO(H~ZTF&~p3h<0ra&Iohn|>vR
z%M}E1f7!YN0}?a%QIuFAIW4h@?RYP-20v?)*oW2Zn8Z5S$0?F&g4+={OJIf&E=ert
z+>ltsVceEjLx=?>_JOkwiFLA{MIUVBaRm-C7(p5ZTEi|R(M~b}195sg9Q_n^l_IkA
zSfq<Ahw{W|QBH=?D9~r;uQ-{Jbb;?mw)2D$-^2UutC?)p;(fN0w;ijHu_^Ano0eQo
zjG~i_j+GSdC}Hnsy3T?t9b%VqImL(-M>qA~mGL}XgcEM}Rsho;Ets}5lH!S&!Mpj&
zWTbRO6H!674r0SZ!oiqyb1E+;h`CbG!f?tNqgZYj@t9#4ypEdk6nH%>-*}IBORlbo
zvNUS0&MOsftjsT+F{c0Spw_m(`Tv8adZIER_V?EXGy3qs7;CQDdM3WZBjpy9H?wkB
zDQ{8B8?>nai_9x`DgiZeY^D;>B7QVo9_}a>mqDPRNX-|<y_PVrI*bQv!e|WR^;)Q+
z;!Zje`|JA_R>;(z2nL0*t=o#F#mN#Yl|Ijv)YAGd=HkM4Q!jmeyl!#w^W4|ThG6i^
zy-;yoG2qA2nqT(L%nDg^X9|xWb1X)eV2}Q<JNrt?-F3uH6OHqA)}>f&BVCaT9<H{#
z@38YH+*uVvn9=5cdqTLE{t4ETY$LgJ*NUfB6ZdKWYtf3x9~pU(A&O{oQP8dHS(jwh
JBmQkf{{aUj?hOC{

diff --git a/layout/reftests/fonts/math/fraction-4.otf b/layout/reftests/fonts/math/fraction-4.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..ac6945fbf946977ff1975ef9dad4279432fb0ec6
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vu)Fu){<(}7zVA63QaeudeC~%!YX2|VkjOIU1Qornr_%esh$cw
zrr=FbJc)Qw6hS<Q1VPY?;?av>JqSLom8KPq|Ljhiq*km~XEXDE|8u_CnVk$IlLKhR
z1XLJ(rpfO<Kllakg#o-b&1C<DTuvjsOnRh$fAWx`M}2@E0@%rc6Wxi`4?|OgIr-0~
za#kLz)E9vIh-?QkY3uxtqs?*hJ*B=oLk8uvzJc%z^^Q!gFy3eoLc<6RjX7&P59Js^
zCg#^itz0_6-^ECu0F-#%9xGHPu@le)9}Xr$fvNP%J7-#YzoA(Z#qehB$Mv;Rwniut
zQH~;%Q(CxcscYms=8n*`Fq;9bS-GyfBK@i-*;n+iCJ~}HEoLpP0z4y@+?z}Brmx0u
zxq=|>FIu<asKg9@6eU(j-jG<u7JQOegP(Os>_aO%F0oGbaf)P`;C95#5||-`ixLYu
z*CbYP7&j%>5Mn`zec-HHVx8>g&<7iNT!w=zhLJ&m*03EZbdpTKK%91mqo1O#P{as5
z7U?3(p*%5Kl#?Yi3iR3e%T9JUQ{dZEojhU0ck+JwN_J$#;(fN0w;ijHwJC1MO-n5%
zc8Mb}<X9=;?jr2{OxIa(r9<q}E~gl=;@CrdxiX$-7vY54y%oT;M+>Iy45xV_X7D|{
zIvFXux)NQ2><Wkt5(x)m(#@&7m>}j#K?{RvXN+RGVZ>vGVel2yl&8S!5xL{NVwYT9
z6J=@CT%A`c-dOptaK@Ov+(E5xfAjwbP4z@&0zFt}!Hhn9Fvgl|UOf}v;gNC+${ScY
zqLeqP<+a*WfJHwjw<`fPdi+);phf*?x-{5bEG~jTLy?*<f_p6ypf!RAt0QQP;B6aJ
zQE?j`iM=cP7OG_GPXvR)*rv_J((Gi3l}dBdCAG9>-kkmX)6`4fAGgm=&P{)xYzPMD
z?}du(#eg3RYksxw)*B(~?o8qFW17Y2671Fg_07JPa>oi{ZxD^4-_3!;%g1W#s<_tf
z?qSao+*1=nn9<As@r3X``X^XJvV-KpT`Qh?P28&iv>}Y>AK816A&Tg5QP8dHSr=r@
JBmQkf{{<v!?G69{

diff --git a/layout/reftests/fonts/math/fraction-5.otf b/layout/reftests/fonts/math/fraction-5.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..41233574f66703d56ece1e0bb73b55e3fbc77075
GIT binary patch
literal 1908
zc%0o;O=uHA7=5$5*|up+TS>KQ3`4Ej3QaeO^`P~jg+;{L7EAG<)HTK?(saW%O6#f6
zn-RPT7Ej_$Q3UZI5){Of;?bM72SMpoX{u=aW_Q{o{$Ra2yEEVWe&@~Z?Cjvk$RHXq
z3l&DcY4SVIk1PScHURHTb7bH`Hmi|dB0W5CXyk~ZM|^-D0@%sH6Fu>k2cfHkIr+~d
zvsMlp)E9vIkZgz3DeK&~<Bc)$J)yoYO$Oz(zK!rF>K*B9e!AWugt`eD>a*5#4$2Tg
zCg#^Ct!ygM{x(7SETF`4_Ef$+hrNI%_;4^03S1d`Hb2(X_Zf|vD2CUY-*2s!veiS8
zh;kI6oYLAVmYPP+A$NqPwXsj2H7hrim!x0wBwIp)HHZ+sVJ++DD!@}>$-TK0Z~96M
zmn#V3-kNn6j!VqoM?qqR<h;ZxcH)D?8vLw7Vjr5>u*5pqrzw(Yg4;1SOJIf&E=nxu
zT$fnIQQVYRLx=?>_JOk=iFLA{ML%rhFark}j3bRat)UZ1bdik1K#blF#{flLricl;
zEYd}mLwRDfC?`W`66m*cGfrkao#&m&E*>{xd-;HUIWsX~@qXLM*^ZUZ*c5l(O-rsN
zcB7Y!j+GSdZo=Mey3V{S9b%VqIYo&T$A0R+E8}^33CG>;tpKJynKx}`JjLTtgYV~+
z$w=w#j&}>P>mW8tBpgghH>dJqf~YG6EsUm|DT?KW5sMmz!Pik!?gFoe<s0u4Z^_j)
zQI<x{)p@z>jpfDFJ;wCkZPeQKH~)XoR8N#=LFdb_3ug4;gE7`v_2`-S4v&?ZP};^y
zVWqTPEp67W23TZKxm^yZk>OkAfEMwi;nHYNp|A!5bp>j^Fzz;mf#xvow}eq2#+!{$
zMaA8;B@V3bTd0t!-4P55W9>T%#pSsoD;8H4ifVDw7jyaJcT+EZebl-<x3chct}Yn-
zayL|HEd=~nUGvL>w_Xcbb7l&U9}6r>hhU%nuTS=slzY|@J5Myu|JfZlS{tivso-k6
z`wkO7;Y3x8_=nKL|Mr;hLHZMHBH2N5^{f?FttQUZ05+lxkw4P&B106>;i8~h*R!t5
Ks!RNBME?Q*Z|x2M

diff --git a/layout/reftests/fonts/math/fraction-6.otf b/layout/reftests/fonts/math/fraction-6.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..e483fbee0dfaf2d6f4586675d3e78529f9b5daf1
GIT binary patch
literal 1908
zc%0o;OK1~882)B=vrW^OR!OyLEQ3aEg{GUdKG1s5!lKfLVkruWt}$&QO*d?#R8NH-
z6e4&N6i?z!Q3UZI61?b1=}nKe2SL$erBTuN&+hb*QZZhg&CLJ(&-rF&cG5pE(2qJy
zK!wq5n*9FD!(RYj6M*-oIna9{o7G4!ksj$iFmOoGcfSSnFu+dqA8${rejL6|n3Ml(
zGHd0qN__>WPsnyKowCmV?5m5D?>Y5dX)-9M^^JsQsYlb<{J7sBgqjf={8?)}2jwV1
zCg#^it!%0@I=zSV2|$VG?6G`#5}kl1_;4^03S2vR^~;(1uCJ)mL@`XQ`><iDl+6!C
zBFa&Oa!PAjv{W>59(6}(S`(XvkCa==YtnCcl6^)8s}&)7?LyY_D!>b3$-TK0Z~Da;
zE>{r3!v*U$^hwMRKtW=K<ZX#nY{f^3H3V2xVjmjVF^P4uk5eSm1h*bHOJIgDE=nxu
z+>}_w5!{hjLzsmm_JOl@iFLA{LpN;Xa2XCV7)Ba-T0;wxXeF6|fjI3BM=wQPp@<QB
zEYd}mLwRDfC?`W`6zH~dmz~UTI?r2@tvq4GJ9)2tB{MQ&@owA6*^ZUZ*c3P9rX?2=
z+pvp_j+GSdHp1S|be(xuI>avJa*7cvj=j`ZD&u)}5>B|?TLDaaG;i9@aEd2l2H(pU
zCnIHNTcS;nt%BGfk#I03-JHsc31Y4kv@n=*#weB>Mm%O12Ct%~JOy5l$Q|zzyX5Mc
zC`+T}>bzX`#`4Vk8DsiN2eq>O&Ho=X)f43jbYO)AGy3qs7^_?I>Y4ZsdrI{vZDgg0
zQre`J)@j#+ta(PcR}QMp$L^McT5|xkmj>Glg#{3-DNyr8@Sr{dG(_-dbp-wh-mQTu
zDsHDEv9G#sVUbMbiC|C|+q|VvoSQ7NV)5H_Q7x|hZq9xBW$MKrPaEeZzfJ#`tO<p_
zKL{5Z3&8;9*Zg|_-6<g}?o8ncV4B6~6716d_07JKaz_=hw~5A36>+pj+dk2;Uhm=M
zHC$WAGTc#_&*<g<d`5Ub{S&Mu86`P?*NUf76ZdKmYtV$|KeF;7!xRy9QOK?9S?A@F
JNBrA}{u_y1?hOC{

diff --git a/layout/reftests/fonts/math/fraction-7.otf b/layout/reftests/fonts/math/fraction-7.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..1d9c97d1f2f6f9720e12f751d9244faf3b08622e
GIT binary patch
literal 1908
zc%0o;Pe>F|9RA+S?5OLuT5M{y$)n6NaGl-Fg3?0?Lxg6bNQa`PZF4tVXBoG!PKMBB
zgKk05DY_L!5FH|xPMr#Gb<BbwiEf6gV%zV{JpZg1ZP(t+d%y4Z_kC~X&71zg!G6?Y
z0xFCi)8voep7;UyngDz<&B4AanT$qyk@Rri(ZS=2e&_?BhX8h_f1o3_`FZFzVNU)F
ziHw!SCiN|#z98GNRMNV%bh0)|zSq<brpTb2({~V_rQVXt<i@KFLZ}*{p*mxYXQ7-T
z$i)2msFg`}wtnd*eF9LTS$iy3n#2J>6MQ(B2nB8p+?+mN*Yy*%nka^;#;@DgO4+KR
zNJKe`P|j*itCq4x&QtCPO>1Ja@R4#)c}MykPqOcbvl<bi*Q{i%uL8UwmfV|5@upvm
z;c^8*JYBK2;-th3e&i)qNZyxN#U6Z<Sc9LnNbEyBJ1wzJ_Hl}2n&8&!W(mv?!c~a{
zox2jNIDrQeYY4HR#6ED=A+b*Oi|B!kEUv>r8pB8-M{C%J1lmZ(U?56whog_8ZcxMs
zT^8vg%b`3mT9lI}Gz#?C+3QYvIF;l35^X$YL=W&j`$l?X#Ns`+leHZym$oVHvYVDz
zNo>a<GCEd5xZ4SPx9K`_u5^f9(&ZE(Rvd?^Z&b$fbP|ra-CF@ndo*X-&Tx{)A_hOq
zS0^K-vpv=>$W}mXh)6gXlWtDs#RL&o3R)OSI%5>e4I>&c41-rtQ|<z<hvggZ5^u@X
zHBpvE&DD9S<c+1z%X^IJ8*S9`_Ba23&{R*9CJ@I43ug4;gE3aS=Fv0p9rhOMP~5?a
zVWqfJEjDVm1FZS8@~9M0n@>M11+->AYOW1+<nt>aP?e|V3*$*$7^n~9+2$~+!}z!b
zs;Ib^w#1RjzJ*mX<vW5wVQkm#d|_^~zzT)=>4I8lSTN^iewlh<@#WUJ$@%HU$*N#*
z;YldJH6QR}dCl*-A5IBbc4i8XAJZ&ChhUffuTS>9l=~})y-zeQR}dHXgtpDYtuy5{
zTz`BWj+f^%diYDP2zS$;pn+ry$>p<FT;-ZLR|D9BCN%$%l@}SJh!z(G-MXH2S+2Rn
H-$wM`T5awP

diff --git a/layout/reftests/fonts/math/fraction-8.otf b/layout/reftests/fonts/math/fraction-8.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..5bee8039c59de323d0f928b004f5b4c6b4cba58a
GIT binary patch
literal 1908
zc%0o;Pe>F|9RA+S?5OLumaJvD%A>3-aGhPtqU=z@5Z0=ZNQa`PZFM(XXBoG!PJ-Q5
z=oS>6q+3x0(IH~#R2QRT#}o>Rpi|*i)b@KbPj@$r?An`o@Av)wzVFSvc{4aXJcxQs
zLxs_2n*8pIW1j$DGk`ayIUK*3$!Me(Ne{;l4<A+Z)_s5;0@$g+lU=b54@0wrIr+~e
zGFBGr)aQWuh-^nvN$bLof%+)<o>K2gkwH15w-EkJy*-u5P1PENP%}<LZN{3)LKz~+
z#Qge%l}Yw=ygfqtG@wMY_GGR!gFS#I_;4^03S5gnY&_f0`vvuyD27*?-fgLrveiP7
zh;kI6oYtDlma0b1A$NqPHM7s~k#bX+C;hr7*++D<IuWARtz`XP1$ag*xi^>MO<#`T
zas@%$U$O4MfW!=b<Rw-}-jZ0wcD$EZgP*la?8AC?LSmilQxwTG!R@%4B``w>mn0T+
zZb+=6AGame5Mn`zec-H1Vx8>g(FYq@T!Di$#*jje*3f|jc9D$1K$PANN1URrQp7l2
z7U?3(p*%5Kl#?bj0rc6~D^7YWmE#?WT|8z)_wcxVH9bCV@jlzh+K!b=+Y~qIrX^Mq
zJF%aPj+GGZPQu=8y3U*{9b%VsIYo#S#{ufAmGL}#3CG;-tpKJykuz;)EXiXLgCF4K
z$w=AT8S4~e*FbE9NI003ZcgRJ1QAyXS{O+>lN8GhBN{ObgRh~c+y!0_%QxOD-jb_p
zqAZP?tMgLH8%vAJdyMI;ZPe=aH~)XoR8N$q(T!CW%;>`hW30a7(KGQK9xpba*usio
zrP!(#H)*p0*0!kJDFxKF6LY12*5*gu<&my@egy<-^3;4`+-nE}>%(}kA&lBEUN=G&
z6?f8>IJmZNp-iTFM=&UiZQYhHEX@>Hq40H~pcXcMGnYR6H1)#w$4yH!Ul+d5)C7ay
z?uGJA`G6nGYo0$e_e#jBGgEl{SYQ!41bg*=eX=j5+`Wd_TSQ}YbyuLjLh1H|wz-Te
zYq+-V-*9CdVMY)C#}mSb=ufbbWIM^_vsPTynmAVjXhbvG{>a{o3{gb8i-K-l&$=ut
JF7dY!{TI{Q><<6{

diff --git a/layout/reftests/fonts/math/fraction-9.otf b/layout/reftests/fonts/math/fraction-9.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..b5c979bfdcbc07de5d3dfadc2fb3d89c35d88c13
GIT binary patch
literal 1908
zc%0o;O-vI(7=5$5U7*wgrYLG96Ga6R%C?|J#e<Tp#_$^n@u1PQ7Ft8uW~l}|5jobx
zn~BDg@utz37!SrYo{R^LM~~t`qw(McL(yRUW_O^iLB*@HJM+Eoci!yI&JGL@51<w^
zP+|0#Ccpcl_Y2@_0`S%}hx;z1(;Ddo(!+g+hmR@x)_s5;0@%rc6CJUJhoP&4Ir-1V
z(^dxS)aQWuh-^oa3G4h)e{Ga}PpR)sl0iAGZy`KSy(O8>PE{L(P&H0Nb=sQBKp7;+
z#Qge%l}_y2{oyF-Gk_A!*pu1fEV=+q@Zn%06u5Hqu70Mj`zvZSQ4Fs)zTaFfWvhlF
z5#=aCIi)p~EESEMgYF1TYhv^8k#a+MN%}QUvd`#bH6lc>S;_jf3h<0ra&Ioho4ypo
z<qCqhzhd2qeu)|U$Vse_yeYAY9r!4*20v?&*oS&HB(YBRDT-v8;MVJA3Cs|}MTrHS
z>k_Ltj$0CI2(h5VK5*6{u}=1L=z)z4rr{ukF(i?tHMAm*Hj*(Ih|=5P=%c916fsVh
zMY_mxC{K(Q<)jEr06lhQ+DVNiv%EFl#$!gbi}%@=Q{&?n@3EbX?O55AO>v`cT6`t3
z9s9}XSaIQQC+yv(>&&{+A$AFuQ-oM?9H72h8PBtaaLn!A3Sin3S<`mL5<C_$_yJy;
zjFdg?v35ar4a7!>go8=x=2Tux5OJlTg^`3aNwM58q7lO|_!?@;UEuYweB<5XExEcT
z%F?L0IxiNzvG{Izk1>6<jau3M=Kl|x>WShEI<d-v8GZO*jMbJsdM3WZ-a;J;TUa5i
z6t=2`joQ@!YksHPDF)Q$q1(lP*6c^krIC(YZUqFYa@2fb+^Y)%^<g|{2%|cTH|wE_
zio0k_99-MCP$E;gBN!CMwr$Vl7iRM;pI@BItN9Jz%!N-sOg;boapS`5;@tPys$lTj
zy-=<(7w}_w%`Xq#el29hnJGMe%&`a^g5CPRKG|1N?p{OeO`<XS=a9g08ah3!Z7SjN
z8m_JL7hE1kn9;*udP4XR{RuXZY$3UP){3iA6X$9G>(PYf-%|4;Lln{CqM%#Xvo6cB
JOZ;s_{|T<|><<6{

diff --git a/layout/reftests/fonts/math/generate.py b/layout/reftests/fonts/math/generate.py
--- a/layout/reftests/fonts/math/generate.py
+++ b/layout/reftests/fonts/math/generate.py
@@ -51,16 +51,25 @@ def saveMathFont(aFont):
     aFont.os2_typodescent = aFont.os2_windescent = em/2
     aFont.hhea_ascent_add = aFont.hhea_descent_add = 0
     aFont.os2_typoascent_add = aFont.os2_typodescent_add = 0
     aFont.os2_winascent_add = aFont.os2_windescent_add = 0
     aFont.os2_use_typo_metrics = True
     aFont.generate(aFont.fontname + ".otf")
     print(" done.")
 
+def createSquareGlyph(aFont, aCodePoint):
+    g = aFont.createChar(aCodePoint)
+    p = g.glyphPen()
+    p.moveTo(0, 0)
+    p.lineTo(em, 0)
+    p.lineTo(em, em)
+    p.lineTo(0, em)
+    p.closePath();
+
 ################################################################################
 # Glyph variants and constructions
 f = newMathFont("stretchy")
 nvariants = 3
 
 # Draw boxes for the size variants and glues
 for i in range(0, nvariants):
     s = em * (i + 1)
@@ -223,8 +232,187 @@ for i in [1, 2, 6, 8, 10]:
     p.lineTo(0, s)
     p.closePath();
     g.width = s
 
 f[largeop[0]].verticalVariants = "L7 L8 L9"
 f[largeop[1]].verticalVariants = "L8"
 
 saveMathFont(f)
+
+################################################################################
+# Testing AxisHeight
+f = newMathFont("axis-height-1")
+f.math.AxisHeight = 0
+createSquareGlyph(f, ord("+"))
+saveMathFont(f)
+
+f = newMathFont("axis-height-2")
+f.math.AxisHeight = 20 * em
+createSquareGlyph(f, ord("+"))
+saveMathFont(f)
+
+################################################################################
+# Testing Fraction Parameters
+f = newMathFont("fraction-1")
+f.math.FractionRuleThickness = 20 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-2")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 9.5 * em
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-3")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 9.5 * em
+saveMathFont(f)
+
+f = newMathFont("fraction-4")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 3 * em
+f.math.FractionDenominatorShiftDown = 0
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-5")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorShiftUp = 0
+f.math.FractionDenominatorShiftDown = 3 * em
+f.math.FractionNumeratorGapMin = 0
+f.math.FractionDenominatorGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-6")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 9.5 * em
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-7")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 9.5 * em
+saveMathFont(f)
+
+f = newMathFont("fraction-8")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 3 * em
+f.math.FractionDenominatorDisplayStyleShiftDown = 0
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("fraction-9")
+f.math.FractionRuleThickness = 1 * em
+f.math.FractionNumeratorDisplayStyleShiftUp = 0
+f.math.FractionDenominatorDisplayStyleShiftDown = 3 * em
+f.math.FractionNumeratorDisplayStyleGapMin = 0
+f.math.FractionDenominatorDisplayStyleGapMin = 0
+saveMathFont(f)
+
+################################################################################
+# Testing Stack Parameters
+f = newMathFont("stack-1")
+f.math.StackTopShiftUp = 0
+f.math.StackBottomShiftDown = 0
+f.math.StackGapMin = 20 * em
+saveMathFont(f)
+
+f = newMathFont("stack-2")
+f.math.StackTopShiftUp = 3 * em
+f.math.StackBottomShiftDown = 0
+f.math.StackGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-3")
+f.math.StackTopShiftUp = 0
+f.math.StackBottomShiftDown = 3 * em
+f.math.StackGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-4")
+f.math.StackTopDisplayStyleShiftUp = 0
+f.math.StackBottomDisplayStyleShiftDown = 0
+f.math.StackDisplayStyleGapMin = 20 * em
+saveMathFont(f)
+
+f = newMathFont("stack-5")
+f.math.StackTopDisplayStyleShiftUp = 3 * em
+f.math.StackBottomDisplayStyleShiftDown = 0
+f.math.StackDisplayStyleGapMin = 0
+saveMathFont(f)
+
+f = newMathFont("stack-6")
+f.math.StackTopDisplayStyleShiftUp = 0
+f.math.StackBottomDisplayStyleShiftDown = 3 * em
+f.math.StackDisplayStyleGapMin = 0
+saveMathFont(f)
+
+################################################################################
+# Testing Radical Parameters
+f = newMathFont("radical-1")
+f.math.RadicalExtraAscender = 0
+f.math.RadicalRuleThickness = 5 * em
+f.math.RadicalVerticalGap = 0
+createSquareGlyph(f, 0x221a)
+saveMathFont(f)
+
+f = newMathFont("radical-2")
+f.math.RadicalExtraAscender = 7 * em
+f.math.RadicalRuleThickness = 1 * em
+f.math.RadicalVerticalGap = 0
+createSquareGlyph(f, 0x221a)
+saveMathFont(f)
+
+f = newMathFont("radical-3")
+f.math.RadicalExtraAscender = 0
+f.math.RadicalRuleThickness = 1 * em
+f.math.RadicalVerticalGap = 3 * em
+createSquareGlyph(f, 0x221a)
+saveMathFont(f)
+
+f = newMathFont("radical-4")
+f.math.RadicalExtraAscender = 0
+f.math.RadicalRuleThickness = 1 * em
+f.math.RadicalDisplayStyleVerticalGap = 9 * em
+createSquareGlyph(f, 0x221a)
+saveMathFont(f)
+
+f = newMathFont("radical-5")
+f.math.RadicalExtraAscender = 0
+f.math.RadicalRuleThickness = 1 * em
+f.math.RadicalVerticalGap = 0
+f.math.RadicalDegreeBottomRaisePercent = 25
+createSquareGlyph(f, 0x221a)
+saveMathFont(f)
+
+f = newMathFont("radical-6")
+f.math.RadicalKernBeforeDegree = 5 * em
+f.math.RadicalKernAfterDegree = 0
+createSquareGlyph(f, 0x221a)
+saveMathFont(f)
+
+f = newMathFont("radical-7")
+f.math.RadicalKernBeforeDegree = 0
+f.math.RadicalKernAfterDegree = 7 * em
+createSquareGlyph(f, 0x221a)
+saveMathFont(f)
diff --git a/layout/reftests/fonts/math/radical-1.otf b/layout/reftests/fonts/math/radical-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..ebe86528cfc28385abd763c4b0d1e9209d8ed2f0
GIT binary patch
literal 1932
zc%02u&1)M+6#vccXl=<tPK@I?VJikB2RmS8EjuZg1Y8`1aqBuE#v~9(7Fn?rB(GR2
zpS>7-C`E@BLTKG%=%I(Y(2EbDh#qrr$zPDPCWN*$mp~E;=R<k3JCd!K)b1^BHT!<=
z&HEb7o7t)9=_#~f5jw1~WK!H6UjGINbOLyuOioW;&gVH`gh@6hKbaoajGj{@_W|te
z)R`lRy-$x72@9IPn9AFQlYQ$C0sTkPO=QycESqbept)aZ9LtcxxMt{tpV5eA^2O_+
zZbE2Tq*pj^UoSwX@L*DF%-i|&?LW+3l4)M+EjSCs+7gBUF8u|VGzHqa^zSaTAAgQE
zE`#Cz{>KNma(;jxAl3>EK9P?mh4Y;9)c&GbhGwD~PkC=}9%j!FAdh8jjpVO=&i=&^
z3(7d&dKz&t+7#zEh@OLfF3nHBnMtS>MDTM%dkCK^%n-y^3Two_Rai$1j}+zzGE?CI
z_ONk<4btbyl5wgKpLt#qGj!mJ!m^xO3hNlhvceo4tX1Iv1Usa#LHctTgM$KYz(p2w
z$e>7T=tBzq#1pVEh+#sLWOb7)a`f0FOD~uF<l82nETMT|%qiS(vvZlE=u7pBgf%!U
zCY_tvT+S9_j$3eCyO?#zPCCt!Q;K*F1C#`=J)2G0xdDRyFX@FWdfcVb(q2JvDoJ33
z#`YM#{wU#uH~iv}bmogm$DK=yMBEZ1qLGR4(SgK(EOV!lW+=Uj1+`8=p=I#6$7Mm7
zNxKWQG+|kTam%vAP66vZ>5cl1pOib}$(;5;?m8z~lO0#9$^MeOw*KJn&7NZhwzc}Z
zwA1_tK-$hG|4Hh^))wVmvYi+mdN9U9n>)bd5&X2;j;hJ3A8FO7Ufs{5>)H>supT{q
zrxxbX5Q0}{j+9Cb5N;`zHdZ!P0w#WGH-SASR`;3+nt0LyE(5kwPkf9~m1cLxp;1#)
zdocDTbjD)6)~o(fxw2Gd<#Od-Sub~0<CTA2#f|dI)qRzv%DtCMEs@BJ5|@R&S!s!E
z{M5P8zpoSy)t64RcH+)`$(!y`ITOO4EKV2WapV8~<G(9@co(+cQyG_bVK?O4dc2Oe
z#Awpjv7*i|d``C~Uf(5fg7%_|c#L@c{$<_{ZIxm)!gPmrBl_N|e9KO<h<PaD#r3sy
OzU7gvEWbkX%k>uRwfG4D

diff --git a/layout/reftests/fonts/math/radical-2.otf b/layout/reftests/fonts/math/radical-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..db9217dd550ac2d5c6973b9ae597e677c5ddb421
GIT binary patch
literal 1932
zc%02u&1)M+6#vccXl*H~92>{^U@L~A1iK(*EjtdF1QHyCN$WbH#-vba7g@0sB(GSj
z`S8i$Lnt~lkV8I>A%`5|KrT6iB6`drC4WInoe$cQTmnfYY}e|W-H~j?BzA6{)$IGd
zH}7lo-pr0qOpId(=ApwHNu|WYp{G}XKsSK5sno>Sxk7;hMwobW?D)i}W+ZMB-wUua
z<6j?4cD^1e5f-%meY#*5PxLPR4(NACb~2l>r`UAINm~1v=1`Ud#sxzs{Dx*MTPR%&
z?IDD=d3uEl_QfLfQv{im8Z&kwbA2f)W6`>{zv#@C>I)bExU?5wQkAm(<oVin9Y@|`
z2ba$9WcQ1G8!6w*_Y!G`27i!^CYf(J#i{>Es|>A!ay;d|!FiayL4Yi7Xpf2i$*1fk
z23Sz~@%Gd7i(@T*eu4OGpC3!}!>>mYY6lVAYf2B`D}@<?_)%ev=rx6P#PCdEjvzA?
z4qzu6RoEbTfixMX4DqFBB{4%6eo$DZb5&s-qqw0kM;B{XH~_&8C~T1Y8;rm~5tra1
zhiPO{qCNB?jXt7DSm?(fp)t~$BaJ*gHu2KRB|G`H$tFi=1{iUQm)zWRwj_GfeIjY~
z4~j8oE|<^SV#INaj%$~44(UmwDKbhE%_B~M;M!BUw4IL=^nWSOWyzy1rIzs$N>EAy
z!!$Sh@a2a*9B(F%lrvLGIqq~uBomex7R^Y655<#lndVk0O;UIlvudA$TubK(kIIBF
znQ>=nYr?Yn6P9I(tsFLb(wmKnpOBUDcuqBtRp-QOvg7J?*<X^@mwx+ez2}&LO|Aa!
z*lPWMFtn{zJ~-5gt<TH5Wb<Hj=)o8Ztyh4_BltzF12vP?KGkYby|$Z2m$cjUupT{q
zs~+aj5Q66?50=YK5N<1%mlu~8119cwn7~dG4?0Z*O}y#?mk!&hCl2G73bVcA(9Ef&
zJs7(Tow3+{YqhUjsV-DlrBZ!V(JMW*MD_30gi%>}u&cUIeYCRB7K!{*<}$Ih#kR=u
z-R|YSUFC47v2_}ckKTGBY0Et-S3>xMCFo*2VtnjB{;Q&&Z$p>9FYN3#^agxgk2dfI
zA1(3*RzrRd%)1na%JT0+5*(#k^bm~^ZQQ@itI$R+Ml(!z=pIDho0YHGO&T!|MLfU0
Qv_UsKvX$jmNPfBg17uM82LJ#7

diff --git a/layout/reftests/fonts/math/radical-3.otf b/layout/reftests/fonts/math/radical-3.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..d2d9ee2e811e2aaedc6a3a09926e65eda6674f82
GIT binary patch
literal 1932
zc%02u&2JM&6#vcccoUnI15qFW8EaG-l(dSoaY#T2Bv2wNN}C2m6j7;CyK>yv$j(|D
zw@o-j$^juCsMJG6xgic5NTpslAY}E(fr`JNRimhC5nPY}Tj68-W_RqwrI2vztY_cv
zea;)dH?vdI(^J@mW$3U*(`j+%*!p)ss0+Zebb5O7Lb1pJ!z4a7d3t(WGvddH?*-WT
zsdEFVJx@l;gazrp%oOd?Snt~JfPRx?6S=HC%jP;JNOza!NR9-?w}wvmDa}N#SYC|u
z5JKBBz09J$Sb~0rAd^yK-Y#aZt&5L{C%ty4<SdlE6$}Af`U@~=3V0#!?iU>=o?#c4
z!SJB_&jVX2-_Q3GX@`bjkdG#r&pEB*{Y6@a)<HR*@!#OwWKR(ykE_~!;;#ghJ;D$R
z%Q*ginsITeCC)Dp9~=nQ(t_nTR}yLmQT)`D9>%8%GlX$jVU6ey3hPK<U15$eizyt!
zZZ@v4LGmJ5GEN!d6W>c>hE9B~uuSKBg>{VMs=^$dtX<&{1Usy-LGsTq3I`=D!9^Z(
z$e~Po=tTy7L{qRZh$Dn1$?76m6zH*umtHRU$+t~Dc|!BRs8d>U^K-ef=*{$rlr?xn
zOgb0yg@P?c9k=ATb~*2mophQdrwq{o`eg&S_G~_57y1bXzqB8+>{FLg%lZi=DJ6m9
zG~bL7$cG81{23&Vv@>5$JMLUoq>`36E}AP59_~-|%QUx3X@-_}v7q)TD6|Zo^r=h;
zGg)_mwk9lVFlkwq*e+nBC;i!|_?WDW&vUAQtU4!NlO5-IvcDwt)_(hYv*(zBH(LGQ
zV>|u-U})Q$ymP1%>n&sGztoHlJs4w=%?dDi1V65KpdMrOgIYbV*SmRqO}pWldi?Bl
z&*bq4!r#mcR4PqiwpA({s~fAK7=G@E0lQ<ky(fln439g(Wx#goiK95Bmf6{HXy(+?
z9*kXr&RF7*^|G&0t*um9wOYGZ)vNpJ$=bu0Nu&DW_TJh`?cR%(wrKQuh0DZVueL=u
zZgp++?X8%R#@1=vKY9Iuq%HTT)I{(HOVY)7!g$|*{8vRk+=1<nl*U&(up0_&ecHfV
zVzkH=HYWnL|2?2Vw<liRA#jpvv5#niXyg86eucJj37RI|p*@JdHLJj~i!2g8iu!Q_
QX@hQgWGl<Bko<D}1JQW;2mk;8

diff --git a/layout/reftests/fonts/math/radical-4.otf b/layout/reftests/fonts/math/radical-4.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..d5b99ccc9a106a54aa807f713f6906327a8e5ff5
GIT binary patch
literal 1932
zc%02u&1)M+6#vccXl*G%PK@)3Du$p0J78rkCoY%-QXGUy>pG>zG*D<4S+!IouUM;X
zl9R!QQgmpchmsz82tD*r7kbGd6w#v(DftUhYSPe__EJb9;e4pS*<Hz2O>6hoS-pL~
z_vU?#=FRNv+}teoVFf1asa#Iop8WX}ATk8tQ7$((^KPXg0V_^9IrGxov|&v=r#uXZ
zH)dZyojvg9M2%Q+{_T9lsa_o3_z^I_qV7_$;4Fy6flHkGjx<rE!ur56i64^E#Y*jJ
z><AJ1R``lnoU2usmkEW|T1!r)@Wq4U8OoeDPE_6HT6-1afYkm9LYo4uXX~fl8aVd|
z`=kzryN4ef+s@@td6cXl27*B!Lkn+8=4t=JS%Kcc8ZY~ANEsIo5uwKo;|}GI11^5Y
zxQOaF{(8D`aiJ&9_fW@=1-XnM{Z=Lwt{{PLy4sU?HN*l@d=z4X{Id|7NaKEpC88o3
z;t2MO=@47gS7<3DE5s|lm&O8vcrV1doKHh+Vj4F>EHNnhLmYt;Cqryee+5%;QN=ZQ
zC}9yr)VPLW<S{~?g^e+sA)2Apby}49IFz-QM?d{`=u;wE0;b&RHLtW-tf}Grh|1by
zXVi>)y;LqcYRdJhuIJQBF733_0-f^YWsEWfJZGVlcgmxL!7t~BtohtyX$8Na3`<g&
zB<+k5=+6>oeF}<4&RweITyL?UvKd=Vs%|FYv!mHjUFL2j%`?4+<#3&fp>^<#&vikV
zFL=vbnzHS&jBVR$w}73V^r^Gs7xm8gvg97<U6+&%-Er-<?k~;T8~1+Q>N#OyN2~vR
z>^A>D7{=}<|2o1G+g{Ok$<85o=plrNZS8>2NATs=09r}WdckO=%+_I<+AzLs$IaAh
zH`{TUiXr;`{ONkV3*vqC`sUi^S|o{Y2a>@4ByJr@BAUb>gOEC4KYQXuTnN+b?KpI6
z>S+%lK7=Vm`h@*-q~2(*HbkS*TyL0-L#<5nx2GAa@#NOQ=4x~O$!cFB@whH^Vb9n4
z5}RKSZH^qQ$77wPbKE(9^RDJS_o$wU;U|&d#dyy8umAWDAwRVT+s|3XJA1Gj4{Uwj
z!P{c==*PDxeNTT80yEy8cy^oMJon-dd78X){|bMHwo7SJoOkFEr2et0z;cKdX&)v0
SxPi9Aw>`R*^;bxLx&8uF5&Q-K

diff --git a/layout/reftests/fonts/math/radical-5.otf b/layout/reftests/fonts/math/radical-5.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..362d9a81110faeddc887eed648ec8b3a993b1a9b
GIT binary patch
literal 1932
zc%02u&1)M+6#vccXl*Hr92<YdsA33mume`s@<+kAkm4XrQpX7~riDVg$cm*RdBs|7
zotz9llthOXdMN3wp@$yoKrT6iAbJcWA%8(aObAIxE-6VQoTTcT-H~j?w03WOtJ(K^
zZ{B<JM(@q+?A+We_F)w|tf^#DT%UaO0}$v0@G6;{oB1lA=YV079GUreZdx<iZ;?Cz
zuuo^t97(jl7%vhQH2-BPZx@aYY}^O*-$-{nleQPwV%u?=yFp_-Lki<tLnr)_Ml6#r
zu7r9Cp=Fg`X5L;YKtDy0Nv*MD=hMGDjt!Gc^ICtwSuWPrFamJtFTkWJ@aJpu;umd`
zudt8HV7S}!sBb&x2lxSEt<c~T`Djx3oYOkB$27~(OqAm(?+wmP_7VZ|xTM`C`Fo$U
zXBc5Y8OPgCBQB0M#rXr`V4uI1<}bgsl2AJc<4Qw&2qzV02;zdm8u6bL))B))g*k#O
zqHqBF*|fq2>GNdCIAw@WJTHkEI`Fl^GMyh4)-jDs3UhR@R)qr)?2y6+=|961929U4
zF0xoe21VM#08$tvo`8j6j1rn5tMg=$qsJy$db#8$-!}PV2`vFrPT`!JUCb24Kx$AV
ztl?2H<DAdta<-Uq+=AoU#jHbi(rJO5Qp9r@!WgOSg>1^s4H5KzNiSs4<1VF^_7aLy
zN&*u!cE<4aV}ujl@RLW<St=$ScQGvzaZ5~y#!7_8h7v<E&D~O(r{!HNt9=RzErZ8B
zE)&9h+Fhot3CkLeTb3nu3s~<-Z`3P(OjgE|In_W`os+D|j;qyVe@R~3xc6kM=a_*V
zt^PjkHvc~$ZFiG@C3RwJtMV?{NsJCX7-ONW3NU#DPgL7bjj-wmS~aRydw6t1`?Y53
z(bJb}CXa>?{AT`0snh^wOR2QEzPTQV;A&e0*dM{Q_6ULzJnsOP0b8jjKEzSA%-)Ve
zBd4bJVC*~SjK%t`w}Yi}Wv$H0<;u;nUhb~OD^K6Xjq;moU6r-U%{OZ;;qdDcmx=wg
z-V)yYy>oN0t7L}iTPM2x(dE06H{GLhCWHqpP8Z{(@n8S(JBlCPgYD0h#@RjCjrg`6
zuj6eon)G$7$on1;(d~(M*9r7dExL)vh}Z95=2d9B6r*9%9omcNKW61yc9KQRLt!tj
RudVZKk8EZ66_Q`BzX8ZZ`Un63

diff --git a/layout/reftests/fonts/math/radical-6.otf b/layout/reftests/fonts/math/radical-6.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..7827d677be472e3272d5fe4aaec70b4ae2da3d1b
GIT binary patch
literal 1932
zc%02u&ube;6#iy+w6+u>$HsPkpok$+j2*DNmK_&DQW6}5N#i)B#<Zo-EV5!LNM5m4
z+9bUgd?-bS7J3NDG33xg9mpkzQbdnAq~tGXh!fJr#83)$C2SMr&F)B+Vp==5%xd=g
z-kbN{ywSXwotT`Qz#hy)hdG)^h+jVZ^9R7!31BUem>j>7%W=R6k{ljCGdZUDjyxr~
z7hs=Gd@>Mk|7WB?T+sNXWX{T;?Ol2T=s%I}Tsmb<vzfMYH1;d?ku)icuMM5}D)neO
zSGX3~PYf;d^a|#zYkBAwi884*X02T6?sCsC$uzDV&D(Q@>H>xUF8u|VGzC`ve)jp7
zZ70{Ths$7iyzj-qM&t+h0fJU&@EZAOQuu<?Jk`Hwl%cs%ju+iGI1jQ__{igy_K4)~
zJ!G#i#QZXjyPkSnoNkKq8^qy*-dvhD{nkuEtssPZb!`tWD9+%=cZzF-Hx<_r#dF0u
z{4A`v4|~~|;s)t+WXU*Xi1V(O<P06Ss<=$&N5yrF;g;eY9jsMx9|Y@B+#vmD7=?{I
zuERkFGf1OAYv@H1eS~qC7{oBKak9EW7Fl{MlBJhJe)4URPlnhmFly(oJDHhuLG&j3
zMBE%47UTAfOg3wYQQOJej#bFmWG9`b$tg*gML$MJWld+2R<@t0_e;1T3obg8TFOl*
zMkxuLpuRnZr$0_S?shMEB<$Hj!ggj-A|5lv2~nSk`0@UDzf5zdl%{BU2Xktjf<nvS
zF&AY*m`XWwv@~IwgE7-I#ZCchHR<-+j-Qn~<I0@&K<+vxS(6o4t;+h6SY7(#<yOrx
z1KUdd?Y7hSd(gC<P5!s36I-2^cggm~=+J{P7TDSWCXe7pl{Qquta3=JMD)r&9$C`v
zR)c!v<2%(Lj|AZVYHFZZtdn3%vADjtzUT|%ep?vW8^(k7F#KVxbb!l%tyB{q;Ix`%
zcgLZgQ&V{`_APYAqDRfmzGA7oP-3N0`C&;fbys5L<;|E;+IY}aUMN4@SZE1_{w;Eu
z*z3iX(E87v>wR6tV4${iYL8Ccc`UK%9+e{jJY_Mu7*87S`j7vv@YpVFZ&MnVcVRc=
z*}7Qc4KbSZLk+#bzw;Z#Ptjg<6GjPZ_b+pIs8Nbi57HgFACdpe%Cqbwi>S*&Zd^}W
O!-hweviu6kFV`Ci;`#^x

diff --git a/layout/reftests/fonts/math/radical-7.otf b/layout/reftests/fonts/math/radical-7.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..fb434777b57f1513191587a5232fda79d03860aa
GIT binary patch
literal 1932
zc%02u&1(};5dXd1mu(Y6s-=Ds!$YE^V&gXT14N-x2}P|{EJZ=kC5=ra>4t6mJQaEn
z$wASB=urecSiy@2k)Ssb#lJwYh*r^y(3()iIB$28CKheIIh)z}&Agd;^YZ4s?H?HE
z#}bS|h29g7i$~p4R{&2NfSGuFpzl;R%K^<#da!TzK(FH2^px}nz>f4E-W*%@bz7dW
zpz#xltdZLjnS2ANcgeOll{ALfaLZmAdrZ77MF#DxrV^ee4yUsDbG}uC&@@Ibf7Upc
zgL;r4lU8lS$R_W6j%+8L#+CIsb2MKWM;E|lya1D~z=x^lSC6;soWT+<li}6M_iO4U
zU(HvOXodoZC`OUWF;4STrf8I*k*LOl_8Xl0*)%*9aYK1Q`ejG5&*)-ana5sFEibwo
z@;rf9x5k-Eai*V}Nw_Nr;C{`z0S8>n;Kd~uD<rSGSVb7`T+HERK^J?ll=Zq;BYT!S
z8K(-d-;R=)p%tfHEX%p(Vimo(;bM+f*6d;r1l!<ZjqFF!0~0x%hlMnTkwTu<5J3X%
zBxBIgi7kZs$m;@mWau$Smr)kQ$+tl<X+k4FkC{7frH4~_5lOU*nBKWX^qCjZnT#QN
zOe<$vMm}wlp9~tJpajVbIzSC!8AIuWk?A1l{Ni@Xye%y%Eom1NrIG}85YNxy*tZgn
z+3XaLxH*!Ko7Qkr#G<;`A!;)b-r5oCkYz4Z(jZN5Vbooxpwu#X)RwX!3?{8nTAI-H
z&Zw^IVxff9p0v5T<9p=J*gB^@kh{)FS7gUkDzd+%tW3WCIM;Jb!@O4iofaDZ4@g<q
z<*($P*vgo^OXd@!Ll4H7Z*B*eJc9emEhq<Bd96|ospXYCG^yOK_|?#%TNOVK`QSY>
zxVccM0e@4WFgr0j;R)hFOAuHZ#KUDlc!T)T3N8~iQ%`J1w>!<^jzg`chW23WB2>o0
z>-8V)g<@&E$cn|%v!YsDQI3{A{fKJC?+=%k#!Jt>k2eJZ-wIq7_H&{sFnh0UwtacQ
z@2f7I=*6yEucU0aN9BkQZ&{Qs#+}-~{^KuQxp5J`H>r%1i}34md~I39bvYXBU3FX^
zPqg+Jy>`)FtRNXCS-pRmy+id{nAlHu=qiN%Se4`1Mjl}s1?;?zwJPf#*~;=OB)?q0
E0AmvR2mk;8

diff --git a/layout/reftests/fonts/math/stack-1.otf b/layout/reftests/fonts/math/stack-1.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..437e4dd84eb952dfec32c45d0ad82f6b82397847
GIT binary patch
literal 1864
zc%0o;O-vI(6#iy+yDd<Q5)h)5OqBSSv@AtPL`+o7>Op>t1U1p%1}m*lwpprCPb9=s
zHEKNRQH>{~@#4Xl#*-(Mi!t$r2NR7RQHp={&F&OhBLT0@^v(O;oA)<AJMHc7??n|R
zpu*@fO@4f8XCI)=0(fJZ{oQ9%DGl&VksR*c+ka5e2d|R+0bs{^k2J^DJg&V$nA7~J
zp_G-zD)j}RUMJnYMBF<4v!|+s=AIF?CrF{3)YlUh@tYE<%!PnK2>v}Z1X9+8G!#k?
z)<A<kW~JhfBKB93Cjezt+8)moCb5I+drk8kOqf#Oj$KCwt2@7-N)y2_UH^VvDVHq(
zMI!Q1gm6M@Sk#m?n(T8&Xj%iCg^z?=ir9r~9%rA>$|{73Ua{cyXB6N$Rmr_vikE)T
zhRYR%@Nhx989fp+_;Fcch4>ALRcypti8c6HP+}ievv!Gf(jO&Drit1Pxn2S@%5_d+
zQO;F~RqV%2i8ZqMA+Zmf)k>@*#15bfHqy8V2T2Sgfefu-D~7O*cnk(w=yW)`$?6hW
zj8eBq7G4hdiP0jTB%v{&%T8Z(lEaA%-#WC7$BdR8yxYE%938cIm+ho&$I2vavKuEC
zi;|2WLJ2UQv4%z>1iYW=2FtkIp`zk$DN!nhql2j2+talXj=AKO4AUOVn6@(<=dq~4
zJGjh2s4WtUh|-oWV}MdRH0!O3Q%Dgs>T*#82I9^*Erc6JOVlt7zH}&g!XAa?X?BVe
zaAi$Iqfv8ZUMP5D;a&0mF#T_ru)Hld{~t8fV}%K{;x7wk^ihK`7AWpJ6Cc>2d^Pgx
zSw5`fH>mk~?Mjd}zEkcMf@<U8JB6UuSc!`B1I^j&0touE)O=ywtqudL!??dDj6fK#
zYM_dUTj&zBt?ZJ^N=hyQgTmOxP1)SsWRB%>^D{X$xAvPk_wkph=e|Fwo12`U`9A3n
zg}yzg&DLdum2zp+rgq<%7QE~o6f>2WVNrV6I`x0u(U+2MU*7caXDZ{&3Sx@0xh;7S
z7u%ou))Ff5XSDA>pAz0pulri!O~i}ur|9KU6HyQ~Xh7qVRe6@RWYOfJkQ>+27I{e*
I{~&^X0|y7-8UO$Q

diff --git a/layout/reftests/fonts/math/stack-2.otf b/layout/reftests/fonts/math/stack-2.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..6c6142023a0a9bfea64343f5732ee6d89869a08d
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq{^Ss#L8umZ273kaU~2f~5tuvWgh1SgMGkON~vm>Bemo?Ws^a
zrJ~Z49#uSvpa%~kK|FY}dJ(}}JqU_drKzv@&+eoqwne=<lbQef-~T*z(%aY9iyDkU
zh0$Z0{K(YS1Az7kz-!a&i=R%XHNf|r_;7rC-)==;{gL?h06W}!uqC$ae%%CNPWlrA
zX)A*z>N7ySO0pfvgmv=!zM59jJ*KfGNdo1V-auHyZ%(GO7Xk($__xs%NLv>&Q1%mK
z^)%_jRyy&Z<?Jl+V}P<GV~=Eu<7lV)UXh-I2~!~2{&ezqZP#biXd)P1u6nnooXQq}
zA`$s0f;p<y|B_TRQto$WXj(n{1RpWi6|oCfJjy<zja3N~y=u<u_b9*<s*-!T6fgZR
z8!lH6!o4}^dhC;!!H-K4D@3nJtfC2TB-Y?(L5Y1>%C<<Xll%}_GELOB*Yy&ZQLb|m
zi*hbYtYRl7CDzF1o5VhFRwuEJ5Zi?w*vQ}_9HcOaB(k)IjTpctqA?g~rPJYvlhr6$
z3{kg;7hVqeiP<8b6ro|D$Ie`IQiI7X-#D;|$Bfo?9=AtRLqittv7L<VSlN_Kb|d6s
zQIa!=P!fz}t${NU0^ZMbgJoUnP*DlDlqeO$(MhAy+mm&;I5Jl<OnW$M+Rk8t$D#)B
z<T3}Ljz}ybN?W{)eoE<()>{>)kRoW*rJ@M*C!7&l2sez@s9_j<@lf)Fy%CnD*(FZE
z<uwtFX3gb!vFOdkx25~T^o1^AW&4x<KWM5)ieqTQ0t;sJQG+oSDD68FAK2bPEeZ{+
z5LOCn)xs)mBFGxwDz}S4wei5sVo+<WM%DTLmRxQQ1pPT`zA$dphJmGF+*uYzAdDBw
zp^Atb=n{1N-6fZmlwAY{g|Vh}x%|v{p5^ni(|I+&@{2k1;fJZ`zdl?sGd?^0b=)5c
zeYsngTagP^%cW6!-hK0>pcU_+&{SiZMd@Md(*JcwrzG7xUlrUlU&c=TMNDxvHzY0L
zQu|%rRyNA~8SVS`M})iSbze!enP}<#6upvbrV+$))T43Hsyxd&vS@Zu$c^hsOSG(u
Ie-JT#0{Y9~8UO$Q

diff --git a/layout/reftests/fonts/math/stack-3.otf b/layout/reftests/fonts/math/stack-3.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..832da9616b796361d20d81ba3c51c662cc8d0d95
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq{@D)zX(XmZ273&~%eNK&hZsR*}~FC{<9=rN$<<>4t3-^;9UH
zqNsS%V--&#c+i7L@Z?GDMFem4AShmy#%KIzchV-+qF((cGynHL=by(;28V_QQH3d}
zF#1fBA9=C)0HA#Y@X9oY22Q6^8sK|Ia(H0-&~8Ov^?~Gf06RQ*up_qee%&R)oa`q?
zQdSz(>Qg|yO1d41xOMXT-l{0s9#ij0kU}}8Hxm~5+Y+hFxqv|k{%te_Qr5XNlzjwQ
z6Ak)=m5M)zPJSbK3Q(%k_GG3ojV`M1CD}Qca0S*ya@pfGy`NB}iDZ~<e7m}oOA0`d
zh+-5W9Mzf@HDyG`eeMWNYhoYaBjJW3cHxT0*#~s83gMzxEJQ8M0z9EAxi^>MO~2^F
z<qAT$x1e2zy%IC{aZzH0_%(@DwBohI8vHCMu@5U)kHk9Z50NL+L~Z?Ul)#MUIwP?t
z=d#2qcH+9k8u@&a*ayz)B-RmPyU+(4X`F|HBu0@yhSsnFBiKkh1_Mz#9gYF=x<DS|
z)GU%kltXc1v?wM?XaeZ7)90P!Xd=TmjBMmFBih9W><h{9af|oaPTF>?OwuO5NeZ!O
zk}<TSlf;ZQGS*JO`<ZUCjLRJ=D(;pNp<+0;P%n@6blrqwZud%tX-{NK+Zm1XSj6C4
zxSWGfcYCZ|l(u{s!!)HsR&Q0DQi`Mzmy04W9Cs#ZA>1&c5yLR}@~Pwrdp#^qvsave
zD{CSfjhZX-LctpgZ;JPa>A$;#<@6`}e?Y3o3R7Zpe_b%6j~a}zKylxh_`v$}HOM!!
zd|1h^QS*)3r66m0quee8)t3D;g`n0_iHfts9og&x2>P=`zA$dpgn<=d+*uh$AdDBa
zP({Y|bP2lu?vl$&N-hF}!dUCtY;Jx!$8x#Pb2&BF@Wq^e|HIUCUmw=bPk)~KI_(dI
zzTB<L)@Os2a%n`*w$987UiJ<OOC{!5gdVnD{a<(Vx#XLccM0w(+2K=vky9-5rsPFj
zq^0`Kl3o(eXy3m-BD|Ge_Xgr^#Eb8zXysBH^&o1|gqCHi@;vLvqs>JjH?OBH@{%V0
HK}7!v*AL(t

diff --git a/layout/reftests/fonts/math/stack-4.otf b/layout/reftests/fonts/math/stack-4.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..a2badf63ec89cec0a7b0de9a58f7001dd06e2095
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq{^Ss<gIf3_~qig~n}S3rYpGvU;#DEY*XrrG_T9>4t48ZBK>b
zDT<0GJ*s#T!HbAU(2FOv7g4;m2SL%J()f)3>`rPT7VFiS{PTbRbN+ekq<3JT7d4oH
z3Zu(3`LVg3hXL&)fS0B@(0wMI)&SpAlEdA52M#LwiN_?r1=!Kv!`owP?$(_r%*lRg
zC~al1N__&Tmq@oSnXpcO@2P1c+e4y`Bq@~R`Ub)xe{(XOoeUU+;NL?-AZ<-%p!5-B
zjWp<ERyuJ%K2aoj22fUI?D1@I7CWfE7i8yP!WD?L7_Uy&c78&QCX!*U;m!JTE?WSK
zL=>Y4;h5I=OH<Lv*yoPWv_|$3J`%1fVizuYoV`b!RS6fpYANdXEWjhGl6!M0-t@nG
zxLiR9cb2r9(IYW~ALk@ih+mdiMH602tijKM68o^4bx5p}{s?(8P1JVCjS`sAToV$D
zaxO@$Vn41(tdY+*iGAR#PGTJ)b^u+lk--!kq%e#mvb2U43}Gwr7!0)0>2P$D*ED&I
zQnyGJQ4Yn4(W00Xp)sJ#&P+L};bfM#3~l8xqiqN8wx?60qZaS7os8{R*_2Iw;}l}i
zBqL}Qhd-XRhDKTmct6ukmUX#9MJ3!)qErmWE~3h4PuEU3=8{)3OnWSA+Rku-$D#(`
z#pN7?+FN6-qO|497^Ep3vU;oHlu{&(x?B{2!GtqT3*m;*7BvimFP}=Dut#Benw{bV
zTv-#@Xw+Pp7mMClTqxZirvK>@R<^&{|AVG_tT=->{;*(1A2k?bfzrM+@qryG)S|F~
z6~ankqgrUt&Ieg!LAhBBs*(Qd#h@0cM%CHD?YZ0%2>Nr>d|}+E4FjvgxV0vXKp4;0
zLKPXe&?RVJ*(H~ilwAY{g|Vhhx%}d6p5^nO=kscQ-4}E5-49dGf4x_~IQx12>#RQ%
z`f|H2SDy=3%cW6!y8HT^;1%znuvBB7Md@Md)c<uypGm%L1-{pS{tqkgi+jE<FX6Hr
z75aD?mBlmK_wNq~@21y%9r0%3rT0_xN~xJBh_z@$WZ9}b&pPsGc2UU9>uF28tc!mT
GK|cW<?BN*z

diff --git a/layout/reftests/fonts/math/stack-5.otf b/layout/reftests/fonts/math/stack-5.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..0caa108f3d22939492eadf6b4b2d9595dc9e283d
GIT binary patch
literal 1864
zc%0o;O=uHA6#iy+vq{^SR*kjVSch8tgT`%Q1f_ynSw&i_7^(+Fml~RA(+%4wZBK>b
zDT<0GJy!7~f)^2$;K@_{If&q`9t6c}rSUhu*`3xzTGXpEnR(y)o%d#DC%wsJFX}K3
z6-Jk7@)Iw&Cjo5+z-!Y?_MFLPHNZDTe57Z0a=)UlT1)(UfF0{SvL&|kUiczmPWn^*
zSu2Mn>Qg|yLb5&Sly&<1!MYC8J*KfOO#<bF-b`4;Z%b$MBLRaD{JUrhWUY}LltTnr
z6HWS%l}$ZLj3~s91Im(|J)AF3U@PVKiu4>zm;#Nh50;;-@BD;1O$5V>mG4$pQrQAf
zBqAS0Fvqo~Uy`au%0uo9O>1H^@DX!e5xa2NqwFK%tVWpVHS=D-M**HtmfTxQ@s|H(
z!({~_+?|)M$3cl1{J0>oLiDP{Dq8VIVhw&4l-P#`woPK4<VVSpX(G37*GphVYn_u=
zq;pAP6?<__VvTIRN$dk>VTpBw*gkZ@Mh>HJkih`b$Wsj)(T`0;V=&M`r^C@hR%2u_
zNZle{csb-JW{Z3>goc1FJ2&cN2GV)Hv40bf868`Bk3E(d9JF|s?c{97%4ck{8zvWv
z7CDP{B#6yh{b$<=ct6t(mUpQ`Nu}IWqLd8B4jR?oo-9E)<_<4qnD$WKw4H$zk3|i>
zgUdAtCE8={BDKZS=%Xba(t1^K3Mqm{T`H15U&<M#LbzdcL=D5>i-(dY?2U*#%}#Lw
zF0YAbG;1!;%Vlpazn!~3Okd~{R<}Rt|AVG_q&$u|7ATm}M-9eUU~b=;_`teL^(Zy7
zQbZ}OQA;bei$T`%R=HIUsx5~n%R#NB7B%PlwiF8UAm}ep^F?s8J_0mEaC>P4fe4;2
zgDN6!pi7YWyGt%JskjIX3S+J73dPxpA}ba@PZ!l<;}>)G!w*w0e!ah9cH;B&*9m_p
z^yN;tu%ZyGm8DUe+Bx|`(5iP(XlgOdqV%wJ>i@c<&m`TvusV34g1PaRG2_xUUV$rP
z#22uMSNk*C_wNr0@1)ngk!Tyyx%X4_YOak&5X;bnmPNDjEW>2c=Aw`r*OSiCiZ1>^
G#P|vAUfvu4

diff --git a/layout/reftests/fonts/math/stack-6.otf b/layout/reftests/fonts/math/stack-6.otf
new file mode 100644
index e69de29bb2d1d6434b8b29ae775ad8c2e48c5391..1c196372514551af3bd693eafaad5f71a15b5a0f
GIT binary patch
literal 1864
zc%0o;OK1~882)B=vq{^Ss#L9Zt%C+%(6~+7ic&$XtRk&dtkr|BrG_Tjbi+1E?Ws^a
zrJ~|Vk1C!-5X6H>@Z_l~f(YK~K~TIZjnDYc?xZGSeO#T%KmYeX=by(;di(l%QHOD;
zFuN>^AAPpz0HD1G@WQhCdQN6C8W5Nw+34BUw@cBNt|0jhzz+59-w<DLr(u#XC;Rb%
zjGe_i^%0<6B;EE@(mwHZPhBh79uRe;NTD3jn+S{i(Nrck8ZrqXxRr)b#vaW=*-MZ$
z(x4C9nPg$(Sb*elK$(|yMslSIv{8M}$<D!qD-bd6)*Y+w{D3-5B*W7sua{MF*+Nhx
zq8LR8hqcBZnyN;|z1|2-Yh>?1H7HjUu?rV`&fX!xYJ`hkGaL1D7T_UO$^E$$fBGLj
zT&^I3+q2r$*dsAR5a%RTh+mRe#Y()CSVNG7B@SRd>yTI{{Xz0%ny9VYixQa8T&E=#
z<(!vT#SUDSSR<b=5(mIpgTy)_Y$v+lAd9nbk;WiW$k7_sVgT!i$6=zCPKTq1yvE35
zh`LR(h;k`Tj5fuj2@L~XPWG&u9!%x<+JSXEZnn1Z9%n2)G-UHG$IUvfol869H$ovc
zO>zn?=pZp?51eWt;QuTyS<d4w6_xZ#iBT~en~AEUeO)`@xJQ1;u$<wX<+y`M9*>!P
zGnaD^YHx|Rh|=aRqo1a9$?C6)Q%aFE=5bL3`jhSmErgq9Ys@rFK6fg4!af=DG&{u!
zc(Nw4(WrScFO~eU^s0P+nEtCvSl#|){|}n#v(h*c_{D-5ebiu#h06QR#0S=0tVgkl
z6%D1hTrDoqCc~`xm2#sLR-5--D}}Y@TGX8B-;mGGf^aZTEnwh!y#dTOaC3oykbx%)
zp^A)a=n}O5-6fZmR9plGg|U^Z@`ag+0xJ|gP8Za|;!oDh+i#X$_<V2C%*4m(&lAB&
z<kPK&{GxogRxXX&)Rt>c1+RJsg{2nLEJhDor~a=y`dISyzjq7ors3*e=1fT6L<KIl
zpY@3fs)%Q_?_ci|-a@bYV&YNa<@ZzcYAH$-#zHirdCsbQ&j#{{dMM)M^|fVQ(ZxTA
Fpzq0|-W&h`

diff --git a/layout/reftests/fonts/math/stretchy.otf b/layout/reftests/fonts/math/stretchy.otf
index b019fe3dc4ce5ceaabe4514b867d2520d7bebc97..841830d50389546d0d3ac2a06ce36e0fe9a67f9b
GIT binary patch
literal 3236
zc%0o<Z){Ul6hEhZZTIKVbpy5mkL7Jl9D{Xj2Mi_{p-=@khGE$ULV#|2qb2KFyKel6
zF_W2~Rt1^=z=^m(<iqMWXEZYX0E9#sglPOAPDwP2A;g%$S~_e!_ubcSgNPWu`P%z_
z=lt&PoO|AT_ulvF8ye~%8@fRcHmA!aS6&_e4#2PkKqzpz8tQiYd;&n`IslOB)-*ix
zN8_BE<nIK~U8&zv>B!4n)d_$y_3v!<xdYCw`fC9C)5JA-6nD$Q^^gBVeP2;q?jd4v
z!@@Y(x2TnRe4)MOrDTC<qf^M|-W!1Vo5{pNIvLyDK4nGq7eVs7X}q$4zay0Ffhwv`
zq<$HYNdc5^oo9CBthx=^0!s#$3x1nBiDQFh<7MOIW`GX(K`}b!Y%9ABFfmHK2-A=G
z0Grh_2)b;%1qO;Zs=G-3A&z(hsxXt~G3wJ%EX&SmdA<R;T;gNt`0$e>$=Vf|;nOs`
z5H@KxQoRQ?n+Ad7nyrTga8t7d$iM}fZ2$|VVvWQ<Pf8T1La0@vn2lh8PR-VV2!}OW
z4=y;R*#hOs)ocUExJ0v!#P0wn_#puMAP8RA1s({|HIzX!EFyG(4eYR#tU6NdCq*0m
z+~l*UAjPq>n_|3VwF5Z)fqg;mE>B1<YhENfZ1$ycoqxZ#t<5bv{lS1g=ni@Pr0bxN
zASiThrXlwc5eh1yW)E3)M7L1BPVkYVw0JuSU26J}ia{z<QH!%uc{0>cyEh+amq7)o
zD$<t$E`NK-<qz&sWQWxz*T|_+$y`?9s9^Ozu(n2`gCyWrD^psQ*s3Bc1sauL2VJ0S
zv)QdSn@xUTHuem8leDM2jXfFF7vL$jh}0P_fLz>Pe5&|#xs*(@SytRf-Y4brlF8)t
zk=Buxk>>CJym!8%5$;<8_a6V&|35gim7MHmd(8a@f*=4QW~QGC>WHk5<v?sX#;SF(
z75Z3#P;^~)GAZhdp6gGFLQxiEb~RRp!)Ze_g{84UscfA71__lM3BV%Z@mvXHNk5tg
zMLKoy=RiJfK&7ylX5>nGz_qXiw$el2PFqY9P5M^YO%tnwX2}b*eIJ0AX}gHPXK<#o
z-RrQgbaGh7VLb<z3Ttc}>>L~%mT{<d2ZR1Soq?A2rVfQsYwT+|I6by5o5$W|_c*#7
zZAxoMUArEix24G+3i*8@f1rz;+U2z?YVEd%TimHTIdz^R9>iDhReTM@_&UCUZ{i_5
zjBnu)?8Ue79efwx!}swh9>Wi?4?o1?_z|AKk6}K$Z;#P-R73a5P20^&&<iJF5YEC?
z7=d459CavR39iJaaXW@6*=hV5f5aO&q05%yHQ}LX&kzm`MK28Lhw@|A=<j!}#-WM9
z+0mZpg^3=MIkDC(#rjL43Wmq@CBj%#Szt7)Zd4&Zszj9u#b}o9gg80O$YCOfjpp!}
zstT)7CemDEni3&a9aZjDQ@@rbtfe7I+@(oQkmLlD45uV&Qj?i`JVn}5)vVaC5Rb$o
ziHONO9v0**#>6A~M1*K5!;y#>8P9CHs!1>w!{jmz0l8B2vQdkcgdVP7o#IB;IX0+v
zs-B%Z6BAJgW8wp0E{P8qcr0TR#9Eq&O)%DSDaA_ShE%}k@qtu-Mqetqi4VZJJxDYy
zA&nL{ssj)T(rDWxONH=0%O%nm_Okz|k7_JTkT0KO|DT^Azqpcobv;TyWSPv-mRXYN
z{Oqup6;-mvZru{acqE(fPKP*y*62*O1&HeHvC|NyY`!(nadCD3WrowfKUhx|{DM~c
zpjc%D`P_fnkuGUi{t((@R7UGV=&HC@#gsiI$27ibN}Cdov}gVGCE2TKqsk{NB}{#{
zpt^lc^-8IUkOzfO^p90><t%&=k5IIczJ#psB)!5n(R*|&ZFsxs#drW-gClBPTpget
zJ4cucxfu?aDL$+6%xB0rhK%plMwlm`pN8z$M>)(CV<CN>mcy*&uxL3LKcLlVfC2{M
zMmo*ZEQC4CD(s!c6{dBM7B?&H=cP6I>9|R5_9Msf=VkyCWYV0?re`*Td?Pg--6es2
wSF&$dfmP_Cc7;M}H0<Z76FH_D(`MKwG1bHklgJvY$<oAI%9qaqurKt#0Y{`vBme*a

diff --git a/layout/reftests/mathml/opentype-axis-height.html b/layout/reftests/mathml/opentype-axis-height.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-axis-height.html
@@ -0,0 +1,48 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - axis-height</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: axis-height-1;
+        src: url(../fonts/math/axis-height-1.otf);
+      }
+      @font-face {
+        font-family: axis-height-2;
+        src: url(../fonts/math/axis-height-2.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+        assert(almostEqual(getBox("plus1").top - getBox("plus2").top, 10 * 20),
+              "Bad AxisHeight");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math style="font-family: axis-height-1;">
+        <mo id="plus1">+</mo>
+      </math>
+      <math style="font-family: axis-height-2;">
+        <mo id="plus2">+</mo>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/opentype-fraction.html b/layout/reftests/mathml/opentype-fraction.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-fraction.html
@@ -0,0 +1,177 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - fraction</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: fraction-1;
+        src: url(../fonts/math/fraction-1.otf);
+      }
+      @font-face {
+        font-family: fraction-2;
+        src: url(../fonts/math/fraction-2.otf);
+      }
+      @font-face {
+        font-family: fraction-3;
+        src: url(../fonts/math/fraction-3.otf);
+      }
+      @font-face {
+        font-family: fraction-4;
+        src: url(../fonts/math/fraction-4.otf);
+      }
+      @font-face {
+        font-family: fraction-5;
+        src: url(../fonts/math/fraction-5.otf);
+      }
+      @font-face {
+        font-family: fraction-6;
+        src: url(../fonts/math/fraction-6.otf);
+      }
+      @font-face {
+        font-family: fraction-7;
+        src: url(../fonts/math/fraction-7.otf);
+      }
+      @font-face {
+        font-family: fraction-8;
+        src: url(../fonts/math/fraction-8.otf);
+      }
+      @font-face {
+        font-family: fraction-9;
+        src: url(../fonts/math/fraction-9.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+
+        /* inline style */
+        var ref = getBox("ref").height;
+
+        assert(almostEqual(getBox("d1").top - getBox("n1").bottom, ref * 20),
+               "Bad FractionRuleThickness");
+                                                            
+        assert(almostEqual(getBox("n1").top, getBox("n2").top) &&
+               almostEqual(getBox("d2").top - getBox("n2").bottom, ref * 10.5),
+               "Bad FractionNumeratorGapMin");
+
+        assert(almostEqual(getBox("d1").bottom, getBox("d3").bottom) &&
+               almostEqual(getBox("d3").top - getBox("n3").bottom, ref * 10.5),
+               "Bad FractionDenominatorGapMin");
+
+        assert(almostEqual(getBox("ref").top - getBox("n4").top, ref*3),
+               "Bad FractionNumeratorShiftUp");
+
+        assert(almostEqual(getBox("d5").bottom - getBox("ref").bottom, ref*3),
+               "Bad FractionDenominatorShiftDown");
+
+        /* display style */
+        ref = getBox("dref").height;
+
+        assert(almostEqual(getBox("dd1").top - getBox("dn1").bottom, ref * 20),
+               "Bad FractionRuleThickness");
+
+        assert(almostEqual(getBox("dn1").top, getBox("n6").top) &&
+               almostEqual(getBox("d6").top - getBox("n6").bottom, ref * 10.5),
+               "Bad FractionNumeratorDisplayStyleGapMin");
+
+        assert(almostEqual(getBox("dd1").bottom, getBox("d7").bottom) &&
+               almostEqual(getBox("d7").top - getBox("n7").bottom, ref * 10.5),
+               "Bad FractionDenominatorDisplayStyleGapMin");
+
+        assert(almostEqual(getBox("dref").top - getBox("n8").top, ref*3),
+               "Bad FractionNumeratorDisplayStyleShiftUp");
+
+        assert(almostEqual(getBox("d9").bottom - getBox("dref").bottom, ref*3),
+               "Bad FractionDenominatorDisplayStyleShiftDown");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math>
+        <mspace id="ref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math style="font-family: fraction-1;">
+        <mfrac>
+          <mspace id="n1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-2;">
+        <mfrac>
+          <mspace id="n2" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d2" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-3;">
+        <mfrac>
+          <mspace id="n3" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d3" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-4;">
+        <mfrac>
+          <mspace id="n4" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d4" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: fraction-5;">
+        <mfrac>
+          <mspace id="n5" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d5" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+    <p>
+      <math displaystyle="true">
+        <mspace id="dref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-1;">
+        <mfrac>
+          <mspace id="dn1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="dd1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-6;">
+        <mfrac>
+          <mspace id="n6" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d6" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-7;">
+        <mfrac>
+          <mspace id="n7" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d7" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-8;">
+        <mfrac>
+          <mspace id="n8" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d8" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: fraction-9;">
+        <mfrac>
+          <mspace id="n9" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d9" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/opentype-radical.html b/layout/reftests/mathml/opentype-radical.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-radical.html
@@ -0,0 +1,181 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - axis-height</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: radical-1;
+        src: url(../fonts/math/radical-1.otf);
+      }
+      @font-face {
+        font-family: radical-2;
+        src: url(../fonts/math/radical-2.otf);
+      }
+      @font-face {
+        font-family: radical-3;
+        src: url(../fonts/math/radical-3.otf);
+      }
+      @font-face {
+        font-family: radical-4;
+        src: url(../fonts/math/radical-4.otf);
+      }
+      @font-face {
+        font-family: radical-5;
+        src: url(../fonts/math/radical-5.otf);
+      }
+      @font-face {
+        font-family: radical-6;
+        src: url(../fonts/math/radical-6.otf);
+      }
+      @font-face {
+        font-family: radical-7;
+        src: url(../fonts/math/radical-7.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+          assert(almostEqual(getBox("inner1").top -
+                 getBox("outer1").top, 5*10) &&
+                 almostEqual(getBox("inner2").top -
+                 getBox("outer2").top, 5*10) &&
+                 almostEqual(getBox("inner3").top -
+                 getBox("outer3").top, 5*10),
+                 "Bad RadicalRuleThickness");
+
+        assert(almostEqual(getBox("inner4").top -
+                 getBox("outer4").top, (7+1)*10) &&
+                 almostEqual(getBox("inner5").top -
+                 getBox("outer5").top, (7+1)*10) &&
+                 almostEqual(getBox("inner6").top -
+                 getBox("outer6").top, (7+1)*10),
+               "Bad RadicalExtraAscender");
+
+        assert(almostEqual(getBox("inner7").top -
+                 getBox("outer7").top, (3+1)*10) &&
+                 almostEqual(getBox("inner7").top -
+                 getBox("outer8").top, (3+1)*10) &&
+                 almostEqual(getBox("inner8").top -
+                 getBox("outer9").top, (3+1)*10),
+               "Bad RadicalVerticalGap");
+
+        assert(almostEqual(getBox("inner10").top -
+                 getBox("outer10").top, (9+1)*10) &&
+                 almostEqual(getBox("inner11").top -
+                 getBox("outer11").top, (9+1)*10) &&
+                 almostEqual(getBox("inner12").top -
+                 getBox("outer12").top, (9+1)*10),
+              "Bad RadicalDisplayStyleVerticalGap");
+
+        assert(almostEqual(getBox("base5").bottom - getBox("index5").bottom,
+               (getBox("base5").bottom - getBox("root5").top) * .25),
+               "Bad RadicalDegreeBottomRaisePercent")
+
+        assert(almostEqual(getBox("index6").left - getBox("root6").left,
+               10 * 5), "Bad RadicalKernBeforeDegree")
+
+        assert(almostEqual(getBox("base7").left - getBox("index7").right,
+               10 * (7+1)), "Bad RadicalKernAfterDegree")
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math style="font-family: radical-1;">
+        <msqrt id="outer1" mathbackground="green">
+          <mspace id="inner1" width="1em" height="1em" mathbackground="red"/>
+        </msqrt>
+        <menclose id="outer2" notation="radical" mathbackground="green">
+          <mspace id="inner2" width="1em" height="1em" mathbackground="red"/>
+        </menclose>
+        <mroot id="outer3" mathbackground="green">
+          <mspace id="inner3" width="1em" height="1em" mathbackground="red"/>
+          <mspace/>
+        </mroot>
+      </math>
+    </p>
+    <p>
+      <math style="font-family: radical-2;">
+        <msqrt id="outer4" mathbackground="green">
+          <mspace id="inner4" width="1em" height="1em" mathbackground="red"/>
+        </msqrt>
+        <menclose id="outer5" notation="radical" mathbackground="green">
+          <mspace id="inner5" width="1em" height="1em" mathbackground="red"/>
+        </menclose>
+        <mroot id="outer6" mathbackground="green">
+          <mspace id="inner6" width="1em" height="1em" mathbackground="red"/>
+          <mspace/>
+        </mroot>
+      </math>
+    </p>
+    <p>
+      <math style="font-family: radical-3;">
+        <msqrt id="outer7" mathbackground="green">
+          <mspace id="inner7" width="1em" height="1em" mathbackground="red"/>
+        </msqrt>
+        <menclose id="outer8" notation="radical" mathbackground="green">
+          <mspace id="inner8" width="1em" height="1em" mathbackground="red"/>
+        </menclose>
+        <mroot id="outer9" mathbackground="green">
+          <mspace id="inner9" width="1em" height="1em" mathbackground="red"/>
+          <mspace/>
+        </mroot>
+      </math>
+    </p>
+    <p>
+      <math style="font-family: radical-4;" displaystyle="true">
+        <msqrt id="outer10" mathbackground="green">
+          <mspace id="inner10" width="1em" height="1em" mathbackground="red"/>
+        </msqrt>
+        <menclose id="outer11" notation="radical" mathbackground="green">
+          <mspace id="inner11" width="1em" height="1em" mathbackground="red"/>
+        </menclose>
+        <mroot id="outer12" mathbackground="green">
+          <mspace id="inner12" width="1em" height="1em" mathbackground="red"/>
+          <mspace/>
+        </mroot>
+      </math>
+    </p>
+
+    <p>
+      <math style="font-family: radical-5;">
+        <mroot id="root5" mathbackground="green">
+          <mspace id="base5" width="1em" height="10em" mathbackground="red"/>
+          <mspace id="index5" width="1em" height="1em" mathbackground="blue"/>
+        </mroot>
+      </math>
+    </p>
+
+    <p>
+      <math style="font-family: radical-6;">
+        <mroot id="root6" mathbackground="green">
+          <mspace id="base6" width="1em" height="10em" mathbackground="red"/>
+          <mspace id="index6" width="1em" height="1em" mathbackground="blue"/>
+        </mroot>
+      </math>
+    </p>
+
+    <p>
+      <math style="font-family: radical-7;">
+        <mroot id="root7" mathbackground="green">
+          <mspace id="base7" width="1em" height="10em" mathbackground="red"/>
+          <mspace id="index7" width="1em" height="1em" mathbackground="blue"/>
+        </mroot>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/opentype-stack.html b/layout/reftests/mathml/opentype-stack.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/mathml/opentype-stack.html
@@ -0,0 +1,125 @@
+<!doctype html>
+<html>
+  <head>
+    <title>Open Type MATH - stack</title>
+    <meta charset="utf-8"/>
+    <style type="text/css">
+      math {
+        font-size: 10px;
+      }
+      @font-face {
+        font-family: stack-1;
+        src: url(../fonts/math/stack-1.otf);
+      }
+      @font-face {
+        font-family: stack-2;
+        src: url(../fonts/math/stack-2.otf);
+      }
+      @font-face {
+        font-family: stack-3;
+        src: url(../fonts/math/stack-3.otf);
+      }
+      @font-face {
+        font-family: stack-4;
+        src: url(../fonts/math/stack-4.otf);
+      }
+      @font-face {
+        font-family: stack-5;
+        src: url(../fonts/math/stack-5.otf);
+      }
+      @font-face {
+        font-family: stack-6;
+        src: url(../fonts/math/stack-6.otf);
+      }
+    </style>
+    <script type="text/javascript">
+      function assert(cond, msg) { if (!cond) { throw msg; } }
+
+      var epsilon = 5;
+      function almostEqual(x, y) { return Math.abs(x - y) < epsilon; }
+    
+      function getBox(aId) {
+        return document.getElementById(aId).getBoundingClientRect();
+      }
+      
+      window.onload = function() {
+
+        /* inline style */
+        var ref = getBox("ref").height;
+
+        assert(almostEqual(getBox("d1").top - getBox("n1").bottom, ref * 20),
+               "Bad StackGapMin");
+                                                            
+        assert(almostEqual(getBox("ref").top - getBox("n2").top, ref*3),
+               "Bad StackTopShiftMin");
+
+        assert(almostEqual(getBox("d3").bottom - getBox("ref").bottom, ref*3),
+               "Bad StackBottomShiftDown");
+
+        /* display style */
+        ref = getBox("ref").height;
+
+        assert(almostEqual(getBox("d4").top - getBox("n4").bottom, ref * 20),
+               "Bad StackGapDisplayStyleMin");
+                                                            
+        assert(almostEqual(getBox("dref").top - getBox("n5").top, ref*3),
+               "Bad StackTopDisplayStyleShiftMin");
+
+        assert(almostEqual(getBox("d6").bottom - getBox("dref").bottom, ref*3),
+               "Bad StackDisplayStyleBottomShiftDown");
+
+        document.body.innerHTML = "Pass";
+      }
+    </script>
+  </head>
+  <body>
+    <p>
+      <math>
+        <mspace id="ref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math style="font-family: stack-1;">
+        <mfrac linethickness="0">
+          <mspace id="n1" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d1" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: stack-2;">
+        <mfrac linethickness="0">
+          <mspace id="n2" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d2" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math style="font-family: stack-3;">
+        <mfrac linethickness="0">
+          <mspace id="n3" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d3" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+    <p>
+      <math displaystyle="true">
+        <mspace id="dref" height="1em" width="1em" mathbackground="green"/>
+      </math>
+      <math displaystyle="true" style="font-family: stack-4;">
+        <mfrac linethickness="0">
+          <mspace id="n4" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d4" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: stack-5;">
+        <mfrac linethickness="0">
+          <mspace id="n5" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d5" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+      <math displaystyle="true" style="font-family: stack-6;">
+        <mfrac linethickness="0">
+          <mspace id="n6" height="1em" width="1em" mathbackground="red"/>
+          <mspace id="d6" height="1em" width="1em" mathbackground="red"/>
+        </mfrac>
+      </math>
+    </p>
+
+  </body>
+</html>
diff --git a/layout/reftests/mathml/reftest.list b/layout/reftests/mathml/reftest.list
--- a/layout/reftests/mathml/reftest.list
+++ b/layout/reftests/mathml/reftest.list
@@ -144,16 +144,22 @@ skip-if(B2G) == maction-dynamic-1.html m
 skip-if(B2G) == maction-dynamic-3.html maction-dynamic-3-ref.html # bug 773482
 == whitespace-trim-1.html whitespace-trim-1-ref.html
 == whitespace-trim-2.html whitespace-trim-2-ref.html
 == whitespace-trim-3.html whitespace-trim-3-ref.html
 fails == whitespace-trim-4.html whitespace-trim-4-ref.html # Bug 787215
 == whitespace-trim-5.html whitespace-trim-5-ref.html
 == operator-1.xhtml operator-1-ref.xhtml
 == opentype-stretchy.html opentype-stretchy-ref.html
+== opentype-axis-height.html data:text/html,<body>Pass
+== opentype-radical.html data:text/html,<body>Pass
+== opentype-fraction.html data:text/html,<body>Pass
+== opentype-stack.html data:text/html,<body>Pass
+# == opentype-scripts.html data:text/html,<body>Pass
+# == opentype-limits.html data:text/html,<body>Pass
 == scriptshift-1.xhtml scriptshift-1-ref.xhtml
 == number-size-1.xhtml number-size-1-ref.xhtml
 == multiscripts-1.html multiscripts-1-ref.html
 == mathml-mmultiscript-base.html mathml-mmultiscript-base-ref.html
 == mathml-mmultiscript-mprescript.html mathml-mmultiscript-mprescript-ref.html
 != menclose-1.html menclose-1-ref.html
 == mmultiscript-align.html mmultiscript-align-ref.html
 == subscript-italic-correction.html subscript-italic-correction-ref.html
