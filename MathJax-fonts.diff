# HG changeset patch
# Parent fcb96fd3b844e115d0ab465c8fbefb8c63fd12c8
# User Frédéric Wang <fred.wang@free.fr>
Bug 732834 - Using MathJax fonts in mathematical text. r=karlt.

diff --git a/layout/mathml/mathml.css b/layout/mathml/mathml.css
--- a/layout/mathml/mathml.css
+++ b/layout/mathml/mathml.css
@@ -49,17 +49,17 @@
 /**************************************************************************/
 
 math {
   direction: ltr;
   unicode-bidi: embed;
   display: inline;
   font-size: inherit;
   font-style: normal;
-  font-family: STIXGeneral, DejaVu Serif, DejaVu Sans, Cambria, Cambria Math, Times, Lucida Sans Unicode, OpenSymbol, Standard Symbols L, serif;
+  font-family: MathJax_Main, STIXGeneral, DejaVu Serif, DejaVu Sans, Cambria, Cambria Math, Times, Lucida Sans Unicode, OpenSymbol, Standard Symbols L, serif;
   text-rendering: optimizeLegibility;
   -moz-float-edge: margin-box;
 }
 math[mode="display"], math[display="block"] {
   display: block;
   text-align: -moz-center;
 }
 math[display="inline"] {
@@ -149,54 +149,71 @@ math[display="inline"] {
    XXX bugs 46622 & 114365: need -moz-math-serif, etc, to only lookup math fonts
 
    The meaning of mathvariant=normal is unclear as there is no interpretation
    that "corresponds to SMP Math Alphanumeric Symbol characters"
    (http://www.w3.org/TR/2003/REC-MathML2-20031021/chapter3.html#presm.commatt),
    but let's assume an explicit mathvariant=normal is an attempt to reset all
    style.
 */
+mi, mi[mathvariant] {
+  font-family: MathJax_Math, STIXGeneral, DejaVu Serif, DejaVu Sans, Cambria, Cambria Math, Times, Lucida Sans Unicode, OpenSymbol, Standard Symbols L, serif;
+}
 [mathvariant] { /* shared and same as [mathvariant="normal"] */
   /* reset all font properties except those that affect the size */
+  font-family: MathJax_Main, STIXGeneral, DejaVu Serif, DejaVu Sans, Cambria, Cambria Math, Times, Lucida Sans Unicode, OpenSymbol, Standard Symbols L, serif;
   font-style: normal;
   font-variant: normal;
   font-weight: normal;
 }
-[mathvariant="bold-fraktur"], 
-[mathvariant="bold-script"] {
+[mathvariant="bold-fraktur"], mi[mathvariant="bold-fraktur"] {
   font-weight: bold;
+  font-family: MathJax_Fraktur; 
+}
+[mathvariant="bold-script"], mi[mathvariant="bold-script"] {
+  font-weight: bold;
+  font-family: MathJax_Script;
 }
 [mathvariant="bold"] {
   font-weight: bold;
 }
 [mathvariant="italic"] { 
   font-style: italic;
 }
 [mathvariant="bold-italic"] {
   font-weight: bold;
   font-style: italic;
 }
-[mathvariant="sans-serif"] {
-  font-family: sans-serif;
+[mathvariant="sans-serif"], mi[mathvariant="sans-serif"] {
+  font-family: MathJax_SansSerif, sans-serif;
 }
-[mathvariant="bold-sans-serif"] {
+[mathvariant="bold-sans-serif"], mi[mathvariant="bold-sans-serif"] {
   font-weight: bold;
-  font-family: sans-serif;
+  font-family: MathJax_SansSerif, sans-serif;
 }
-[mathvariant="sans-serif-italic"] {
-  font-family: sans-serif;
+[mathvariant="sans-serif-italic"], mi[mathvariant="sans-serif-italic"] {
+  font-family: MathJax_SansSerif, sans-serif;
   font-style: italic;
 }
-[mathvariant="sans-serif-bold-italic"] {
-  font-family: sans-serif;
+[mathvariant="sans-serif-bold-italic"], mi[mathvariant="sans-serif-bold-italic"] {
+  font-family: MathJax_SansSerif, sans-serif;
   font-weight: bold;
   font-style: italic;
 }
-[mathvariant="monospace"] {
-  font-family: monospace;
+[mathvariant="monospace"], mi[mathvariant="monospace"] {
+  font-family: MathJax_Typewriter, monospace;
+}
+[mathvariant="double-struck"], mi[mathvariant="double-struck"] {
+  font-family: MathJax_AMS;
+}
+[mathvariant="script"], mi[mathvariant="script"] {
+  font-family: MathJax_Script;
+}
+[mathvariant="fraktur"], mi[mathvariant="fraktur"] {
+  font-style: MathJax_Fraktur;
 }
 
 /**************************************************************************/
 /* tags with generated content                                            */
 /**************************************************************************/
 
 ms {
   display: inline;
